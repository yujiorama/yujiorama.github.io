<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="Johan Haleby">
<title>REST Assured Usage Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>REST Assured Usage Guide</h1>
<div class="details">
<span id="author" class="author">Johan Haleby</span><br>
<span id="revnumber">version 4.4.0,</span>
<span id="revdate">2021-05-21</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_static_imoprt">1.1. static imoprt</a></li>
</ul>
</li>
<li><a href="#_examples">2. Examples</a>
<ul class="sectlevel2">
<li><a href="#_example_1_json">2.1. Example 1 - JSON</a>
<ul class="sectlevel3">
<li><a href="#_returning_floats_and_doubles_as_bigdecimal">2.1.1. Returning floats and doubles as BigDecimal</a></li>
<li><a href="#_json_schema_validation">2.1.2. JSON Schema validation</a></li>
<li><a href="#_json_schema_validation_settings">2.1.3. JSON Schema Validation Settings</a></li>
<li><a href="#_json_schema_validation_with_static_configuration">2.1.4. Json Schema Validation with static configuration</a></li>
<li><a href="#_json_schema_validation_without_rest_assured">2.1.5. Json Schema Validation without REST Assured</a></li>
<li><a href="#_anonymous_json_root_validation">2.1.6. Anonymous JSON root validation</a></li>
</ul>
</li>
<li><a href="#_example_2_xml">2.2. Example 2 - XML</a>
<ul class="sectlevel3">
<li><a href="#_xml_namespaces">2.2.1. XML namespaces</a></li>
<li><a href="#_xpath">2.2.2. XPath</a></li>
<li><a href="#_schema_and_dtd_validation">2.2.3. Schema and DTD validation</a></li>
</ul>
</li>
<li><a href="#_example_3_complex_parsing_and_validation">2.3. Example 3 - Complex parsing and validation</a>
<ul class="sectlevel3">
<li><a href="#_xml_example">2.3.1. XML Example</a></li>
<li><a href="#_json_example">2.3.2. JSON Example</a></li>
</ul>
</li>
<li><a href="#_deserialization_with_generics">2.4. Deserialization with Generics</a></li>
<li><a href="#_additional_examples">2.5. Additional Examples</a></li>
<li><a href="#_note_on_floats_and_doubles">2.6. Note on floats and doubles</a></li>
<li><a href="#_note_on_syntax">2.7. Note on syntax</a>
<ul class="sectlevel3">
<li><a href="#_syntactic_sugar">2.7.1. Syntactic Sugar</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_getting_response_data">3. Getting Response Data</a>
<ul class="sectlevel2">
<li><a href="#_extracting_values_from_the_response_after_validation">3.1. Extracting values from the Response after validation</a></li>
<li><a href="#_json_using_jsonpath">3.2. JSON (using JsonPath)</a>
<ul class="sectlevel3">
<li><a href="#_jsonpath_configuration">3.2.1. JsonPath Configuration</a></li>
</ul>
</li>
<li><a href="#_xml_using_xmlpath">3.3. XML (using XmlPath)</a>
<ul class="sectlevel3">
<li><a href="#_xmlpath_configuration">3.3.1. XmlPath Configuration</a></li>
<li><a href="#_parsing_html_with_xmlpath">3.3.2. Parsing HTML with XmlPath</a></li>
</ul>
</li>
<li><a href="#_single_path">3.4. Single path</a></li>
<li><a href="#_headers_cookies_status_etc">3.5. Headers, cookies, status etc</a></li>
<li><a href="#_multi_value_headers_and_cookies">3.6. Multi-value headers and cookies</a>
<ul class="sectlevel3">
<li><a href="#_multi_value_headers">3.6.1. Multi-value headers</a></li>
<li><a href="#_multi_value_cookies">3.6.2. Multi-value cookies</a></li>
</ul>
</li>
<li><a href="#_detailed_cookies">3.7. Detailed Cookies</a></li>
</ul>
</li>
<li><a href="#_specifying_request_data">4. Specifying Request Data</a>
<ul class="sectlevel2">
<li><a href="#_invoking_http_resources">4.1. Invoking HTTP resources</a></li>
<li><a href="#_parameters">4.2. Parameters</a>
<ul class="sectlevel3">
<li><a href="#_multi_value_parameter">4.2.1. Multi-value parameter</a></li>
<li><a href="#_no_value_parameter">4.2.2. No-value parameter</a></li>
<li><a href="#_path_parameters">4.2.3. Path parameters</a></li>
</ul>
</li>
<li><a href="#_cookies">4.3. Cookies</a></li>
<li><a href="#_headers">4.4. Headers</a></li>
<li><a href="#_content_type">4.5. Content Type</a></li>
<li><a href="#_request_body">4.6. Request Body</a></li>
</ul>
</li>
<li><a href="#_verifying_response_data">5. Verifying Response Data</a>
<ul class="sectlevel2">
<li><a href="#_response_body">5.1. Response Body</a></li>
<li><a href="#_cookies_2">5.2. Cookies</a></li>
<li><a href="#_status">5.3. Status</a></li>
<li><a href="#_headers_2">5.4. Headers</a></li>
<li><a href="#_content_type_2">5.5. Content-Type</a></li>
<li><a href="#_full_bodycontent_matching">5.6. Full body/content matching</a></li>
<li><a href="#_use_the_response_to_verify_other_parts_of_the_response">5.7. Use the response to verify other parts of the response</a></li>
<li><a href="#_measuring_response_time">5.8. Measuring Response Time</a></li>
</ul>
</li>
<li><a href="#_authentication">6. Authentication</a>
<ul class="sectlevel2">
<li><a href="#_basic_authentication">6.1. Basic Authentication</a>
<ul class="sectlevel3">
<li><a href="#_preemptive_basic_authentication">6.1.1. Preemptive Basic Authentication</a></li>
<li><a href="#_challenged_basic_authentication">6.1.2. Challenged Basic Authentication</a></li>
</ul>
</li>
<li><a href="#_digest_authentication">6.2. Digest Authentication</a></li>
<li><a href="#_form_authentication">6.3. Form Authentication</a>
<ul class="sectlevel3">
<li><a href="#_csrf">6.3.1. CSRF</a></li>
<li><a href="#_include_additional_fields_in_form_authentication">6.3.2. Include additional fields in Form Authentication</a></li>
</ul>
</li>
<li><a href="#_oauth">6.4. OAuth</a>
<ul class="sectlevel3">
<li><a href="#_oauth_1">6.4.1. OAuth 1</a></li>
<li><a href="#_oauth_2">6.4.2. OAuth 2</a></li>
</ul>
</li>
<li><a href="#_custom_authentication">6.5. Custom Authentication</a></li>
</ul>
</li>
<li><a href="#_multi_part_form_data">7. Multi-part form data</a></li>
<li><a href="#_object_mapping">8. Object Mapping</a>
<ul class="sectlevel2">
<li><a href="#_serialization">8.1. Serialization</a>
<ul class="sectlevel3">
<li><a href="#_content_type_based_serialization">8.1.1. Content-Type based Serialization</a></li>
<li><a href="#_create_json_from_a_hashmap">8.1.2. Create JSON from a HashMap</a></li>
<li><a href="#_using_an_explicit_serializer">8.1.3. Using an Explicit Serializer</a></li>
</ul>
</li>
<li><a href="#_deserialization">8.2. Deserialization</a>
<ul class="sectlevel3">
<li><a href="#_content_type_based_deserialization">8.2.1. Content-Type based Deserialization</a></li>
<li><a href="#_using_an_explicit_deserializer">8.2.2. Using an Explicit Deserializer</a></li>
</ul>
</li>
<li><a href="#_configuration">8.3. Configuration</a></li>
<li><a href="#_custom">8.4. Custom</a></li>
</ul>
</li>
<li><a href="#_parsers">9. Parsers</a>
<ul class="sectlevel2">
<li><a href="#_custom_2">9.1. Custom</a></li>
<li><a href="#_default">9.2. Default</a></li>
</ul>
</li>
<li><a href="#_default_values">10. Default values</a></li>
<li><a href="#_specification_re_use">11. Specification Re-use</a>
<ul class="sectlevel2">
<li><a href="#_querying_requestspecification">11.1. Querying RequestSpecification</a></li>
</ul>
</li>
<li><a href="#_filters">12. Filters</a></li>
<li><a href="#_logging">13. Logging</a>
<ul class="sectlevel2">
<li><a href="#_request_logging">13.1. Request Logging</a></li>
<li><a href="#_response_logging">13.2. Response Logging</a></li>
<li><a href="#_log_if_validation_fails">13.3. Log if validation fails</a></li>
<li><a href="#_blacklist_headers_from_logging">13.4. Blacklist Headers from Logging</a></li>
</ul>
</li>
<li><a href="#_root_path">14. Root path</a></li>
<li><a href="#_path_arguments">15. Path arguments</a></li>
<li><a href="#_session_support">16. Session support</a>
<ul class="sectlevel2">
<li><a href="#_session_filter">16.1. Session Filter</a></li>
</ul>
</li>
<li><a href="#_ssl">17. SSL</a>
<ul class="sectlevel2">
<li><a href="#_ssl_invalid_hostname">17.1. SSL invalid hostname</a></li>
</ul>
</li>
<li><a href="#_url_encoding">18. URL Encoding</a></li>
<li><a href="#_proxy_configuration">19. Proxy Configuration</a>
<ul class="sectlevel2">
<li><a href="#_static_proxy_configuration">19.1. Static Proxy Configuration</a></li>
<li><a href="#_request_specification_proxy_configuration">19.2. Request Specification Proxy Configuration</a></li>
</ul>
</li>
<li><a href="#_detailed_configuration">20. Detailed configuration</a>
<ul class="sectlevel2">
<li><a href="#_encoder_config">20.1. Encoder Config</a>
<ul class="sectlevel3">
<li><a href="#_avoid_adding_the_charset_to_content_type_header_automatically">20.1.1. Avoid adding the charset to content-type header automatically</a></li>
</ul>
</li>
<li><a href="#_decoder_config">20.2. Decoder Config</a></li>
<li><a href="#_session_config">20.3. Session Config</a></li>
<li><a href="#_redirect_dsl">20.4. Redirect DSL</a></li>
<li><a href="#_connection_config">20.5. Connection Config</a></li>
<li><a href="#_json_config">20.6. Json Config</a></li>
<li><a href="#_http_client_config">20.7. HTTP Client Config</a></li>
<li><a href="#_ssl_config">20.8. SSL Config</a></li>
<li><a href="#_param_config">20.9. Param Config</a></li>
<li><a href="#_failure_config">20.10. Failure Config</a></li>
</ul>
</li>
<li><a href="#_spring_support">21. Spring Support</a>
<ul class="sectlevel2">
<li><a href="#_spring_mock_mvc_module">21.1. Spring Mock Mvc Module</a>
<ul class="sectlevel3">
<li><a href="#_bootstrapping_restassuredmockmvc">21.1.1. Bootstrapping RestAssuredMockMvc</a></li>
<li><a href="#_asynchronous_requests">21.1.2. Asynchronous Requests</a></li>
<li><a href="#_adding_request_post_processors">21.1.3. Adding Request Post Processors</a></li>
<li><a href="#_adding_result_handlers">21.1.4. Adding Result Handlers</a></li>
<li><a href="#_using_result_matchers">21.1.5. Using Result Matchers</a></li>
<li><a href="#_interceptors">21.1.6. Interceptors</a></li>
<li><a href="#_spring_mock_mvc_specifications">21.1.7.  Spring Mock Mvc Specifications</a></li>
<li><a href="#_resetting_restassuredmockmvc">21.1.8. Resetting RestAssuredMockMvc</a></li>
</ul>
</li>
<li><a href="#_spring_mvc_authentication">21.2. Spring MVC Authentication</a>
<ul class="sectlevel3">
<li><a href="#_using_spring_security_test">21.2.1. Using Spring Security Test</a></li>
<li><a href="#_injecting_a_user">21.2.2. Injecting a User</a></li>
<li><a href="#_spring_web_test_client_module">21.2.3. Spring Web Test Client Module</a></li>
<li><a href="#_bootstrapping_restassuredwebtestclient">21.2.4. Bootstrapping RestAssuredWebTestClient</a></li>
<li><a href="#_spring_web_test_client_specifications">21.2.5. Spring Web Test Client Specifications</a></li>
<li><a href="#_resetting_restassuredwebtestclient">21.2.6. Resetting RestAssuredWebTestClient</a></li>
</ul>
</li>
<li><a href="#_common_spring_module_documentation">21.3. Common Spring Module Documentation</a>
<ul class="sectlevel3">
<li><a href="#_note_on_parameters">21.3.1. Note on parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_scala_support_module">22. Scala Support Module</a></li>
<li><a href="#_kotlin">23. Kotlin</a>
<ul class="sectlevel2">
<li><a href="#_avoid_escaping_when_keyword">23.1. Avoid Escaping "when" Keyword</a></li>
<li><a href="#_kotlin_extension_module">23.2. Kotlin Extension Module</a></li>
<li><a href="#_kotlin_extension_module_for_spring_mockmvc">23.3. Kotlin Extension Module for Spring MockMvc</a></li>
</ul>
</li>
<li><a href="#_more_info">24. More info</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST Assured は、REST ベースのサービスに対するテストを簡単に記述できる、HTTP Builder で構築された Java 専用の DSL です。<br>
さまざまな HTTP メソッド（POST、GET、PUT、DELETE、OPTIONS、PATCH、HEAD）のリクエストに対するレスポンスを確認、検証できます。</p>
</div>
<div class="sect2">
<h3 id="_static_imoprt">1.1. static imoprt</h3>
<div class="paragraph">
<p>REST Assured を効率的に使うには、次のような import 文を記述するといいでしょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">io.restassured.RestAssured</span>.*;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.restassured.matcher.RestAssuredMatchers</span>.*;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers</span>.*;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="http://json-schema.org/">Json Schema</a> のバリデーション機能を使うには、次のような import 文も追加するといいでしょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">io.restassured.module.jsv.JsonSchemaValidator</span>.*;</code></pre>
</div>
</div>
<div class="paragraph">
<p>詳しくは <a href="#json-schema-validation">Json Schema Validation</a> のセクションを参照してください。</p>
</div>
<div class="paragraph">
<p>あなたのアプリケーションが Spring MVC を使っているなら、<a href="#spring-mock-mvc-module">Spring Mock MVC</a> モジュールを使えば、コントローラークラスのユニットテストを REST Assured の DSL で記述できます。<br>
その場合、<code>io.restassured.RestAssured</code> の代わりに <a href="http://static.javadoc.io/io.rest-assured/spring-mock-mvc/latest/io/restassured/module/mockmvc/RestAssuredMockMvc.html">RestAssuredMockMvc</a> を import 文に記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">io.restassured.module.mockmvc.RestAssuredMockMvc</span>.*;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples">2. Examples</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_example_1_json">2.1. Example 1 - JSON</h3>
<div class="paragraph">
<p><code>http:/localhost:8080/lotto</code> に対する GET リクエストが次のような JSON を返すことにします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">lotto</span><span class="delimiter">&quot;</span></span>:{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">lottoId</span><span class="delimiter">&quot;</span></span>:<span class="integer">5</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">winning-numbers</span><span class="delimiter">&quot;</span></span>:[<span class="integer">2</span>,<span class="integer">45</span>,<span class="integer">34</span>,<span class="integer">23</span>,<span class="integer">7</span>,<span class="integer">5</span>,<span class="integer">3</span>],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">winners</span><span class="delimiter">&quot;</span></span>:[
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">winnerId</span><span class="delimiter">&quot;</span></span>:<span class="integer">23</span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">numbers</span><span class="delimiter">&quot;</span></span>:[<span class="integer">2</span>,<span class="integer">45</span>,<span class="integer">34</span>,<span class="integer">23</span>,<span class="integer">3</span>,<span class="integer">5</span>]
      },
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">winnerId</span><span class="delimiter">&quot;</span></span>:<span class="integer">54</span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">numbers</span><span class="delimiter">&quot;</span></span>:[<span class="integer">52</span>,<span class="integer">3</span>,<span class="integer">12</span>,<span class="integer">11</span>,<span class="integer">18</span>,<span class="integer">22</span>]
      }
    ]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>REST Assured で、GET リクエストに対するレスポンスの <code>lottoId</code> が <code>5</code> になることを検証するときは次のように記述します。とても簡単です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">lotto.lottoId</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">5</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>winnerId</code> に <code>23</code> と <code>24</code> が入っていることを確認するときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">lotto.winners.winnerId</span><span class="delimiter">&quot;</span></span>, hasItems(<span class="integer">23</span>, <span class="integer">54</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>注意：<code>equalTo</code> と <code>hasItems</code> は Hamcrest ライブラリのマッチャーメソッドなので、<code>org.hamcrest.Matchers</code> の import 文を追加する必要があります。</p>
</div>
<div class="paragraph">
<p>JSONPath の記法として、 <a href="https://github.com/jayway/JsonPath">Jayway の JsonPath</a> ではなく、 <a href="http://groovy-lang.org/processing-xml.html#_gpath">Groovy の GPath</a> を使っているので、間違えないようにしてください。</p>
</div>
<div class="sect3">
<h4 id="_returning_floats_and_doubles_as_bigdecimal">2.1.1. Returning floats and doubles as BigDecimal</h4>
<div class="paragraph">
<p>REST Assured では、設定により JSONPath で指定した json number の値を <code>float</code> や <code>double</code> ではなく <code>BigDecimal</code> として処理できます。<br>
次のような JSON ドキュメントがあることにしましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">{

    <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="float">12.12</span>

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>初期設定では、<code>price</code> の値は <code>float</code> の <code>12.12</code> と比較できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/price</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>, is(<span class="float">12.12f</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>JsonConfig</code> オブジェクトを次のように設定すれば、全ての json number の値を <code>BigDecimal</code> で比較できるようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .config(
            RestAssured.config().jsonConfig(
                jsonConfig().numberReturnType(BIG_DECIMAL)))
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/price</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>, is(<span class="keyword">new</span> <span class="predefined-type">BigDecimal</span>(<span class="float">12.12</span>));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_json_schema_validation">2.1.2. JSON Schema validation</h4>
<div class="paragraph">
<p>REST Assured はバージョン <code>2.1.0</code> から <a href="http://json-schema.org/">Json Schema</a> のバリデーションに対応しました。<br>
例えば、次のようなスキーマを記述した <code>products-schema.json</code> がクラスパスにあることにしましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">$schema</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://json-schema.org/draft-04/schema#</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Product set</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">array</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Product</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The unique identifier for a product</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>
            },
            <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>
            },
            <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">minimum</span><span class="delimiter">&quot;</span></span>: <span class="integer">0</span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">exclusiveMinimum</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">true</span>
            },
            <span class="key"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">array</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>: {
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>
                },
                <span class="key"><span class="delimiter">&quot;</span><span class="content">minItems</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">uniqueItems</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">true</span>
            },
            <span class="key"><span class="delimiter">&quot;</span><span class="content">dimensions</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">length</span><span class="delimiter">&quot;</span></span>: {<span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>},
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">width</span><span class="delimiter">&quot;</span></span>: {<span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>},
                    <span class="key"><span class="delimiter">&quot;</span><span class="content">height</span><span class="delimiter">&quot;</span></span>: {<span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>}
                },
                <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">length</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">width</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">height</span><span class="delimiter">&quot;</span></span>]
            },
            <span class="key"><span class="delimiter">&quot;</span><span class="content">warehouseLocation</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Coordinates of the warehouse with the product</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">$ref</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://json-schema.org/geo</span><span class="delimiter">&quot;</span></span>
            }
        },
        <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>]
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>次のように記述すると、JSON スキーマで、リソース <code>/products</code> から取得した JSON ドキュメントを検証できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/products</span><span class="delimiter">&quot;</span></span>)
    .then()
        .assertThat()
        .body(matchesJsonSchemaInClasspath(<span class="string"><span class="delimiter">&quot;</span><span class="content">products-schema.json</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>matchesJsonSchemaInClasspath</code> は <code>io.restassured.module.jsv.JsonSchemaValidator</code> のクラスメソッドです。<br>
全てのクラスメソッドを static import しておくことをお勧めします。<br>
この機能を使用するには、 <code>json-schema-validator</code> モジュールを Maven の依存ライブラリへ追加しなければなりません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>io.rest-assured<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>json-schema-validator<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>4.4.0<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_json_schema_validation_settings">2.1.3. JSON Schema Validation Settings</h4>
<div class="paragraph">
<p>REST Assured の <code>json-schema-validator</code> モジュールは、Francis Galiegue の <a href="https://github.com/fge/json-schema-validator">json-schema-validator</a> ライブラリ（以降は <code>fge</code> と呼びます）を使用してバリデーションを行います。<br>
<code>fge</code> ライブラリの設定を変更するときは次のように記述してください。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    <span class="comment">// Given</span>
    JsonSchemaFactory jsonSchemaFactory = JsonSchemaFactory.newBuilder()
        .setValidationConfiguration(
            ValidationConfiguration.newBuilder()
                .setDefaultVersion(DRAFTV4).freeze())
        .freeze();

    <span class="comment">// When</span>
    get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/products</span><span class="delimiter">&quot;</span></span>)
    .then()
        .assertThat()
        .body(matchesJsonSchemaInClasspath(<span class="string"><span class="delimiter">&quot;</span><span class="content">products-schema.json</span><span class="delimiter">&quot;</span></span>)
            .using(jsonSchemaFactory));</code></pre>
</div>
</div>
<div class="paragraph">
<p>バリデーションに使用する <code>jsonSchemaFactory</code> のインスタンスは <code>using</code> メソッドで指定できます。<br>
バリデーションの内容をより細かく調整したいときに使用してください。</p>
</div>
<div class="paragraph">
<p><code>fge</code> ライブラリは <code>checked</code> と <code>unchecked</code> の2種類のバリデーションを使用できます。<br>
初期設定では <code>checked</code> バリデーションを使用しますが、<code>unchecked</code> バリデーションを使用したいときは <a href="http://static.javadoc.io/io.rest-assured/json-schema-validator/latest/io/restassured/module/jsv/JsonSchemaValidatorSettings.html">JsonSchemaValidatorSettings</a> のインスタンスを構成してください。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/products</span><span class="delimiter">&quot;</span></span>)
    .then()
        .assertThat()
        .body(matchesJsonSchemaInClasspath(<span class="string"><span class="delimiter">&quot;</span><span class="content">products-schema.json</span><span class="delimiter">&quot;</span></span>)
            .using(settings().with().checkedValidation(<span class="predefined-constant">false</span>)));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>settings</code> は <code>JsonSchemaValidatorSettings</code> のクラスメソッドです。</p>
</div>
</div>
<div class="sect3">
<h4 id="_json_schema_validation_with_static_configuration">2.1.4. Json Schema Validation with static configuration</h4>
<div class="paragraph">
<p>常に <code>unchecked</code> バリデーションを使用すると同時に、JSON スキーマのバージョン 3 を使用するようにしたい場合は、毎回設定する代わりに、クラスメンバ変数で設定できるようになっています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    JsonSchemaValidator.settings = settings().with().jsonSchemaFactory(
        JsonSchemaFactory.newBuilder().setValidationConfiguration(
            ValidationConfiguration.newBuilder()
                .setDefaultVersion(DRAFTV3).freeze())
        .freeze())
    .and()
    .with()
        .checkedValidation(<span class="predefined-constant">false</span>);

    get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/products</span><span class="delimiter">&quot;</span></span>)
    .then()
        .assertThat()
        .body(matchesJsonSchemaInClasspath(<span class="string"><span class="delimiter">&quot;</span><span class="content">products-schema.json</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="http://static.javadoc.io/io.rest-assured/json-schema-validator/latest/io/restassured/module/jsv/JsonSchemaValidator.html">JsonSchemaValidator</a> のクラスメンバ変数 <code>settings</code> を変更すると、<code>JsonSchemaValidator</code> からインポートした全ての <code>matcher</code> メソッドが <code>DRAFTV3</code> バージョンと <code>unchecked</code> バリデーションを使うようになります。</p>
</div>
<div class="paragraph">
<p><code>JsonSchemaValidator</code> を初期設定へ戻すには <code>rest</code> メソッドを呼び出します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    JsonSchemaValidator.reset();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_json_schema_validation_without_rest_assured">2.1.5. Json Schema Validation without REST Assured</h4>
<div class="paragraph">
<p><code>json-schema-validator</code> モジュールは単独で使用することもできます。<br>
JSON ドキュメントが <code>String</code> になっているなら次のように記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.junit.Test</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.restassured.module.jsv.JsonSchemaValidator.matchesJsonSchemaInClasspath</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.MatcherAssert.assertThat</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">JsonSchemaValidatorWithoutRestAssuredTest</span> {


    <span class="annotation">@Test</span> <span class="directive">public</span> <span class="type">void</span>
    validates_schema_in_classpath() {
        <span class="comment">// Given</span>
        <span class="predefined-type">String</span> json = ... <span class="comment">// Greeting response</span>

        <span class="comment">// Then</span>
        assertThat(json, matchesJsonSchemaInClasspath(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting-schema.json</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>詳しくは <a href="GettingStarted">REST Assured 入門</a> を参照してください。</p>
</div>
</div>
<div class="sect3">
<h4 id="_anonymous_json_root_validation">2.1.6. Anonymous JSON root validation</h4>
<div class="paragraph">
<p>JSON ドキュメントの中には名前付きのルート属性がない場合もあります。<br>
例えば、次のコードは正しい JSON ドキュメントです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">[<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>JSONPath に <code>$</code> あるいは空文字列を指定すると、匿名のルート要素を確認できます。<br>
例えば <code>http:/localhost:8080/json</code> が前のような JSON ドキュメントを返すとしたら、次のように検証できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/json</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">$</span><span class="delimiter">&quot;</span></span>, hasItems(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>));
        <span class="comment">// An empty string &quot;&quot; would work as well</span>
        <span class="comment">// .body(&quot;&quot;, hasItems(1, 2, 3));</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_2_xml">2.2. Example 2 - XML</h3>
<div class="paragraph">
<p>XML ドキュメントも同じように確認できます。<br>
<code>http://localhost:8080/greetXML</code> に対する POST リクエストが次のようなレスポンスを返すことにしましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;greeting&gt;</span>
   <span class="tag">&lt;firstName&gt;</span>{params(&quot;firstName&quot;)}<span class="tag">&lt;/firstName&gt;</span>
   <span class="tag">&lt;lastName&gt;</span>{params(&quot;lastName&quot;)}<span class="tag">&lt;/lastName&gt;</span>
<span class="tag">&lt;/greeting&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>注意：このURLで公開しているのは、リクエストパラメータで送信した <code>firstName</code> と <code>lastName</code> をそのまま送り返すサービスだと考えてください。</p>
</div>
<div class="paragraph">
<p>リクエストパラメータで送信した <code>firstName</code> に対応するレスポンスは次のように検証できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .parameters(<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>)
    .when()
        .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greetXML</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.firstName</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>firstName</code> と <code>lastName</code> を両方とも検証するときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .parameters(<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>)
    .when()
        .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greetXML</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.firstName</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>))
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.lastName</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>省略記法も使用できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    with()
        .parameters(<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>)
    .when()
        .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greetXML</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.firstName</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>),
            <span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.lastName</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>フィールドを指定する記法について詳しくは <a href="http://groovy-lang.org/processing-xml.html#_gpath">Groovy の GPath</a> を参照してください。</p>
</div>
<div class="sect3">
<h4 id="_xml_namespaces">2.2.1. XML namespaces</h4>
<div class="paragraph">
<p>レスポンス本文の期待値に名前空間を指定するときは、 <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/XmlConfig.html">io.restassured.config.XmlConfig</a> で名前空間を宣言しなければなりません。<br>
具体例として、<code>http://localhost:8080</code> で提供しているリソース <code>namespace-example</code> が次のような XML ドキュメントを返すことにします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;foo</span> <span class="attribute-name">xmlns:ns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;bar&gt;</span>sudo <span class="tag">&lt;/bar&gt;</span>
  <span class="tag">&lt;ns:bar&gt;</span>make me a sandwich!<span class="tag">&lt;/ns:bar&gt;</span>
<span class="tag">&lt;/foo&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>URI <code>http://localhost/</code> を名前空間として宣言し、XML ドキュメントを検証するには、次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .config(
            RestAssured.config().xmlConfig(
                xmlConfig()
                    .declareNamespace(<span class="string"><span class="delimiter">&quot;</span><span class="content">test</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost/</span><span class="delimiter">&quot;</span></span>)))
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/namespace-example</span><span class="delimiter">&quot;</span></span>)
     .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo.bar.text()</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">sudo make me a sandwich!</span><span class="delimiter">&quot;</span></span>))
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">:foo.:bar.text()</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">sudo </span><span class="delimiter">&quot;</span></span>))
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo.test:bar.text()</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">make me a sandwich!</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>この例で使用しているパス記法は、Groovy の XmlSlurper 記法です（<code>2.6.0</code> より前のバージョンでは XmlSlurper 記法を使えません）。<br>
<code>2.6.0</code> より前のバージョンで使用できる記法を知りたければ <a href="https://github.com/rest-assured/rest-assured/wiki/ReleaseNotes26#non-backward-compatible-changes">リリースノートの後方互換性に関する記述</a> を参照してください。</p>
</div>
</div>
<div class="sect3">
<h4 id="_xpath">2.2.2. XPath</h4>
<div class="paragraph">
<p>XML ドキュメントは XPath で確認することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .parameters(<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>)
    .when()
        .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greetXML</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(hasXPath(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greeting/firstName</span><span class="delimiter">&quot;</span></span>, containsString(<span class="string"><span class="delimiter">&quot;</span><span class="content">Jo</span><span class="delimiter">&quot;</span></span>)));</code></pre>
</div>
</div>
<div class="paragraph">
<p>別の書き方も出来ます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .parameters(<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>)
    .when()
        .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greetXML</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(hasXPath(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greeting/firstName[text()='John']</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>XPath で名前空間を使用するときは、<code>XmlConfig</code> で有効化しなければなりません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .config(
            RestAssured.config().xmlConfig(
                xmlConfig()
                    .with()
                    .namespaceAware(<span class="predefined-constant">true</span>)))
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/package-db-xml</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(hasXPath(<span class="string"><span class="delimiter">&quot;</span><span class="content">/db:package-database</span><span class="delimiter">&quot;</span></span>, namespaceContext));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>namespaceContext</code> は <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/namespace/NamespaceContext.html">javax.xml.namespace.NamespaceContext</a> のインスタンスです。</p>
</div>
</div>
<div class="sect3">
<h4 id="_schema_and_dtd_validation">2.2.3. Schema and DTD validation</h4>
<div class="paragraph">
<p>XML ドキュメントの検証に XML スキーマ（XSD）や DTD を使うこともできます。</p>
</div>
<div class="sect4">
<h5 id="_xsd_example">XSD example</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/carRecords</span><span class="delimiter">&quot;</span></span>)
    .then()
        .assertThat()
        .body(matchesXsd(xsd));</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_dtd_example">DTD example</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/videos</span><span class="delimiter">&quot;</span></span>)
    .then()
        .assertThat()
        .body(matchesDtd(dtd));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>matchesXsd</code> や <code>matchesDtd</code> は <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/matcher/RestAssuredMatchers.html">io.restassured.matcher.RestAssuredMatchers</a> のクラスメソッドで、Hamcrest マッチャーです。</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_3_complex_parsing_and_validation">2.3. Example 3 - Complex parsing and validation</h3>
<div class="paragraph">
<p>REST Assured が特に際立つ使い方を説明しましょう。<br>
REST Assured は Groovy で実装しているので、Groovy のコレクション API の素晴らしいところがそのまま利点になっています。<br>
Groovy の例を見てみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> words = [<span class="string"><span class="delimiter">'</span><span class="content">ant</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">buffalo</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">cat</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">dinosaur</span><span class="delimiter">'</span></span>]
<span class="keyword">def</span> wordsWithSizeGreaterThanFour = words.findAll { <span class="local-variable">it</span>.length() &gt; <span class="integer">4</span> }</code></pre>
</div>
</div>
<div class="paragraph">
<p>1行目は単語（文字列）のリストを定義しているだけですが、2行目はちょっと面白いことをしています。<br>
単語のリストから4文字以上の単語を探索するため、<code>findAll</code> メソッドに4文字以上が真になる式をクロージャで渡しているのです。<br>
クロージャの内部では暗黙的な変数 <code>it</code> がリストの要素になります。<br>
新しいリスト <code>wordsWithSizeGreaterThanFour</code> には <code>buffalo</code> と <code>dinosaur</code> が含まれることになります。</p>
</div>
<div class="paragraph">
<p>Groovy のコレクションには、他にもいろんなメソッドがあります。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>find</code>&#8201;&#8212;&#8201;クロージャの式が真になる最初の要素を探索します</p>
</li>
<li>
<p><code>collect</code>&#8201;&#8212;&#8201;それぞれの要素についてクロージャを評価した結果を返します</p>
</li>
<li>
<p><code>sum</code>&#8201;&#8212;&#8201;コレクションの全ての要素を加算します</p>
</li>
<li>
<p><code>max</code>/<code>min</code>&#8201;&#8212;&#8201;コレクションの全ての要素について最大あるいは最小の要素を返します</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>JSON ドキュメントや XML ドキュメントをバリデーションするのに、これらの API がどのように使われているのか説明しましょう。</p>
</div>
<div class="sect3">
<h4 id="_xml_example">2.3.1. XML Example</h4>
<div class="paragraph">
<p><code>http://localhost:8080/shopping</code> が次のような XML ドキュメントを返すことにします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;shopping&gt;</span>
      <span class="tag">&lt;category</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">groceries</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;item&gt;</span>Chocolate<span class="tag">&lt;/item&gt;</span>
        <span class="tag">&lt;item&gt;</span>Coffee<span class="tag">&lt;/item&gt;</span>
      <span class="tag">&lt;/category&gt;</span>
      <span class="tag">&lt;category</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">supplies</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;item&gt;</span>Paper<span class="tag">&lt;/item&gt;</span>
        <span class="tag">&lt;item</span> <span class="attribute-name">quantity</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">4</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Pens<span class="tag">&lt;/item&gt;</span>
      <span class="tag">&lt;/category&gt;</span>
      <span class="tag">&lt;category</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">present</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;item</span> <span class="attribute-name">when</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Aug 10</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Kathryn's Birthday<span class="tag">&lt;/item&gt;</span>
      <span class="tag">&lt;/category&gt;</span>
<span class="tag">&lt;/shopping&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>このような XML ドキュメントについて、種類（type）が食料品（groceries）、内容（items）にチョコレート（Chocolate）とコーヒー（Coffee）を含むカテゴリー（category）があることを確かめるには、次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/shopping</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">shopping.category.find { it.@type == 'groceries' }.item</span><span class="delimiter">&quot;</span></span>, hasItems(<span class="string"><span class="delimiter">&quot;</span><span class="content">Chocolate</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Coffee</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>詳しく見ていきましょう。<br>
XPath に指定した <code>shopping.category</code> はカテゴリーのリストを返します。<br>
そして、カテゴリーのリストに対する <code>find</code> は <code>type</code> 属性が <code>groceries</code> に一致する最初のカテゴリーを返します。<br>
それから、発見したカテゴリーに関連付けられた全ての <code>item</code> を返します。<br>
最終的に1つ以上の <code>item</code> からなるリストを <code>hasItems</code> マッチャーで検証します。</p>
</div>
<div class="paragraph">
<p><code>item</code> を取得するだけで、検証したいわけではないとしたらどうすればいいでしょうか。<br>
そういうときは <a href="http://static.javadoc.io/io.rest-assured/xml-path/latest/io/restassured/path/xml/XmlPath.html">XmlPath</a> を使用します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Get the response body as a String</span>
<span class="predefined-type">String</span> response = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/shopping</span><span class="delimiter">&quot;</span></span>).asString();
<span class="comment">// And get the groceries from the response. &quot;from&quot; is statically imported from the XmlPath class</span>
<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; groceries = from(response).getList(<span class="string"><span class="delimiter">&quot;</span><span class="content">shopping.category.find { it.@type == 'groceries' }.item</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>レスポンス本文について、食料品（groceries）のリストだけを処理したい場合は <a href="#single-path">ショートカット</a> することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Get the response body as a String</span>
<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; groceries = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/shopping</span><span class="delimiter">&quot;</span></span>).path(<span class="string"><span class="delimiter">&quot;</span><span class="content">shopping.category.find { it.@type == 'groceries' }.item</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_depth_first_search">Depth-first search</h5>
<div class="paragraph">
<p>前に説明した内容は次のような省略記法でも実現できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/shopping</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">**.find { it.@type == 'groceries' }</span><span class="delimiter">&quot;</span></span>, hasItems(<span class="string"><span class="delimiter">&quot;</span><span class="content">Chocolate</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Coffee</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>*\*</code> は XML ドキュメントについて深さ優先探索をする省略記法です。<br>
<code>type</code> 属性が <code>groceries</code> に一致する最初のノードを検索できます。<br>
XPath に <code>item</code> を書いてないことに注目してください。<br>
それぞれのカテゴリーノードについて <code>item</code> のリストを返すとき、自動的に <code>toString()</code> メソッドが呼び出されるからです。</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_json_example">2.3.2. JSON Example</h4>
<div class="paragraph">
<p><code>http://localhost:8080/store</code> が次のような JSON ドキュメントを返すことにします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">{
   <span class="key"><span class="delimiter">&quot;</span><span class="content">store</span><span class="delimiter">&quot;</span></span>:{
      <span class="key"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>:[
         {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Nigel Rees</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">category</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">reference</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>:<span class="float">8.95</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Sayings of the Century</span><span class="delimiter">&quot;</span></span>
         },
         {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Evelyn Waugh</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">category</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">fiction</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>:<span class="float">12.99</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Sword of Honour</span><span class="delimiter">&quot;</span></span>
         },
         {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Herman Melville</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">category</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">fiction</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">isbn</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">0-553-21311-3</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>:<span class="float">8.99</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Moby Dick</span><span class="delimiter">&quot;</span></span>
         },
         {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">J. R. R. Tolkien</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">category</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">fiction</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">isbn</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">0-395-19395-8</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>:<span class="float">22.99</span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">The Lord of the Rings</span><span class="delimiter">&quot;</span></span>
         }
      ]
   }
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_example_1">Example 1</h5>
<div class="paragraph">
<p>1つ目の例は、<code>/store</code> にリクエストを送信し、レスポンスについて価格（price）が10未満の本（book）の書名（title）が "Sayings of the Century" と "Moby Dick" であることを検証する場合です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/store</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">store.book.findAll { it.price &lt; 10 }.title</span><span class="delimiter">&quot;</span></span>, hasItems(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sayings of the Century</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Moby Dick</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>XML ドキュメントと同様に、価格が10未満なら真になる式を評価するクロージャで、全ての本を探索します。<br>
そして <code>hasItems</code> マッチャーで期待値と比較します。<br>
<a href="http://static.javadoc.io/io.rest-assured/json-path/latest/io/restassured/path/json/JsonPath.html">JsonPath</a> を使うと <code>title</code> のリストを取得できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Get the response body as a String</span>
<span class="predefined-type">String</span> response = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/store</span><span class="delimiter">&quot;</span></span>).asString();
<span class="comment">// And get all books with price &lt; 10 from the response. &quot;from&quot; is statically imported from the JsonPath class</span>
<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; bookTitles = from(response).getList(<span class="string"><span class="delimiter">&quot;</span><span class="content">store.book.findAll { it.price &lt; 10 }.title</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_2">Example 2</h5>
<div class="paragraph">
<p>2つ目の例として、著者名の文字列長の合計が50を越えるかどうかを検証してみましょう。<br>
 少し複雑な目的のため、Groovy のコレクションとクロージャの組み合わせの強力さを説明するちょうどいい例になっているでしょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">     when()
         .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/store</span><span class="delimiter">&quot;</span></span>)
     .then()
         .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">store.book.author.collect { it.length() }.sum()</span><span class="delimiter">&quot;</span></span>, greaterThan(<span class="integer">50</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>store.book.author</code> は全ての著者名のリストになります。<br>
そして著者名のリストに <code>collect</code> メソッドでクロージャ <code>{ it.length() }</code> を適用し、著者名の文字列長のリストを取得します。<br>
それから文字列長のリストに <code>sum()</code> メソッドを呼び出して、文字列長の合計を計算します。<br>
最後に <code>greaterThan</code> マッチャーで文字列長の合計が <code>53</code> を越えるか検証します。<br>
実はこの記述も省略できます。<br>
"<a href="#example-3---complex-parsing-and-validation">word</a>" の例で説明します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> words = [<span class="string"><span class="delimiter">'</span><span class="content">ant</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">buffalo</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">cat</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">dinosaur</span><span class="delimiter">'</span></span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Groovy では展開演算子（spread operator） <code>\*</code> でリストのそれぞれの要素に関数を呼び出すことができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> words = [<span class="string"><span class="delimiter">'</span><span class="content">ant</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">buffalo</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">cat</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">dinosaur</span><span class="delimiter">'</span></span>]
<span class="keyword">assert</span> [<span class="integer">3</span>, <span class="integer">6</span>, <span class="integer">3</span>, <span class="integer">8</span>] == words*.length()</code></pre>
</div>
</div>
<div class="paragraph">
<p>展開演算子を使うと、前のコード例は次のように記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/store</span><span class="delimiter">&quot;</span></span>)
    .then()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">store.book.author*.length().sum()</span><span class="delimiter">&quot;</span></span>, greaterThan(<span class="integer">50</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>もちろん、 <a href="http://static.javadoc.io/io.rest-assured/json-path/latest/io/restassured/path/json/JsonPath.html">JsonPath</a> で値を取得することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Get the response body as a string</span>
<span class="predefined-type">String</span> response = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/store</span><span class="delimiter">&quot;</span></span>).asString();
<span class="comment">// Get the sum of all author length's as an int. &quot;from&quot; is again statically imported from the JsonPath class</span>
<span class="type">int</span> sumOfAllAuthorLengths = from(response).getInt(<span class="string"><span class="delimiter">&quot;</span><span class="content">store.book.author*.length().sum()</span><span class="delimiter">&quot;</span></span>);
<span class="comment">// We can also assert that the sum is equal to 53 as expected.</span>
assertThat(sumOfAllAuthorLengths, is(<span class="integer">53</span>));</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deserialization_with_generics">2.4. Deserialization with Generics</h3>
<div class="paragraph">
<p>REST Assured <code>3.3.0</code> では <code>io.restassured.mapper.TypeRef</code> クラスを導入しました。<br>
これは、レスポンスを総称型のコンテナへ分解するために使用します。<br>
例えば、<code>/products</code> に対する GET リクエストが次のような JSON ドキュメントを返すことにしましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
          {
              <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="integer">2</span>,
              <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">An ice sculpture</span><span class="delimiter">&quot;</span></span>,
              <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="float">12.50</span>,
              <span class="key"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">cold</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">ice</span><span class="delimiter">&quot;</span></span>],
              <span class="key"><span class="delimiter">&quot;</span><span class="content">dimensions</span><span class="delimiter">&quot;</span></span>: {
                  <span class="key"><span class="delimiter">&quot;</span><span class="content">length</span><span class="delimiter">&quot;</span></span>: <span class="float">7.0</span>,
                  <span class="key"><span class="delimiter">&quot;</span><span class="content">width</span><span class="delimiter">&quot;</span></span>: <span class="float">12.0</span>,
                  <span class="key"><span class="delimiter">&quot;</span><span class="content">height</span><span class="delimiter">&quot;</span></span>: <span class="float">9.5</span>
              },
              <span class="key"><span class="delimiter">&quot;</span><span class="content">warehouseLocation</span><span class="delimiter">&quot;</span></span>: {
                  <span class="key"><span class="delimiter">&quot;</span><span class="content">latitude</span><span class="delimiter">&quot;</span></span>: <span class="float">-78.75</span>,
                  <span class="key"><span class="delimiter">&quot;</span><span class="content">longitude</span><span class="delimiter">&quot;</span></span>: <span class="float">20.4</span>
              }
          },
          {
              <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="integer">3</span>,
              <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">A blue mouse</span><span class="delimiter">&quot;</span></span>,
              <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="float">25.50</span>,
                  <span class="key"><span class="delimiter">&quot;</span><span class="content">dimensions</span><span class="delimiter">&quot;</span></span>: {
                  <span class="key"><span class="delimiter">&quot;</span><span class="content">length</span><span class="delimiter">&quot;</span></span>: <span class="float">3.1</span>,
                  <span class="key"><span class="delimiter">&quot;</span><span class="content">width</span><span class="delimiter">&quot;</span></span>: <span class="float">1.0</span>,
                  <span class="key"><span class="delimiter">&quot;</span><span class="content">height</span><span class="delimiter">&quot;</span></span>: <span class="float">1.0</span>
              },
              <span class="key"><span class="delimiter">&quot;</span><span class="content">warehouseLocation</span><span class="delimiter">&quot;</span></span>: {
                  <span class="key"><span class="delimiter">&quot;</span><span class="content">latitude</span><span class="delimiter">&quot;</span></span>: <span class="float">54.4</span>,
                  <span class="key"><span class="delimiter">&quot;</span><span class="content">longitude</span><span class="delimiter">&quot;</span></span>: <span class="float">-32.7</span>
              }
          }
      ]</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>TypeRef</code> を使うと、このドキュメントのルート要素を <code>List&lt;Map&lt;String, Object&gt;&gt;</code> へ変換できます（これ以外にも任意の総称型コンテナへ変換できます）。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Extract</span>
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;&gt; products = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/products</span><span class="delimiter">&quot;</span></span>).as(<span class="keyword">new</span> TypeRef&lt;<span class="predefined-type">List</span>&lt;<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;&gt;&gt;() {});

<span class="comment">// Now you can do validations on the extracted objects:</span>
assertThat(products, hasSize(<span class="integer">2</span>));
assertThat(products.get(<span class="integer">0</span>).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>), equalTo(<span class="integer">2</span>));
assertThat(products.get(<span class="integer">0</span>).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>), equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">An ice sculpture</span><span class="delimiter">&quot;</span></span>));
assertThat(products.get(<span class="integer">0</span>).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>), equalTo(<span class="float">12.5</span>));
assertThat(products.get(<span class="integer">1</span>).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>), equalTo(<span class="integer">3</span>));
assertThat(products.get(<span class="integer">1</span>).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>), equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">A blue mouse</span><span class="delimiter">&quot;</span></span>));
assertThat(products.get(<span class="integer">1</span>).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>), equalTo(<span class="float">25.5</span>));<span class="error">`</span><span class="error">`</span><span class="error">`</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>この機能は今のところ JSON ドキュメントにしか使用できないので注意してください。</p>
</div>
</div>
<div class="sect2">
<h3 id="_additional_examples">2.5. Additional Examples</h3>
<div class="paragraph">
<p>Micha Kops がhttp://www.hascode.com/2011/10/testing-restful-web-services-made-easy-using-the-rest-assured-framework/[さまざまな具体例を説明するよいブログ記事]を書いています。</p>
</div>
<div class="paragraph">
<p>また、 <a href="https://www.linkedin.com/in/basdijkstra">Bas Dijkstra</a> は自身の主催している <a href="http://www.ontestautomation.com/open-sourcing-my-workshop-an-experiment/">REST Assured の活用ワークショップ</a>をオープンソースとして <a href="https://github.com/basdijkstra/workshops/">GitHub リポジトリ</a>で惜しみなく公開してくれているので、誰でも試すことができるし、誰でも貢献できるようになっています。</p>
</div>
<div class="paragraph">
<p>Bas Dijkstra は、他にも <a href="https://testautomationu.applitools.com/automating-your-api-tests-with-rest-assured/">REST Assured を紹介する素敵なスクリーンキャスト</a>を公開しています。</p>
</div>
</div>
<div class="sect2">
<h3 id="_note_on_floats_and_doubles">2.6. Note on floats and doubles</h3>
<div class="paragraph">
<p>浮動小数点数は Java の基本型の <code>float</code> と比較しなければなりません。<br>
例えば、次のような JSON オブジェクトがあることにしましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">{

    <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="float">12.12</span>

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>the following test will fail, because we compare with a "double" instead of a "float":<br>
次のテストは、<code>float</code> じゃなくて <code>double</code> で比較しているため失敗してします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/price</span><span class="delimiter">&quot;</span></span>).then().assertThat().body(<span class="string"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="float">12.12</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>float</code> と比較すれば成功します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/price</span><span class="delimiter">&quot;</span></span>).then().assertThat().body(<span class="string"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="float">12.12f</span>));</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_note_on_syntax">2.7. Note on syntax</h3>
<div class="paragraph">
<p>REST Assured のブログ記事に登場するコード例では <code>given/expect/when</code> という記法がたくさん使われています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>)
    .expect()
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">lotto.lottoId</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">5</span>))
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>これは「レガシー記法」と呼ばれるもので、REST Assured 1.x でテストを記述するための、事実上の標準になっている記法でした。<br>
最新バージョンでも正常に動作するので、何が正しいかを巡って多くのユーザーを混乱させています。</p>
</div>
<div class="paragraph">
<p>最初に <code>given/when/then</code> 記法を使わなかったのは純粋に技術的な問題があったからです。<br>
REST Assured 2.0 が出るまで <code>given/when/then</code> 記法に対応しなかったのは、BDD スタイルのテストとして標準的な方法とは言えない状況だったからです。<br>
その頃は <code>given/expect/when</code> 記法がそれなりに存在感を示していたのですが、しばらくすると <code>given/when/then</code> 記法の分かりやすさが認知され始め、大半の場合に使われる記法になっていきました。</p>
</div>
<div class="paragraph">
<p><code>given/expect/when</code> 記法には <code>given/when/then</code> 記法にない良いところがあります。<br>
それは、期待値に対する全てのエラーを同時に表示できるところです（最後に期待値を書く記法だとできない）。</p>
</div>
<div class="paragraph">
<p>例えば、前のコード例にステータスコードの期待値を追加したら次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>)
    .expect()
        .statusCode(<span class="integer">400</span>)
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">lotto.lottoId</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">6</span>))
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合、REST Assured はステータスコードとレスポンス本文それぞれの期待値との不一致を報告します。<br>
これを <code>given/when/then</code> 記法で書いてみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>)
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>)
    .then()
        .statusCode(<span class="integer">400</span>)
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">lotto.lottoId</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">6</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合、REST Assured はステータスコードの期待値との不一致だけを報告します。<br>
2つ目の期待値を確認するには、もう1度テストを実行しなければならないのです。</p>
</div>
<div class="sect3">
<h4 id="_syntactic_sugar">2.7.1. Syntactic Sugar</h4>
<div class="paragraph">
<p>REST Assured を使う上で、いろいろ用意されている糖衣構文のことを説明しておくべきでしょう。<br>
例えば、複数の要素を1行で記述するとき、<code>and</code> メソッドがあると可読性が高まります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().param(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>).and().header(<span class="string"><span class="delimiter">&quot;</span><span class="content">z</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">w</span><span class="delimiter">&quot;</span></span>).when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/something</span><span class="delimiter">&quot;</span></span>).then().assertThat().statusCode(<span class="integer">200</span>).and().body(<span class="string"><span class="delimiter">&quot;</span><span class="content">x.y</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">z</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>これは次のように記述したのと同じです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>)
        .header(<span class="string"><span class="delimiter">&quot;</span><span class="content">z</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">w</span><span class="delimiter">&quot;</span></span>)
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/something</span><span class="delimiter">&quot;</span></span>)
    .then()
        .statusCode(<span class="integer">200</span>)
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">x.y</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">z</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_response_data">3. Getting Response Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>レスポンス本文を取得できます。<br>
例えば、<code>/lotto</code> への GET リクエストに対して、次のようにレスポンス本文を取得できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">InputStream</span> stream = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>).asInputStream(); <span class="comment">// Don't forget to close this one when you're done</span>
<span class="type">byte</span><span class="type">[]</span> byteArray = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>).asByteArray();
<span class="predefined-type">String</span> json = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>).asString();</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_extracting_values_from_the_response_after_validation">3.1. Extracting values from the Response after validation</h3>
<div class="paragraph">
<p>レスポンスを検証した後でも、<code>extract</code> メソッドでレスポンスのインスタンスやレスポンス本文を取得できます。<br>
後続のリクエストで使いたい値がレスポンスに含まれているときは便利な機能です。<br>
例えば、<code>/title</code> リソースが次のような JSON ドキュメントを返すことにしましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"> {
     <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">My Title</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">_links</span><span class="delimiter">&quot;</span></span>: {
              <span class="key"><span class="delimiter">&quot;</span><span class="content">self</span><span class="delimiter">&quot;</span></span>: { <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">/title</span><span class="delimiter">&quot;</span></span> },
              <span class="key"><span class="delimiter">&quot;</span><span class="content">next</span><span class="delimiter">&quot;</span></span>: { <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">/title?page=2</span><span class="delimiter">&quot;</span></span> }
           }
 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>コンテンツタイプが <code>JSON</code> であることと、<code>title</code> が <code>My Title</code> であることを確認してから、次にリクエストを送信するためのリンクを <code>next</code> から取得しなければならないとします。<br>
その場合は次のように記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> nextTitleLink =
    given()
        .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">param_name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">param_value</span><span class="delimiter">&quot;</span></span>)
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/title</span><span class="delimiter">&quot;</span></span>)
    .then()
        .contentType(JSON)
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">My Title</span><span class="delimiter">&quot;</span></span>))
    .extract()
        .path(<span class="string"><span class="delimiter">&quot;</span><span class="content">_links.next.href</span><span class="delimiter">&quot;</span></span>);

get(nextTitleLink). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>複数の値を抽出しなければならない場合はレスポンス全体のインスタンスを取得することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Response response =
    given().
        .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">param_name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">param_value</span><span class="delimiter">&quot;</span></span>)
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/title</span><span class="delimiter">&quot;</span></span>)
    .then()
        .contentType(JSON)
        .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">My Title</span><span class="delimiter">&quot;</span></span>))
    .extract()
        .response();

<span class="predefined-type">String</span> nextTitleLink = response.path(<span class="string"><span class="delimiter">&quot;</span><span class="content">_links.next.href</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">String</span> headerValue = response.header(<span class="string"><span class="delimiter">&quot;</span><span class="content">headerName</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_json_using_jsonpath">3.2. JSON (using JsonPath)</h3>
<div class="paragraph">
<p>レスポンス本文があれば <a href="http://static.javadoc.io/io.rest-assured/json-path/latest/io/restassured/path/json/JsonPath.html">JsonPath</a> で自由に値を取得できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">int</span> lottoId = from(json).getInt(<span class="string"><span class="delimiter">&quot;</span><span class="content">lotto.lottoId</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt; winnerIds = from(json).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">lotto.winners.winnerId</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>こちらの書き方のほうが効率的です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">JsonPath jsonPath = <span class="keyword">new</span> JsonPath(json).setRoot(<span class="string"><span class="delimiter">&quot;</span><span class="content">lotto</span><span class="delimiter">&quot;</span></span>);
<span class="type">int</span> lottoId = jsonPath.getInt(<span class="string"><span class="delimiter">&quot;</span><span class="content">lottoId</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt; winnerIds = jsonPath.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">winners.winnderId</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>JsonPath</code> は REST Assured が無くても使用できます。<br>
詳しくは <a href="GettingStarted">REST Assured 入門</a> を参照してください。</p>
</div>
<div class="sect3">
<h4 id="_jsonpath_configuration">3.2.1. JsonPath Configuration</h4>
<div class="paragraph">
<p><code>JsonPath</code> がオブジェクトをデシリアライズする振る舞いは変更できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">JsonPath jsonPath = <span class="keyword">new</span> JsonPath(SOME_JSON).using(<span class="keyword">new</span> JsonPathConfig(<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>JsonPath</code> の全てのインスタンスが共有するクラスメンバ変数で全体の設定を変更することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">JsonPath.config = <span class="keyword">new</span> JsonPathConfig(<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>JsonPath</code> について詳しくは <a href="http://www.jayway.com/2013/04/12/whats-new-in-rest-assured-1-8/">Jayway のブログ記事</a> を参照してください。</p>
</div>
<div class="paragraph">
<p>ただし、<code>JsonPath</code> の実装はhttps://github.com/jayway/JsonPath[Jayway の JsonPath] ではなく、 <a href="http://groovy-lang.org/processing-xml.html#_gpath">Groovy の GPath</a> を使っているので、間違えないようにしてください。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_xml_using_xmlpath">3.3. XML (using XmlPath)</h3>
<div class="paragraph">
<p><a href="http://static.javadoc.io/io.rest-assured/xml-path/latest/io/restassured/path/xml/XmlPath.html">XmlPath</a> を使うと REST Assured と同じような操作ができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> xml = post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greetXML?firstName=John&amp;lastName=Doe</span><span class="delimiter">&quot;</span></span>).andReturn().asString();
<span class="comment">// Now use XmlPath to get the first and last name</span>
<span class="predefined-type">String</span> firstName = from(xml).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.firstName</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">String</span> lastName = from(xml).get(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.firstName</span><span class="delimiter">&quot;</span></span>);

<span class="comment">// or a bit more efficiently:</span>
XmlPath xmlPath = <span class="keyword">new</span> XmlPath(xml).setRoot(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">String</span> firstName = xmlPath.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">String</span> lastName = xmlPath.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>XmlPath</code> は REST Assured が無くても使用できます。<br>
詳しくは <a href="GettingStarted">REST Assured 入門</a> を参照してください。</p>
</div>
<div class="sect3">
<h4 id="_xmlpath_configuration">3.3.1. XmlPath Configuration</h4>
<div class="paragraph">
<p><code>XmlPath</code> がオブジェクトをデシリアライズする振る舞いは変更できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">XmlPath xmlPath = <span class="keyword">new</span> XmlPath(SOME_XML).using(<span class="keyword">new</span> XmlPathConfig(<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>XmlPath</code> の全てのインスタンスが共有するクラスメンバ変数で全体の設定を変更することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">XmlPath.config = <span class="keyword">new</span> XmlPathConfig(<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>XmlPath</code> について詳しくは <a href="http://www.jayway.com/2013/04/12/whats-new-in-rest-assured-1-8/">Jayway のブログ記事</a> を参照してください。</p>
</div>
</div>
<div class="sect3">
<h4 id="_parsing_html_with_xmlpath">3.3.2. Parsing HTML with XmlPath</h4>
<div class="paragraph">
<p><code>XmlPath</code> で <a href="http://static.javadoc.io/io.rest-assured/xml-path/latest/io/restassured/path/xml/XmlPath.CompatibilityMode.html">HTML互換モード</a> を設定すると、<code>XmlPath</code> の記法（<code>GPath</code>）で HTML ページをパースできるようになります。<br>
例えば、次のような HTML ドキュメントについて <code>title</code> 要素を取得したい場合について考えてみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;html&gt;</span>
<span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;title&gt;</span>my title<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;/head&gt;</span>
  <span class="tag">&lt;body&gt;</span>
    <span class="tag">&lt;p&gt;</span>paragraph 1<span class="tag">&lt;/p&gt;</span>
     <span class="tag">&lt;br&gt;</span>
    <span class="tag">&lt;p&gt;</span>paragraph 2<span class="tag">&lt;/p&gt;</span>
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>XmlPath</code> は次のように設定しておきましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> html = ...
XmlPath xmlPath = <span class="keyword">new</span> XmlPath(CompatibilityMode.HTML, html);</code></pre>
</div>
</div>
<div class="paragraph">
<p>そうすると、<code>title</code> 要素は次のように取得できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">xmlPath.getString(<span class="string"><span class="delimiter">&quot;</span><span class="content">html.head.title</span><span class="delimiter">&quot;</span></span>); <span class="comment">// will return &quot;mytitle&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>この例を実行するには <code>io.restassured.path.xml.XmlPath.CompatibilityMode.HTML</code> を static import しておく必要があります。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_single_path">3.4. Single path</h3>
<div class="paragraph">
<p>1つのリクエストに対して1つのパスだけが必要な場合は、次のような省略記法が利用できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">int</span> lottoId = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>).path(<span class="string"><span class="delimiter">&quot;</span><span class="content">lotto.lottoid</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>REST Assured はレスポンスのコンテンツタイプから <code>JsonPath</code> と <code>XmlPath</code> のどちらを使用するのか自動的に判断します。<br>
コンテンツタイプが存在しない場合は<a href="#default-parser">既定のパーサー</a>の設定を参照します。<br>
どちらを使用するのか明示的に指定することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> firstName = post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greetXML?firstName=John&amp;lastName=Doe</span><span class="delimiter">&quot;</span></span>).andReturn().xmlPath().getString(<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>指定できる選択肢は <code>xmlPath</code> と <code>jsonPath</code> と <code>htmlPath</code> です。</p>
</div>
</div>
<div class="sect2">
<h3 id="_headers_cookies_status_etc">3.5. Headers, cookies, status etc</h3>
<div class="paragraph">
<p>HTTP ヘッダーや HTTP Cookie、ステータスラインやステータスコードを取得できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Response response = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>);

<span class="comment">// Get all headers</span>
Headers allHeaders = response.getHeaders();
<span class="comment">// Get a single header value:</span>
<span class="predefined-type">String</span> headerName = response.getHeader(<span class="string"><span class="delimiter">&quot;</span><span class="content">headerName</span><span class="delimiter">&quot;</span></span>);

<span class="comment">// Get all cookies as simple name-value pairs</span>
<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; allCookies = response.getCookies();
<span class="comment">// Get a single cookie value:</span>
<span class="predefined-type">String</span> cookieValue = response.getCookie(<span class="string"><span class="delimiter">&quot;</span><span class="content">cookieName</span><span class="delimiter">&quot;</span></span>);

<span class="comment">// Get status line</span>
<span class="predefined-type">String</span> statusLine = response.getStatusLine();
<span class="comment">// Get status code</span>
<span class="type">int</span> statusCode = response.getStatusCode();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_multi_value_headers_and_cookies">3.6. Multi-value headers and cookies</h3>
<div class="paragraph">
<p>A header and a cookie can contain several values for the same name.<br>
HTTP ヘッダーや HTTP Cookie は同じキーに複数の値を含む場合があります。</p>
</div>
<div class="sect3">
<h4 id="_multi_value_headers">3.6.1. Multi-value headers</h4>
<div class="paragraph">
<p>HTTP ヘッダーの全ての値を取得するには、最初に <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/response/Response.html">Response</a> から <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/http/Headers.html">Headers</a> を取得します。<br>
<code>Headers</code> のインスタンスメソッド <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/http/Headers.html#getValues(java.lang.String)">Headers.getValues(&lt;header name&gt;)</a> は全ての値の <code>List</code> を返します。</p>
</div>
</div>
<div class="sect3">
<h4 id="_multi_value_cookies">3.6.2. Multi-value cookies</h4>
<div class="paragraph">
<p>HTTP ヘッダーの全ての値を取得するには、最初に <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/response/Response.html">Response</a> から <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/http/Cookies.html">Cookies</a> を取得します。<br>
<code>Cookies</code> のインスタンスメソッド <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/http/Cookies.html#getValues(java.lang.String)">Cookies.getValues(&lt;header name&gt;)</a> は全ての値の <code>List</code> を返します。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_detailed_cookies">3.7. Detailed Cookies</h3>
<div class="paragraph">
<p><a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/response/ResponseOptions.html#getDetailedCookie-java.lang.String-">Response.getDetailedCookie(java.lang.String)</a> メソッドを使うと、コメント、パス、有効期限等の詳細な情報を全て含む、指定した名前の HTTP Cookie を取得できます。</p>
</div>
<div class="paragraph">
<p><a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/response/ResponseOptions.html#getDetailedCookies--">Response.getDetailedCookies()</a> メソッドを使うと、コメント、パス、有効期限等の詳細な情報を全て含む、全ての HTTP Cookie を取得できます。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specifying_request_data">4. Specifying Request Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>リクエストオブジェクトには、リクエストパラメータと共に HTTP ヘッダーや HTTP Cookie、リクエストボディやコンテンツタイプを指定できます。</p>
</div>
<div class="sect2">
<h3 id="_invoking_http_resources">4.1. Invoking HTTP resources</h3>
<div class="paragraph">
<p>基本的には <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/specification/RequestSpecification.html">リクエストの仕様</a> に定義された "HTTP リクエストメソッド" を呼び出すことでリクエストを送信できるようになっています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>). ..;</code></pre>
</div>
</div>
<div class="paragraph">
<p>この <code>get</code> は HTTP リクエストメソッドです。</p>
</div>
<div class="paragraph">
<p>REST Assured 3.0.0 からは、 <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/specification/RequestSpecification.html#request-java.lang.String-java.lang.String-">request</a> メソッドに指定した任意の HTTP 述語でリクエストを送信できるようになりました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    when()
        .request(<span class="string"><span class="delimiter">&quot;</span><span class="content">CONNECT</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">/somewhere</span><span class="delimiter">&quot;</span></span>)
    .then()
        .statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコード例では <code>CONNECT</code> リクエストをサーバーに送信します。</p>
</div>
</div>
<div class="sect2">
<h3 id="_parameters">4.2. Parameters</h3>
<div class="paragraph">
<p>リクエストパラメータは次のように指定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">param1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value1</span><span class="delimiter">&quot;</span></span>)
        .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">param2</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value2</span><span class="delimiter">&quot;</span></span>)
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/something</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>REST Assured は HTTP リクエストメソッドに応じて、リクエストパラメータの種類（クエリパラメータやフォームパラメータ）を自動的に判断します。<br>
この例では GET リクエストなのでクエリパラメータになります。<br>
POST リクエストの場合はフォームパラメータになります。<br>
PUT リクエストや POST リクエストではクエリパラメータをフォームパラメータを使い分ける必要があるため、次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .formParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">formParamName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value1</span><span class="delimiter">&quot;</span></span>)
        .queryParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">queryParamName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value2</span><span class="delimiter">&quot;</span></span>)
    .when()
        .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/something</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>URL に直接クエリパラメータを埋め込むこともできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/name?firstName=John&amp;lastName=Doe</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>マルチパート形式のパラメータを送信する方法は <a href="#multi-part-form-data">マルチパートフォームデータ</a> を参照してください。</p>
</div>
<div class="sect3">
<h4 id="_multi_value_parameter">4.2.1. Multi-value parameter</h4>
<div class="paragraph">
<p>同じパラメータ名で複数の値を送信する場合は、それぞれの値を可変長引数として指定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().param(<span class="string"><span class="delimiter">&quot;</span><span class="content">myList</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value2</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>リストでも指定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; values = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;<span class="predefined-type">String</span>&gt;();
values.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">value1</span><span class="delimiter">&quot;</span></span>);
values.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">value2</span><span class="delimiter">&quot;</span></span>);

given().param(<span class="string"><span class="delimiter">&quot;</span><span class="content">myList</span><span class="delimiter">&quot;</span></span>, values). ..</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_no_value_parameter">4.2.2. No-value parameter</h4>
<div class="paragraph">
<p>パラメータ名だけを指定すると値を送信しないようにできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().param(<span class="string"><span class="delimiter">&quot;</span><span class="content">paramName</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_path_parameters">4.2.3. Path parameters</h4>
<div class="paragraph">
<p>リクエストを送信するURLにパスパラメータを埋め込むことができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/reserve/{hotelId}/{roomNumber}</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">My Hotel</span><span class="delimiter">&quot;</span></span>, <span class="integer">23</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>REST Assured では前のコード例のような使い方を "名前無しパスパラメータ" と呼び、添え字で参照します（最初のプレースホルダは <code>"My Hotel"</code> なので <code>hotelId</code> には "My Hotel" が入ります）。</p>
</div>
<div class="paragraph">
<p>名前有りパスパラメータもあります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .pathParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">hotelId</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">My Hotel</span><span class="delimiter">&quot;</span></span>)
        .pathParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">roomNumber</span><span class="delimiter">&quot;</span></span>, <span class="integer">23</span>)
    .when().
        .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/reserve/{hotelId}/{roomNumber}</span><span class="delimiter">&quot;</span></span>)
    .then()
             ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>パスパラメータを使うとリクエストURLを読みやすくなるし、複数のテストで再利用しやすくなります。</p>
</div>
<div class="paragraph">
<p>REST Assured 2.8.0 から、名前無しパスパラメータと名前有りパスパラメータを混在して利用できるようになりました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().
        pathParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">hotelId</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">My Hotel</span><span class="delimiter">&quot;</span></span>).
when().
        post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/reserve/{hotelId}/{roomNumber}</span><span class="delimiter">&quot;</span></span>, <span class="integer">23</span>).
then().
         ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合、<code>rototNumber</code> は <code>23</code> になります。</p>
</div>
<div class="paragraph">
<p>パスパラメータの数と、パラメータに指定した値の数が一致しないとエラーになります。<br>
<a href="#filters">filter</a>では、パスパラメータの追加や変更や削除（冗長なパラメータの削除等）を伴うより高度な使い方を説明しています。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cookies">4.3. Cookies</h3>
<div class="paragraph">
<p>HTTP Cookie を指定する最も簡単なやり方は次のとおりです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().cookie(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>).when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/cookie</span><span class="delimiter">&quot;</span></span>).then().body(equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>複数の HTTP Cookie を指定することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().cookie(<span class="string"><span class="delimiter">&quot;</span><span class="content">cookieName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value2</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>前のコード例は2つの HTTP Cookie を作成します（<code>cookieName=value1</code> と <code>cookieName=value2</code>）。</p>
</div>
<div class="paragraph">
<p>HTTP Cookie の詳細情報を指定するときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Cookie someCookie = <span class="keyword">new</span> Cookie.Builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">some_cookie</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">some_value</span><span class="delimiter">&quot;</span></span>).setSecured(<span class="predefined-constant">true</span>).setComment(<span class="string"><span class="delimiter">&quot;</span><span class="content">some comment</span><span class="delimiter">&quot;</span></span>).build();
given().cookie(someCookie).when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/cookie</span><span class="delimiter">&quot;</span></span>).then().assertThat().body(equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>複数の HTTP Cookie を同時に指定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Cookie cookie1 = Cookie.Builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>).setComment(<span class="string"><span class="delimiter">&quot;</span><span class="content">comment 1</span><span class="delimiter">&quot;</span></span>).build();
Cookie cookie2 = Cookie.Builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">token</span><span class="delimiter">&quot;</span></span>, <span class="integer">1234</span>).setComment(<span class="string"><span class="delimiter">&quot;</span><span class="content">comment 2</span><span class="delimiter">&quot;</span></span>).build();
Cookies cookies = <span class="keyword">new</span> Cookies(cookie1, cookie2);
given().cookies(cookies).when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/cookie</span><span class="delimiter">&quot;</span></span>).then().body(equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">username, token</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_headers">4.4. Headers</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().header(<span class="string"><span class="delimiter">&quot;</span><span class="content">MyHeader</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Something</span><span class="delimiter">&quot;</span></span>).and(). ..
given().headers(<span class="string"><span class="delimiter">&quot;</span><span class="content">MyHeader</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Something</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">MyOtherHeader</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">SomethingElse</span><span class="delimiter">&quot;</span></span>).and(). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>HTTP ヘッダーには複数の値を設定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().header(<span class="string"><span class="delimiter">&quot;</span><span class="content">headerName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value2</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>前のコード例は2つの HTTP ヘッダーを作成します（<code>headerName=value1</code> と <code>headerName=value2</code>）。</p>
</div>
<h5 id="_header_mergingoverwriting" class="discrete">Header Merging/Overwriting</h5>
<div class="paragraph">
<p>By default headers are merged. So for example if you do like this:<br>
初期設定では指定された HTTP ヘッダーはマージするようになっています。<br>
例えば、次のように記述した場合、HTTP リクエストには2つの HTTP ヘッダー（<code>x: 1</code> と <code>x: 2</code>）が含まれることになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().header(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>).header(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>HTTP ヘッダーをマージするかどうかは <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/HeaderConfig.html">HeaderConfig</a> で変更できます。<br>
この場合送信する HTTP ヘッダーとして送信するのは <code>x: 2</code> です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().
        config(RestAssuredConfig.config().headerConfig(headerConfig().overwriteHeadersWithName(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>))).
        header(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>).
        header(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span>).
when().
        get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/something</span><span class="delimiter">&quot;</span></span>).
...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_content_type">4.5. Content Type</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().contentType(ContentType.TEXT). ..
given().contentType(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_request_body">4.6. Request Body</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().body(<span class="string"><span class="delimiter">&quot;</span><span class="content">some body</span><span class="delimiter">&quot;</span></span>). .. <span class="comment">// Works for POST, PUT and DELETE requests</span>
given().request().body(<span class="string"><span class="delimiter">&quot;</span><span class="content">some body</span><span class="delimiter">&quot;</span></span>). .. <span class="comment">// More explicit (optional)</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().body(<span class="keyword">new</span> <span class="type">byte</span><span class="type">[]</span>{<span class="integer">42</span>}). .. <span class="comment">// Works for POST, PUT and DELETE</span>
given().request().body(<span class="keyword">new</span> <span class="type">byte</span><span class="type">[]</span>{<span class="integer">42</span>}). .. <span class="comment">// More explicit (optional)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#serialization">serialization</a> では Java オブジェクトを JSON ドキュメントや XML ドキュメントへシリアライズする方法を説明しています。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_verifying_response_data">5. Verifying Response Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HTTP レスポンスについて検証できるのは、ステータスコードやステータスライン、HTTP Cookie、HTTP ヘッダー、コンテンツタイプ、レスポンス本文です。</p>
</div>
<div class="sect2">
<h3 id="_response_body">5.1. Response Body</h3>
<div class="paragraph">
<p><a href="#example-1---json">JSON ドキュメント</a> や <a href="#example-2---xml">XML ドキュメント</a> の具体例を参照してください。</p>
</div>
<div class="paragraph">
<p>レスポンス本文を Java オブジェクトに写像することもできます。<br>
詳しくは <a href="#deserialization">deserialization</a> を参照してください。</p>
</div>
</div>
<div class="sect2">
<h3 id="_cookies_2">5.2. Cookies</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().assertThat().cookie(<span class="string"><span class="delimiter">&quot;</span><span class="content">cookieName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">cookieValue</span><span class="delimiter">&quot;</span></span>). ..
get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().assertThat().cookies(<span class="string"><span class="delimiter">&quot;</span><span class="content">cookieName1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">cookieValue1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">cookieName2</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">cookieValue2</span><span class="delimiter">&quot;</span></span>). ..
get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().assertThat().cookies(<span class="string"><span class="delimiter">&quot;</span><span class="content">cookieName1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">cookieValue1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">cookieName2</span><span class="delimiter">&quot;</span></span>, containsString(<span class="string"><span class="delimiter">&quot;</span><span class="content">Value2</span><span class="delimiter">&quot;</span></span>)). ..</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_status">5.3. Status</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().assertThat().statusCode(<span class="integer">200</span>). ..
get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().assertThat().statusLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">something</span><span class="delimiter">&quot;</span></span>). ..
get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().assertThat().statusLine(containsString(<span class="string"><span class="delimiter">&quot;</span><span class="content">some</span><span class="delimiter">&quot;</span></span>)). ..</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_headers_2">5.4. Headers</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().assertThat().header(<span class="string"><span class="delimiter">&quot;</span><span class="content">headerName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">headerValue</span><span class="delimiter">&quot;</span></span>). ..
get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().assertThat().headers(<span class="string"><span class="delimiter">&quot;</span><span class="content">headerName1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">headerValue1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">headerName2</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">headerValue2</span><span class="delimiter">&quot;</span></span>). ..
get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().assertThat().headers(<span class="string"><span class="delimiter">&quot;</span><span class="content">headerName1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">headerValue1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">headerName2</span><span class="delimiter">&quot;</span></span>, containsString(<span class="string"><span class="delimiter">&quot;</span><span class="content">Value2</span><span class="delimiter">&quot;</span></span>)). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>HTTP ヘッダーを検証するときは写像関数も利用できます。<br>
例えば、<code>Content-Length</code> ヘッダーの値が <code>1000</code> 未満であることを確認するなら、ヘッダーの値を <code>int</code> へ変換し、<code>Integer</code> として <code>Hamcrest</code> マッチャーに渡すようにできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/something</span><span class="delimiter">&quot;</span></span>).then().assertThat().header(<span class="string"><span class="delimiter">&quot;</span><span class="content">Content-Length</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Integer</span>::parseInt, lessThan(<span class="integer">1000</span>));</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_content_type_2">5.5. Content-Type</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().assertThat().contentType(ContentType.JSON). ..</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_full_bodycontent_matching">5.6. Full body/content matching</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().assertThat().body(equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">something</span><span class="delimiter">&quot;</span></span>)). ..</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_use_the_response_to_verify_other_parts_of_the_response">5.7. Use the response to verify other parts of the response</h3>
<div class="paragraph">
<p>You can use data from the response to verify another part of the response. For example consider the following JSON document returned from service x:<br>
レスポンスから取得したデータを、レスポンスの他の部分の検証に使うことができます。<br>
例えばあるサービスが次のような JSON ドキュメントを返したことにしましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">{ <span class="key"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">some-id</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost:8080/some-id</span><span class="delimiter">&quot;</span></span> }</code></pre>
</div>
</div>
<div class="paragraph">
<p>このとき、"href" 属性の値が "userId" 属性の値で終端しているか確かめたいことにします。<br>
そういうときは、<code>io.restassured.matcher.ResponseAwareMatcher</code> で次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().body(<span class="string"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> ResponseAwareMatcher&lt;Response&gt;() {
                                  <span class="directive">public</span> <span class="predefined-type">Matcher</span>&lt;?&gt; matcher(Response response) {
                                      <span class="keyword">return</span> equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost:8080/</span><span class="delimiter">&quot;</span></span> + response.path(<span class="string"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span>));
                                  }
                              });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Java 8 を使っているなら代わりにラムダ式を使うことが出来ます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().body(<span class="string"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>, response -&gt; equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost:8080/</span><span class="delimiter">&quot;</span></span> + response.path(<span class="string"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span>)));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>io.restassured.matcher.RestAssuredMatchers</code> には定義済みのいろいろなマッチャーがあります。<br>
Spring Mock MVC モジュールを使っているなら <code>io.restassured.module.mockmvc.matcher.RestAssuredMockMvcMatchers</code> を使いましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().body(<span class="string"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>, endsWithPath(<span class="string"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ResponseAwareMatchers</code> のマッチャーメソッドは、他のマッチャーメソッドや <code>Hamcrest</code> のマッチャーメソッドと組み合わせることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().body(<span class="string"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>, and(startsWith(<span class="string"><span class="delimiter">&quot;</span><span class="content">http:/localhost:8080/</span><span class="delimiter">&quot;</span></span>), endsWithPath(<span class="string"><span class="delimiter">&quot;</span><span class="content">userId</span><span class="delimiter">&quot;</span></span>)));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>and</code> メソッドは <code>io.restassured.matcher.ResponseAwareMatcherComposer</code> のクラスメソッドです。</p>
</div>
</div>
<div class="sect2">
<h3 id="_measuring_response_time">5.8. Measuring Response Time</h3>
<div class="paragraph">
<p>REST Assured 2.8.0 から応答時間を計測できるようになりました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">long</span> timeInMs = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>).time()</code></pre>
</div>
</div>
<div class="paragraph">
<p>時間単位を指定することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">long</span> timeInSeconds = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>).timeIn(SECONDS);</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>SECONDS</code> は <code>TimeUnit</code> の列挙値です。<br>
応答時間の計測にバリデーション DSL を組み合わせることもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">when().
      get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>).
then().
      time(lessThan(<span class="integer">2000L</span>)); <span class="comment">// Milliseconds</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>時間単位も指定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">when().
      get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/lotto</span><span class="delimiter">&quot;</span></span>).
then().
      time(lessThan(<span class="integer">2L</span>), SECONDS);</code></pre>
</div>
</div>
<div class="paragraph">
<p>応答時間の計測は JVM が十分に暖まっている状態で行うようにしてください（単発のテストで計測しても不正確な結果しか得られません）。<br>
また、計測値はサーバーの処理時間を厳密に保証するものではありません（HTTP の往復時間や REST Assured の処理時間などを含むため）。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authentication">6. Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST Assured はさまざまな認証方式に対応しています。<br>
具体的には OAuth、Digest認証、証明書、フォーム認証、プリエンプティブベーシック認証等です。<br>
認証方式はそれぞれのリクエストに指定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().auth().basic(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>全てのリクエストで使用する認証方式を指定することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.authentication = basic(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>他にも、<a href="#specification-re-use">リクエストやレスポンスの仕様</a> として指定することができます。</p>
</div>
<div class="sect2">
<h3 id="_basic_authentication">6.1. Basic Authentication</h3>
<div class="paragraph">
<p>ベーシック認証には2種類あります。<br>
1つは「プリエンプティブベーシック認証」、もう1つは「チャレンジベーシック認証」です。</p>
</div>
<div class="sect3">
<h4 id="_preemptive_basic_authentication">6.1.1. Preemptive Basic Authentication</h4>
<div class="paragraph">
<p>余計な接続をする負担を減らすため、特定の時点でサーバーが 404(Unauthorized) レスポンスステータスを返す前に、資格情報を送信する方式です。<br>
サーバーがチャレンジを処理する能力をテストする場合を除いて、ほとんどの場面で使われることになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().auth().preemptive().basic(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>).when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/secured/hello</span><span class="delimiter">&quot;</span></span>).then().statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_challenged_basic_authentication">6.1.2. Challenged Basic Authentication</h4>
<div class="paragraph">
<p>「チャレンジベーシック認証」を使う場合、サーバーが明示的に要求しない限り、REST Assured は資格情報を提供しません。<br>
つまり、REST Assured は最初にチャレンジのためのリクエストを送信してから、資格情報を HTTP ヘッダーに設定したリクエストを送信するのです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().auth().basic(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>).when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/secured/hello</span><span class="delimiter">&quot;</span></span>).then().statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_digest_authentication">6.2. Digest Authentication</h3>
<div class="paragraph">
<p>今のところ「チャレンジダイジェスト認証」にだけ対応しています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().auth().digest(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>).when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/secured</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_form_authentication">6.3. Form Authentication</h3>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Form-based_authentication">フォーム認証</a> はインターネットで非常に広く使われている方式です。<br>
ユーザーはWebページで資格情報（ユーザー名とパスワード）を入力し、ログインボタンで送信します。<br>
フォーム認証のための必要最小限のWebページは次のようになるでしょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;html&gt;</span>
  <span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;title&gt;</span>Login<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;/head&gt;</span>

  <span class="tag">&lt;body&gt;</span>
    <span class="tag">&lt;form</span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">j_spring_security_check</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">POST</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;table&gt;</span>
        <span class="tag">&lt;tr&gt;</span><span class="tag">&lt;td&gt;</span>User:<span class="entity">&amp;nbsp;</span><span class="tag">&lt;/td&gt;</span><span class="tag">&lt;td&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">'</span><span class="content">text</span><span class="delimiter">'</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">j_username</span><span class="delimiter">'</span></span><span class="tag">&gt;</span><span class="tag">&lt;/td&gt;</span><span class="tag">&lt;/tr&gt;</span>
        <span class="tag">&lt;tr&gt;</span><span class="tag">&lt;td&gt;</span>Password:<span class="tag">&lt;/td&gt;</span><span class="tag">&lt;td&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">'</span><span class="content">password</span><span class="delimiter">'</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">'</span><span class="content">j_password</span><span class="delimiter">'</span></span><span class="tag">&gt;</span><span class="tag">&lt;/td&gt;</span><span class="tag">&lt;/tr&gt;</span>
          <span class="tag">&lt;tr&gt;</span><span class="tag">&lt;td</span> <span class="attribute-name">colspan</span>=<span class="string"><span class="delimiter">'</span><span class="content">2</span><span class="delimiter">'</span></span><span class="tag">&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/td&gt;</span><span class="tag">&lt;/tr&gt;</span>
       <span class="tag">&lt;/table&gt;</span>
        <span class="tag">&lt;/form&gt;</span>
      <span class="tag">&lt;/body&gt;</span>
 <span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>サーバーは、ユーザーが "j_username" フィールドと "j_password" フィールトを入力して "submit" ボタンをクリックすることを期待しています。<br>
フォーム認証で保護されたサービスを REST Assured でテストするには次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given().
        .auth().form(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>)
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/formAuth</span><span class="delimiter">&quot;</span></span>)
    .then()
        .statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>最適な動作をするわけではありません。<br>
このように記述した場合、REST Assured はログインページを取得するための余計なリクエストを送信するからです。<br>
REST Assured は取得したWebページを解析し、ユーザー名とパスワードに対応する入力フィールドと、フォームアクションURIを探索します。<br>
Webページの複雑さによって解析に失敗する場合もあります。<br>
フォーム認証を構成するときは、あらかじめ解析して得られるはずの情報を指定したほうがよいです。<br>
例えば次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .auth()
        .form(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> FormAuthConfig(<span class="string"><span class="delimiter">&quot;</span><span class="content">/j_spring_security_check</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">j_username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">j_password</span><span class="delimiter">&quot;</span></span>))
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/formAuth</span><span class="delimiter">&quot;</span></span>)
    .then()
        .statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合 REST Assured はログインページを取得し、解析するためのリクエストを送信する必要がありません。<br>
Spring Security が初期設定で構成されているなら、<code>FormAuthConfig</code> に定義済みの <code>springSecurity</code> を使うことができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .auth().form(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>, FormAuthConfig.springSecurity())
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/formAuth</span><span class="delimiter">&quot;</span></span>)
    .then()
        .statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_csrf">6.3.1. CSRF</h4>
<div class="paragraph">
<p>サーバーのレスポンスに <a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery">CSRF</a> 対策のためのトークン値を含めるのが一般的になっています。<br>
REST Assured はサーバーから受信した CSRF トークンを自動的に解釈するようになっていますが、そのためには <em>必ず</em> Webページ（Webサイトの一部）を取得するリクエストを送信しなければなりません。</p>
</div>
<div class="paragraph">
<p>CSRF 機能は次のように有効化します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .auth().form(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>, formAuthConfig().withAutoDetectionOfCsrf())
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/formAuth</span><span class="delimiter">&quot;</span></span>)
    .then()
        .statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合、REST Assured は自動的にWebページを解析してCSRFトークンを探索します。<br>
より正確にCSRFトークンを探索できるようにするため、REST Assured にフィールド名を指定することができます。<br>
次のコード例は、Spring Security が初期設定で構成されているものとして、<code>FormAuthConfig</code> に定義済みの <code>springSecurity</code> を使用し、"\_csrf" で終わるフィールド名を CSRF トークンの設定されたフィールドとして探索させています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .auth().form(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>, springSecurity().withCsrfFieldName(<span class="string"><span class="delimiter">&quot;</span><span class="content">_csrf</span><span class="delimiter">&quot;</span></span>))
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/formAuth</span><span class="delimiter">&quot;</span></span>)
    .then()
        .statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>初期設定では、CSFR トークンをフォームパラメータとして送信するようになっています。<br>
ただし、必要に応じて HTTP ヘッダーとして送信するように設定することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .auth().form(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>, springSecurity().withCsrfFieldName(<span class="string"><span class="delimiter">&quot;</span><span class="content">_csrf</span><span class="delimiter">&quot;</span></span>).sendCsrfTokenAsHeader())
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/formAuth</span><span class="delimiter">&quot;</span></span>)
    .then()
        .statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_include_additional_fields_in_form_authentication">6.3.2. Include additional fields in Form Authentication</h4>
<div class="paragraph">
<p>REST Assured 3.1.0 からフォーム認証へ入力フィールドを追加できるようになりました。<br>
<code>FormAuthConfig</code> に追加するフィールドを指定するだけです。<br>
例えば、次のようなWebページがあるとします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;html&gt;</span>
<span class="tag">&lt;head&gt;</span>
   <span class="tag">&lt;title&gt;</span>Login<span class="tag">&lt;/title&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
<span class="tag">&lt;form</span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/login</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">POST</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   <span class="tag">&lt;table&gt;</span>
       <span class="tag">&lt;tr&gt;</span>
           <span class="tag">&lt;td&gt;</span>User:<span class="entity">&amp;nbsp;</span><span class="tag">&lt;/td&gt;</span>
           <span class="tag">&lt;td&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">j_username</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/td&gt;</span>
       <span class="tag">&lt;/tr&gt;</span>
       <span class="tag">&lt;tr&gt;</span>
           <span class="tag">&lt;td&gt;</span>Password:<span class="tag">&lt;/td&gt;</span>
           <span class="tag">&lt;td&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">j_password</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/td&gt;</span>
       <span class="tag">&lt;/tr&gt;</span>
       <span class="tag">&lt;tr&gt;</span>
           <span class="tag">&lt;td</span> <span class="attribute-name">colspan</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/td&gt;</span>
       <span class="tag">&lt;/tr&gt;</span>
   <span class="tag">&lt;/table&gt;</span>
   <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">firstInputField</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">value1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
   <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">secondInputField</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">value2</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/form&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>そして、<code>firstInputField</code> と <code>secondInputField</code> を追加したいときは、次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().auth().form(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>,
    formAuthConfig().withAdditionalFields(<span class="string"><span class="delimiter">&quot;</span><span class="content">firstInputField</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">secondInputField</span><span class="delimiter">&quot;</span></span>)). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>REST Assured は自動的にWebページを解析し、指定したフィールドを探索し、発見した値をログインリクエストのフォームパラメータへ設定します。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_oauth">6.4. OAuth</h3>
<div class="paragraph">
<p>OAuth 1 や OAuth 2（クエリパラメータに署名する）を使用するには、クラスパスに <a href="https://github.com/scribejava/scribejava">ScribeJava</a> を追加しなければなりません。<br>
あなたのプロジェクトが Maven を使っているなら次のような依存ライブラリを追加します。<br>
Maven を使っていない場合は <a href="https://github.com/scribejava/scribejava/releases">GitHub のリリース</a> から取得した jar ファイルをクラスパスに配置します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>com.github.scribejava<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>scribejava-apis<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>8.3.1<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_oauth_1">6.4.1. OAuth 1</h4>
<div class="paragraph">
<p>OAuth 1 を使用するにはクラスパスに <a href="#oauth">ScribeJava</a> が必要です。<br>
認証処理は次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().auth().oauth(..). ..</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_oauth_2">6.4.2. OAuth 2</h4>
<div class="paragraph">
<p>REST Assured 2.5.0 から、OAuth 2 を使用するときに <a href="#oauth">ScribeJava</a> へ依存しなくなりました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().auth().oauth2(accessToken). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>このように記述すると、OAuth 2 の <code>accessToken</code> を HTTP ヘッダーに埋め込むことができます。<br>
明示的に次のように記述することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().auth().preemptive().oauth2(accessToken). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>given().auth().oauth2(..)</code> という記法は後方互換性のために残されています（やっている内容は同じです）。<br>
OAuth 2 トークンをクエリパラメータで送信させたいときは、クラスパスに <a href="#oauth">ScribeJava</a> を配置して、次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().auth().oauth2(accessToken, OAuthSignature.QUERY_STRING). ..</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_authentication">6.5. Custom Authentication</h3>
<div class="paragraph">
<p>REST Assured では独自の認証プロバイダーを使用できます。<br>
そのためには、<code>io.restassured.spi.AuthFilter</code> インターフェイスを実装したクラスを <a href="#filters">filter</a> に指定します。<br>
例えば、決して安全性を高める方法ではありませんが、あなたのサービスが独自の HTTP ヘッダー "AUTH" に、2種類の HTTP ヘッダーの値を組み合わせた値を要求するなら、次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .filter((requestSpec, responseSpec, ctx) -&gt; {
            <span class="predefined-type">String</span> header1 = requestSpec.getHeaders().getValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">header1</span><span class="delimiter">&quot;</span></span>);
            <span class="predefined-type">String</span> header2 = requestSpec.getHeaders().getValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">header2</span><span class="delimiter">&quot;</span></span>);
            requestSpec.header(<span class="string"><span class="delimiter">&quot;</span><span class="content">AUTH</span><span class="delimiter">&quot;</span></span>, header1 + header2);
            <span class="keyword">return</span> ctx.next(requestSpec, responseSpec);
        })
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/customAuth</span><span class="delimiter">&quot;</span></span>)
    .then()
        .statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Filter</code> ではなく <code>AuthFilter</code> を使用するべき理由は、<code>given().auth().none(). ..</code> のように記述した場合、<code>AuthFilters</code> が自動的に除去してくれるからです。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_multi_part_form_data">7. Multi-part form data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>巨大なデータをサーバーに送信するときは、マルチパート形式で送信するのが一般的です。<br>
REST Assured では <code>multiPart</code> メソッドを使って、ファイルやバイト配列、入力ストリームや文字列を送信できます。<br>
例えば、次のように記述すると簡単にファイルをアップロードできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .multiPart(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/path/to/file</span><span class="delimiter">&quot;</span></span>))
    when()
        .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/upload</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコード例では、マルチパート形式のデータ構造において、あるコンテンツに対応する部分の名前が "file" になります。<br>
HTML では input タグの name 属性が使われます。<br>
次のような HTML について考えてみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;form</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">uploadForm</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/upload</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">post</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">enctype</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">multipart/form-data</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">file</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">file</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">size</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">40</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="attribute-value">submit</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Upload!</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合、input タグの name 属性が "file" なので、あるコンテンツに対応する部分の名前は "file" になります。<br>
別の名前にするときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    given()
        .multiPart(<span class="string"><span class="delimiter">&quot;</span><span class="content">controlName</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/path/to/file</span><span class="delimiter">&quot;</span></span>))
    .when()
        .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/upload</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>同じリクエストで複数のコンテンツを送信するときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">byte</span><span class="type">[]</span> someData = ..
given()
    .multiPart(<span class="string"><span class="delimiter">&quot;</span><span class="content">controlName1</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/path/to/file</span><span class="delimiter">&quot;</span></span>))
    .multiPart(<span class="string"><span class="delimiter">&quot;</span><span class="content">controlName2</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">my_file_name.txt</span><span class="delimiter">&quot;</span></span>, someData)
    .multiPart(<span class="string"><span class="delimiter">&quot;</span><span class="content">controlName3</span><span class="delimiter">&quot;</span></span>, someJavaObject, <span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>)
.when()
    .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/upload</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>より複雑な制御が必要なときは <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/builder/MultiPartSpecBuilder.html">MultiPartSpecBuilder</a> を使います。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Greeting greeting = <span class="keyword">new</span> Greeting();
greeting.setFirstName(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>);
greeting.setLastName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>);

given()
    .multiPart(<span class="keyword">new</span> MultiPartSpecBuilder(greeting, ObjectMapperType.JACKSON_2)
        .fileName(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.json</span><span class="delimiter">&quot;</span></span>)
        .controlName(<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>)
        .mimeType(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/vnd.custom+json</span><span class="delimiter">&quot;</span></span>).build())
.when()
    .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/multipart/json</span><span class="delimiter">&quot;</span></span>)
.then()
    .statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>特に、コンテンツに対応する名前の初期値やファイル名を変更したい場合は <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/MultiPartConfig.html">MultiPartConfig</a> を構成します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().config(config().multiPartConfig(multiPartConfig().defaultControlName(<span class="string"><span class="delimiter">&quot;</span><span class="content">something-else</span><span class="delimiter">&quot;</span></span>))). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコード例では、コンテンツに対応する名前が "file" ではなく "something-else" になります。</p>
</div>
<div class="paragraph">
<p>より詳しい内容は <a href="http://blog.jayway.com/2011/09/15/multipart-form-data-file-uploading-made-simple-with-rest-assured/">JayWay のブログ記事</a> を参照してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_object_mapping">8. Object Mapping</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST Assured は Java オブジェクトと JSON および XML を相互変換できるようになっています。<br>
JSON を処理するにはクラスパスに Jackson や Jackson2、Gson や Johnzon の jar ファイルを配置しなければなりません。<br>
また、XML を処理するには JAXB が必要です。</p>
</div>
<div class="sect2">
<h3 id="_serialization">8.1. Serialization</h3>
<div class="paragraph">
<p>次のような Java オブジェクトを JSON にシリアライズして送信する方法がいろいろあります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Message</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> message;

    <span class="directive">public</span> <span class="predefined-type">String</span> getMessage() {
        <span class="keyword">return</span> message;
    }

    <span class="directive">public</span> <span class="type">void</span> setMessage(<span class="predefined-type">String</span> message) {
        <span class="local-variable">this</span>.message = message;
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_content_type_based_serialization">8.1.1. Content-Type based Serialization</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Message message = <span class="keyword">new</span> Message();
message.setMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">My messagee</span><span class="delimiter">&quot;</span></span>);
given()
    .contentType(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>)
    .body(message)
.when()
    .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/message</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコード例では、リクエストに指定した HTTP ヘッダー content-type の値である "application/json" に従って、オブジェクトを JSON にシリアライズします。<br>
最初はクラスパスから Jackson を探索し、無ければ Gson を使います。<br>
content-type の値を "application/xml" にすると、JAXB を使用して XML へシリアライズします。<br>
content-type を指定しなかった場合は、次の順にシリアライズを試みます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>JSON using Jackson 2 (Faster Jackson (databind))</p>
</li>
<li>
<p>JSON using Jackson (databind)</p>
</li>
<li>
<p>JSON using Gson</p>
</li>
<li>
<p>JSON using Johnzon</p>
</li>
<li>
<p>JSON-B using Eclipse Yasson</p>
</li>
<li>
<p>XML using JAXB</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>REST Assured は content-type に含まれる charset も考慮します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Message message = <span class="keyword">new</span> Message();
message.setMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">My messagee</span><span class="delimiter">&quot;</span></span>);
given()
    .contentType(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/json; charset=UTF-16</span><span class="delimiter">&quot;</span></span>)
    .body(message)
.when()
    .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/message</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Message</code> クラスのインスタンスをフォームパラメータへシリアライズすることもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Message message = <span class="keyword">new</span> Message();
message.setMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">My messagee</span><span class="delimiter">&quot;</span></span>);
given()
    .contentType(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/json; charset=UTF-16</span><span class="delimiter">&quot;</span></span>)
    .formParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">param1</span><span class="delimiter">&quot;</span></span>, message)
.when()
    .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/message</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコード例では、文字エンコーディングを UTF-16 として、Jackson (databind) あるいは Gson で JSON へシリアライズします。</p>
</div>
</div>
<div class="sect3">
<h4 id="_create_json_from_a_hashmap">8.1.2. Create JSON from a HashMap</h4>
<div class="paragraph">
<p>Map のインスタンスから JSON ドキュメントを作成できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;  jsonAsMap = <span class="keyword">new</span> <span class="predefined-type">HashMap</span>&lt;&gt;();
jsonAsMap.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>);
jsonAsMap.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>);

given()
    .contentType(JSON)
    .body(jsonAsMap)
.when()
    .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/somewhere</span><span class="delimiter">&quot;</span></span>)
.then()
    .statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコード例は、次のような JSON ドキュメントをリクエスト本文として送信します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">{ <span class="key"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span> }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_an_explicit_serializer">8.1.3. Using an Explicit Serializer</h4>
<div class="paragraph">
<p>クラスパスに複数のオブジェクトマッピングライブラリが存在する場合や、content-type の値を無視させたい場合は、明示的にシリアライザーを指定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Message message = <span class="keyword">new</span> Message();
message.setMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">My messagee</span><span class="delimiter">&quot;</span></span>);
given()
   .body(message, ObjectMapperType.JAXB)
.when()
  .post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/message</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコード例では message オブジェクトを JAXB で XML へシリアライズします。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deserialization">8.2. Deserialization</h3>
<div class="paragraph">
<p>レスポンス本文を、Java オブジェクトにデシリアライズする方法もいろいろあります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Message</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> message;

    <span class="directive">public</span> <span class="predefined-type">String</span> getMessage() {
        <span class="keyword">return</span> message;
    }

    <span class="directive">public</span> <span class="type">void</span> setMessage(<span class="predefined-type">String</span> message) {
        <span class="local-variable">this</span>.message = message;
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_content_type_based_deserialization">8.2.1. Content-Type based Deserialization</h4>
<div class="paragraph">
<p>サーバーから次のような JSON ドキュメントを受信したことにします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">{<span class="key"><span class="delimiter">&quot;</span><span class="content">message</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">My message</span><span class="delimiter">&quot;</span></span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Message クラスのオブジェクトへデシリアライズするには次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Message message = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/message</span><span class="delimiter">&quot;</span></span>).as(Message.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合、受信した HTTP ヘッダー content-type の値は "application/json" でなければなりません（"json" を含む値ならなんでも構いません）。</p>
</div>
<div class="paragraph">
<p>一方、サーバーから次のような XML ドキュメントを受信したことにします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span>
<span class="tag">&lt;message&gt;</span>
      <span class="tag">&lt;message&gt;</span>My message<span class="tag">&lt;/message&gt;</span>
<span class="tag">&lt;/message&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合、受信した HTTP ヘッダー content-type の値は "application/xml" でなければなりません。<br>
同じコードのままで動作します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Message message = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/message</span><span class="delimiter">&quot;</span></span>).as(Message.class);</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_custom_content_type_deserialization">Custom Content-Type Deserialization</h5>
<div class="paragraph">
<p>サーバーから受信した content-type の値が "application/something" のように独自の値でも、いろいろな方法で Java オブジェクトへデシリアライズさせることができます。<br>
具体的には、<a href="#using-an-explicit-deserializer">明示的に指定する方法</a>や、独自の content-type に対応するパーサーを登録する方法があります。</p>
</div>
<div class="paragraph">
<p>content-type に対応するパーサーを登録するには次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Message message = expect().parser(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/something</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Parser</span>.XML).when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/message</span><span class="delimiter">&quot;</span></span>).as(Message.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>既定のパーサーを登録するには次のように記述します。<br>
既定のパーサーは、<a href="#default-values">クラスメンバ変数</a> へ登録することもできますし、<a href="#specification-re-use">レスポンスの仕様</a> として登録することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Message message = expect().defaultParser(<span class="predefined-type">Parser</span>.XML).when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/message</span><span class="delimiter">&quot;</span></span>).as(Message.class);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_an_explicit_deserializer">8.2.2. Using an Explicit Deserializer</h4>
<div class="paragraph">
<p>クラスパスに複数のオブジェクトマッピングライブラリが存在する場合や、content-type の値を無視させたい場合は、明示的にデシリアライザーを指定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Message message = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/message</span><span class="delimiter">&quot;</span></span>).as(Message.class, ObjectMapperType.GSON);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration">8.3. Configuration</h3>
<div class="paragraph">
<p>既定のオブジェクトマッパーは <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/ObjectMapperConfig.html">ObjectMapperConfig</a> で設定できます。<br>
また、<code>ObjectMapperConfig</code> は <a href="#detailed-configuration">詳細設定</a> へ指定できます。<br>
例えば、Gson のフィールド名規則を小文字とアンダースコアで構成するには次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssuredConfig.config().objectMapperConfig(objectMapperConfig().gsonObjectMapperFactory(
                <span class="keyword">new</span> GsonObjectMapperFactory() {
                    <span class="directive">public</span> Gson create(<span class="predefined-type">Class</span> cls, <span class="predefined-type">String</span> charset) {
                        <span class="keyword">return</span> <span class="keyword">new</span> GsonBuilder().setFieldNamingPolicy(LOWER_CASE_WITH_UNDERSCORES).create();
                    }
                }
        ));</code></pre>
</div>
</div>
<div class="paragraph">
<p>REST Assured は Gson、JAXB、Jackson、Jackson2、Eclipse Yasson（JSON-B）のための定義済みファクトリクラスを提供しています。</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom">8.4. Custom</h3>
<div class="paragraph">
<p>REST Assured はクラスパスを探索して利用可能なオブジェクトマッパーを判断します。<br>
未対応のオブジェクトマッパーを利用したい場合は、 <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/mapper/ObjectMapper.html">io.restassured.mapper.ObjectMapper</a> の独自実装を、<code>body</code> メソッドの第二引数へ指定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().body(myJavaObject, myObjectMapper).when().post(<span class="string"><span class="delimiter">&quot;</span><span class="content">..</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>クラスメンバ変数へ設定すれば、全ての呼び出しから利用させることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssuredConfig.config().objectMapperConfig(<span class="keyword">new</span> ObjectMapperConfig(myObjectMapper));</code></pre>
</div>
</div>
<div class="paragraph">
<p>具体例は <a href="https://github.com/rest-assured/rest-assured/blob/master/examples/rest-assured-itest-java/src/test/java/io/restassured/itest/java/CustomObjectMappingITest.java">ソースコード</a> で確認してください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_parsers">9. Parsers</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_custom_2">9.1. Custom</h3>
<div class="paragraph">
<p>REST Assured は HTML、XML、JSON の定義済みパーサーを提供します。<br>
また、REST Assured が未対応の content-type に対応するパーサーを登録することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.registerParser(&lt;content-type&gt;, &lt;parser&gt;);</code></pre>
</div>
</div>
<div class="paragraph">
<p>MIMEタイプ "application/vnd.uoml+xml" を XML パーサーで解析させるときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.registerParser(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/vnd.uoml+xml</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Parser</span>.XML);</code></pre>
</div>
</div>
<div class="paragraph">
<p>登録したパーサーは解除できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.unregisterParser(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/vnd.uoml+xml</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>リクエストごとにパーサーを指定することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(..).then().using().parser(<span class="string"><span class="delimiter">&quot;</span><span class="content">application/vnd.uoml+xml</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Parser</span>.XML). ..;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#specification-re-use">レスポンスの仕様</a> として指定することもできます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_default">9.2. Default</h3>
<div class="paragraph">
<p>レスポンスに HTTP ヘッダーの content-type が無い場合などのために、既定のパーサーを登録しておくと便利です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.defaultParser = <span class="predefined-type">Parser</span>.JSON;</code></pre>
</div>
</div>
<div class="paragraph">
<p>リクエストごとに既定のパーサーを指定することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().using().defaultParser(<span class="predefined-type">Parser</span>.JSON). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#specification-re-use">レスポンスの仕様</a> として指定することもできます。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_default_values">10. Default values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>初期設定の REST Assured はリクエストを localhost の 8080 番ポートに送信します。<br>
リクエストを送信するポート番号を変更したい場合は次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().port(<span class="integer">80</span>). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>単純にポート番号を含むURLを指定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">..when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://myhost.org:80/doSomething</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>全てのリクエストで使用する URI、パス、ポート番号、認証方式を変更できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.baseURI = <span class="string"><span class="delimiter">&quot;</span><span class="content">http://myhost.org</span><span class="delimiter">&quot;</span></span>;
RestAssured.port = <span class="integer">80</span>;
RestAssured.basePath = <span class="string"><span class="delimiter">&quot;</span><span class="content">/resource</span><span class="delimiter">&quot;</span></span>;
RestAssured.authentication = basic(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>);
RestAssured.rootPath = <span class="string"><span class="delimiter">&quot;</span><span class="content">x.y.z</span><span class="delimiter">&quot;</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合、<code>get("/hello")</code> というコードは、"username" と "password" を資格情報とするベーシック認証で <code>http://myhost.org:80/resource/hello</code> に GET リクエストを送信します。<br>
<code>rootPath</code> について詳しくは <a href="#root-path">ルートパス</a> を参照してください。</p>
</div>
<div class="paragraph">
<p>他にもいろいろな初期値を変更できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.filters(..); <span class="comment">// フィルターのリスト</span>
RestAssured.requestSpecification = .. <span class="comment">// リクエストの仕様</span>
RestAssured.responseSpecification = .. <span class="comment">// レスポンスの仕様</span>
RestAssured.urlEncodingEnabled = .. <span class="comment">// リクエストパラメータの URL エンコードの有効化</span>
RestAssured.defaultParser = .. <span class="comment">// 未対応の content-type に対するレスポンス本文のパーサー</span>
RestAssured.registerParser(..) <span class="comment">// content-type に対応するパーサー</span>
RestAssured.unregisterParser(..) <span class="comment">// content-type から除外するパーサー</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>reset</code> メソッドは、それぞれの設定値を初期値に戻します（baseURI（localhost）、basePath（なし）、ポート番号（8080）、ルートパス（なし）、認証方式（なし）、URL エンコーディング（有効））。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.reset();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specification_re_use">11. Specification Re-use</h2>
<div class="sectionbody">
<div class="paragraph">
<p>いくつものテストで同じレスポンスの期待値やリクエストパラメータを重複させる代わりに、仕様として再利用できます。<br>
リクエストの仕様は <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/builder/RequestSpecBuilder.html">RequestSpecBuilder</a> で、レスポンスの仕様は <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/builder/ResponseSpecBuilder.html">ResponseSpecBuilder</a> で定義できます。</p>
</div>
<div class="paragraph">
<p>ステータスコードの期待値が 200、レスポンス本文の期待値が JSON 配列 <code>x.y</code> の要素数が2であることとするレスポンスの仕様は、次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ResponseSpecBuilder builder = <span class="keyword">new</span> ResponseSpecBuilder();
builder.expectStatusCode(<span class="integer">200</span>);
builder.expectBody(<span class="string"><span class="delimiter">&quot;</span><span class="content">x.y.size()</span><span class="delimiter">&quot;</span></span>, is(<span class="integer">2</span>));
ResponseSpecification responseSpec = builder.build();

<span class="comment">// &quot;responseSpec&quot; は他のテストでも再利用できます</span>
when()
   .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/something</span><span class="delimiter">&quot;</span></span>)
.then()
   .spec(responseSpec)
   .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">x.y.z</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">something</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>この例では、"responseSpec" として定義したレスポンス本文に関する期待値に、このテスト特有の期待値をマージすることになります。<br>
全ての期待値を満たさなければテストは成功しません。</p>
</div>
<div class="paragraph">
<p>複数のテストで再利用するべきリクエストデータも同じように定義できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RequestSpecBuilder builder = <span class="keyword">new</span> RequestSpecBuilder();
builder.addParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">parameter1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">parameterValue</span><span class="delimiter">&quot;</span></span>);
builder.addHeader(<span class="string"><span class="delimiter">&quot;</span><span class="content">header1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">headerValue</span><span class="delimiter">&quot;</span></span>);
RequestSpecification requestSpec = builder.build();

given()
    .spec(requestSpec)
    .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">parameter2</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">paramValue</span><span class="delimiter">&quot;</span></span>)
.when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/something</span><span class="delimiter">&quot;</span></span>)
.then()
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">x.y.z</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">something</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>この例でも "requestSpec" として定義した内容に、このテスト特有の内容をマージすることになります。<br>
従って、このテストでは1つの HTTP ヘッダー "header1" と2つのリクエストパラメータ "parameter1" `"parameter2" を含むリクエストを送信することになります。</p>
</div>
<div class="sect2">
<h3 id="_querying_requestspecification">11.1. Querying RequestSpecification</h3>
<div class="paragraph">
<p><code>RequestSpecification</code> に定義した値を参照したり抽出したりできると役に立つ場合があります。<br>
 そういう場合は <code>io.restassured.specification.SpecificationQuerier</code> を使用します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RequestSpecification spec = ...
QueryableRequestSpecification queryable = SpecificationQuerier.query(spec);
<span class="predefined-type">String</span> headerValue = queryable.getHeaders().getValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">header</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">String</span> param = queryable.getFormParams().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">someparam</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_filters">12. Filters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>フィルターを使うと、コミットする前のリクエストや、期待値と突き合わせて評価する前のリクエストを検証したり、変更したりできるようになります。<br>
AOP（アスペクト指向プログラミング）における "around advice" のように考えることができます。<br>
フィルターは、独自の認証方式やセッション管理、ログ出力を実現するためにも使用できます。<br>
独自のフィルターを作成するときは <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/filter/Filter.html">io.restassured.filter.Filter</a> を実装します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().filter(<span class="keyword">new</span> MyFilter()). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>REST Assured では次のようなフィルターを利用できるようになっています。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>io.restassured.filter.log.RequestLoggingFilter</code>: リクエストの仕様について、詳細な内容を出力します</p>
</li>
<li>
<p><code>io.restassured.filter.log.ResponseLoggingFilter</code>: 指定されたステータスコードの一致するレスポンスについて、詳細な内容を出力します。</p>
</li>
<li>
<p><code>io.restassured.filter.log.ErrorLoggingFilter</code>: エラーレスポンスを受信した場合（ステータスコードが 400 以上 500 未満の場合）、レスポンスの詳細な内容を出力します</p>
</li>
</ol>
</div>
<h4 id="_ordered_filters" class="discrete">Ordered Filters</h4>
<div class="paragraph">
<p>REST Assured 3.0.2 から、 <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/filter/OrderedFilter.html">io.restassured.filter.OrderedFilter</a> を実装することで、フィルターの適用順序を制御できるようになりました。<br>
<code>getOrder</code> メソッドの返す数値がフィルターの優先順位になります。<br>
小さいほど優先順位が高くなります。<br>
つまり、<code>Integer.MIN_VALUE</code> の優先順位は最高、<code>Inteer.MAX_VALUE</code> の優先順位は最低です。<br>
<code>OrderedFilter</code> を実装していないフィルターの優先順位は <code>getOrder</code> メソッドが <code>1000</code> を返す場合と同じになります。</p>
</div>
<div class="paragraph">
<p><code>OrderedFilter</code> の使い方を知りたければ <a href="https://github.com/rest-assured/rest-assured/blob/master/examples/rest-assured-itest-java/src/test/java/io/restassured/itest/java/OrderedFilterITest.java">サンプルコード</a> を参照してください。</p>
</div>
<h4 id="_response_builder" class="discrete">Response Builder</h4>
<div class="paragraph">
<p>フィルターで <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/response/Response.html">レスポンスオブジェクト</a> を変更するときは、 <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/builder/ResponseBuilder.html">ResponseBuilder</a> で元のレスポンスオブジェクトから新しいオブジェクトを作成しなければなりません。<br>
例えば、レスポンス本文を "something" に変更したいときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Response newResponse = <span class="keyword">new</span> ResponseBuilder().clone(originalResponse).setBody(<span class="string"><span class="delimiter">&quot;</span><span class="content">Something</span><span class="delimiter">&quot;</span></span>).build();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logging">13. Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>リクエストやレスポンスの詳細な内容を出力することが、正しい期待値や正しいリクエストを作成するのに役立つ場合があります。<br>
そういう場合は REST Assured に組み込みのフィルターを使えば簡単です。</p>
</div>
<div class="sect2">
<h3 id="_request_logging">13.1. Request Logging</h3>
<div class="paragraph">
<p>REST Assured 1.5 から、 <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/filter/log/RequestLoggingFilter.html">RequestLoggingFilter</a> で実際にサーバーへ送信する前にリクエストの仕様をログに出力できるようになりました。<br>
HTTP Builder や HTTP Client の追加した HTTP ヘッダーも出力するので注意してください。<br>
ただし、このフィルターは基本的にリクエストの仕様に定義した内容 <em>だけ</em> を出力するようになっています。<br>
実際にサーバーへ送信するリクエストの内容そのものではないということです。<br>
また、<code>RequestLoggingFilter</code> より優先度の低いフィルターが変更した内容は出力できません。</p>
</div>
<div class="paragraph">
<p>サーバーに送信したリクエストと <em>完全に同じ内容</em> をログに出力したいときは、 <a href="http://hc.apache.org/httpcomponents-client-ga/logging.html">HTTP Client のログ出力</a> を検討するか、 <a href="http://www.wireshark.org/">Wireshark</a> などのツール利用を検討してください。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().log().all(). .. <span class="comment">// リクエストの仕様に定義したリクエストパラメータ、HTTP ヘッダー、リクエスト本文等、全てをログに出力します。</span>
given().log().params(). .. <span class="comment">// リクエストパラメータだけをログに出力します。</span>
given().log().body(). .. <span class="comment">// リクエスト本文だけをログに出力します。</span>
given().log().headers(). .. <span class="comment">// HTTP ヘッダーだけをログに出力します。</span>
given().log().cookies(). .. <span class="comment">// HTTP Cookie だけをログに出力します。</span>
given().log().method(). .. <span class="comment">// リクエストメソッドだけをログに出力します。</span>
given().log().path(). .. <span class="comment">// パスだけをログに出力します。</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_response_logging">13.2. Response Logging</h3>
<div class="paragraph">
<p>ステータスコードの値を無視してレスポンス本文をログに出力させたいときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().log().body() ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコード例では、たとえエラーレスポンスでもレスポンス本文をログに出力します。<br>
エラーレスポンスの場合だけログに出力したい場合は次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().log().ifError(). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>ステータスラインや HTTP ヘッダー、HTTP Cookie など全ての詳細な内容をログに出力したいときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().log().all(). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>ステータスラインだけ、HTTP ヘッダーだけ、HTTP Cookie だけをログに出力したいときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().log().statusLine(). .. <span class="comment">// ステータスラインだけをログに出力します。</span>
get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().log().headers(). .. <span class="comment">// HTTP ヘッダーだけをログに出力します。</span>
get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().log().cookies(). .. <span class="comment">// HTTP Cookie だけをログに出力します。</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>ステータスコードが指定した値に一致する、あるいは指定した条件と一致する場合だけログを出力したいときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().log().ifStatusCodeIsEqualTo(<span class="integer">302</span>). .. <span class="comment">// ステータスコードが 302 のときだけログに出力します。</span>
get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().log().ifStatusCodeMatches(matcher). .. <span class="comment">// ステータスコードが Hamcrest マッチャーで真になったときだけログに出力します。</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_log_if_validation_fails">13.3. Log if validation fails</h3>
<div class="paragraph">
<p>REST Assured 2.3.1 から、バリデーションに失敗した場合だけリクエストやレスポンスをログに出力できるようになりました。</p>
</div>
<div class="paragraph">
<p>リクエストをログに出力するときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().log().ifValidationFails(). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>レスポンスをログに出力するときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">.. .then().log().ifValidationFails(). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>リクエストとレスポンスのログ出力を同じように制御するには、 <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/LogConfig.html">LogConfig</a> を設定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().config(RestAssured.config().logConfig(logConfig().enableLoggingOfRequestAndResponseIfValidationFails(HEADERS))). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコード例では、バリデーションが失敗したとき、HTTP ヘッダーだけをログに出力します。</p>
</div>
<div class="paragraph">
<p>全てのテストについて、バリデーションが失敗したときリクエストとレスポンスをログに出力させるには、次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.enableLoggingOfRequestAndResponseIfValidationFails();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_blacklist_headers_from_logging">13.4. Blacklist Headers from Logging</h3>
<div class="paragraph">
<p>REST Assured 4.2.0 から、リクエストやレスポンスをログに出力するとき、ログに出力させない HTTP ヘッダーの不許可リストを設定できるようになりました。<br>
HTTP ヘッダーの値には、実際の値の代わりに <code>[ BLACKLISTED ]</code> を出力するようになります。<br>
<a href="https://www.javadoc.io/doc/io.rest-assured/rest-assured/latest/io/restassured/config/LogConfig.html">LogConfig</a> で設定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().config(config().logConfig(logConfig().blacklistHeader(<span class="string"><span class="delimiter">&quot;</span><span class="content">Accept</span><span class="delimiter">&quot;</span></span>))). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合、レスポンスは次のようにログへ出力されます。</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Request method:   GET
Request URI:    http://localhost:8080/something
Proxy:          &lt;none&gt;
Request params: &lt;none&gt;
Query params:   &lt;none&gt;
Form params:    &lt;none&gt;
Path params:    &lt;none&gt;
Headers:        Accept=[ BLACKLISTED ]
Cookies:        &lt;none&gt;
Multiparts:     &lt;none&gt;
Body:           &lt;none&gt;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_root_path">14. Root path</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ルートパスを指定して、レスポンス本文の期待値に記述するパスの重複を減らすことができます。</p>
</div>
<div class="paragraph">
<p>ルートパスを指定しない場合は次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">when()
     .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/something</span><span class="delimiter">&quot;</span></span>)
.then()
     .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">x.y.firstName</span><span class="delimiter">&quot;</span></span>, is(..))
     .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">x.y.lastName</span><span class="delimiter">&quot;</span></span>, is(..))
     .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">x.y.age</span><span class="delimiter">&quot;</span></span>, is(..))
     .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">x.y.gender</span><span class="delimiter">&quot;</span></span>, is(..));</code></pre>
</div>
</div>
<div class="paragraph">
<p>ルートパスを指定すると次のように記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/something</span><span class="delimiter">&quot;</span></span>)
.then()
     .root(<span class="string"><span class="delimiter">&quot;</span><span class="content">x.y</span><span class="delimiter">&quot;</span></span>). <span class="comment">// &quot;root&quot; メソッドで指定します</span>
     .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>, is(..))
     .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>, is(..))
     .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>, is(..))
     .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">gender</span><span class="delimiter">&quot;</span></span>, is(..));</code></pre>
</div>
</div>
<div class="paragraph">
<p>既定のルートパスを設定することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.rootPath = <span class="string"><span class="delimiter">&quot;</span><span class="content">x.y</span><span class="delimiter">&quot;</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>既定のルートパスを延長できると、複雑なユースケースで役立つ場合があります。<br>
ルートパスは <code>appendRoot</code> メソッドで追加できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">when()
     .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/jsonStore</span><span class="delimiter">&quot;</span></span>)
.then()
     .root(<span class="string"><span class="delimiter">&quot;</span><span class="content">store.%s</span><span class="delimiter">&quot;</span></span>, withArgs(<span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>))
     .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">category.size()</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">4</span>))
     .appendRoot(<span class="string"><span class="delimiter">&quot;</span><span class="content">%s.%s</span><span class="delimiter">&quot;</span></span>, withArgs(<span class="string"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">size()</span><span class="delimiter">&quot;</span></span>))
     .body(withNoArgs(), equalTo(<span class="integer">4</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>途中でルートパスを縮小することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">when()
     .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/jsonStore</span><span class="delimiter">&quot;</span></span>)
.then()
     .root(<span class="string"><span class="delimiter">&quot;</span><span class="content">store.category</span><span class="delimiter">&quot;</span></span>)
     .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">size()</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">4</span>))
     .detachRoot(<span class="string"><span class="delimiter">&quot;</span><span class="content">category</span><span class="delimiter">&quot;</span></span>)
     .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">size()</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">1</span>));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_path_arguments">15. Path arguments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>定義済みの変数を組み合わせてパスを構成しているときは、パス引数形式にしたほうが便利な場合があります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> someSubPath = <span class="string"><span class="delimiter">&quot;</span><span class="content">else</span><span class="delimiter">&quot;</span></span>;
<span class="type">int</span> index = <span class="integer">1</span>;
get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).then().body(<span class="string"><span class="delimiter">&quot;</span><span class="content">something.%s[%d]</span><span class="delimiter">&quot;</span></span>, withArgs(someSubPath, index), equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">some value</span><span class="delimiter">&quot;</span></span>)). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコード例では、レスポンス本文の <code>something.else[0]</code> が "some value" と一致することを検証できます。</p>
</div>
<div class="paragraph">
<p>一部だけ異なる複雑な <a href="#root-path">ルートパス</a> の重複した記述を減らすために使うこともできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">when()
   .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>)
.then()
   .root(<span class="string"><span class="delimiter">&quot;</span><span class="content">filters.filterConfig[%d].filterConfigGroups.find { it.name == 'GroupName' }.includes</span><span class="delimiter">&quot;</span></span>)
   .body(withArgs(<span class="integer">0</span>), hasItem(<span class="string"><span class="delimiter">&quot;</span><span class="content">first</span><span class="delimiter">&quot;</span></span>))
   .body(withArgs(<span class="integer">1</span>), hasItem(<span class="string"><span class="delimiter">&quot;</span><span class="content">second</span><span class="delimiter">&quot;</span></span>)).
       ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>パス引数の記法は Java の <a href="https://docs.oracle.com/javase/jp/8/docs/api/java/util/Formatter.html">書式付き出力</a> と同じです。</p>
</div>
<div class="paragraph">
<p><code>withArgs</code> メソッドを使うには <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/RestAssured.html">io.restassured.RestAssured</a> クラスの static imoprt が必要です。</p>
</div>
<div class="paragraph">
<p>ルートパスに記述された全ての引数がそろっているなら、引数無しでレスポンス本文を検証できるようにしたほうが便利でしょう。<br>
そういうときは <code>withNoArgs</code> メソッドを使います。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">when()
     .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/jsonStore</span><span class="delimiter">&quot;</span></span>)
.then()
     .root(<span class="string"><span class="delimiter">&quot;</span><span class="content">store.%s</span><span class="delimiter">&quot;</span></span>, withArgs(<span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>))
     .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">category.size()</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">4</span>))
     .appendRoot(<span class="string"><span class="delimiter">&quot;</span><span class="content">%s.%s</span><span class="delimiter">&quot;</span></span>, withArgs(<span class="string"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">size()</span><span class="delimiter">&quot;</span></span>))
     .body(withNoArgs(), equalTo(<span class="integer">4</span>));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_session_support">16. Session support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST Assured は単純なセッション管理機能を提供しています。<br>
セッションIDを指定するDSLは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().sessionId(<span class="string"><span class="delimiter">&quot;</span><span class="content">1234</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>次のように記述した場合と同じことをしています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().cookie(<span class="string"><span class="delimiter">&quot;</span><span class="content">JSESSIONID</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">1234</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>全てのリクエストに指定するセッションIDの初期値をクラスメンバ変数に設定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.sessionId = <span class="string"><span class="delimiter">&quot;</span><span class="content">1234</span><span class="delimiter">&quot;</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>初期設定では HTTP Cookie の <code>JSESSIONID</code> からセッションIDを取得します。<br>
取得元は <a href="#session-config">SessionConfig</a> で変更できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config().sessionConfig(<span class="keyword">new</span> SessionConfig().sessionIdName(<span class="string"><span class="delimiter">&quot;</span><span class="content">phpsessionid</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>RequestSpecBuilder</code> でセッションIDを定義して、他のテストで再利用することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RequestSpecBuilder spec = <span class="keyword">new</span> RequestSpecBuilder().setSessionId(<span class="string"><span class="delimiter">&quot;</span><span class="content">value1</span><span class="delimiter">&quot;</span></span>).build();

<span class="comment">// 最初のリクエストで送信するセッションIDは &quot;value1&quot;</span>
given().spec(spec). ..
<span class="comment">// 二回目のリクエストで送信するセッションIDも &quot;value1&quot;</span>
given().spec(spec). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>もちろん、レスポンスオブジェクトからセッションIDを取得できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> sessionId = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/something</span><span class="delimiter">&quot;</span></span>).sessionId();</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_session_filter">16.1. Session Filter</h3>
<div class="paragraph">
<p>REST Assured 2.0.0 から、 <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/filter/session/SessionFilter.html">SessionFilter</a> でセッションIDの取得と送信を自動化できるようになりました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">SessionFilter sessionFilter = <span class="keyword">new</span> SessionFilter();

given()
    .auth().form(<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>)
    .filter(sessionFilter)
.when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/formAuth</span><span class="delimiter">&quot;</span></span>)
.then()
    .statusCode(<span class="integer">200</span>);


given()
    .filter(sessionFilter) <span class="comment">// 直前のレスポンスから取得したセッションIDを再利用する</span>
.when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>)
.then()
    .statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>SessionFilter</code> の取得したセッションIDは次のように参照できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> sessionId = sessionFilter.getSessionId();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ssl">17. SSL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HTTP Builder や HTTP Client の提供する素晴らしい機能のおかげで、ほとんどの場合何もしなくても SSL を利用できるようになっています。<br>
それでも、通信に失敗する場合はあります。<br>
サーバーが不正な証明書を使っている場合は <code>SSLPeerUnverifiedException</code> が発生します。<br>
簡単な回避策は <code>relaxedHTTPSValidation</code> で HTTPS のバリデーションを緩和することです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().relaxedHTTPSValidation().when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">https://some_server.com</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>全てのリクエストについて設定することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.useRelaxedHTTPSValidation();</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#specification-re-use">リクエストの仕様</a> で設定することもできます。</p>
</div>
<div class="paragraph">
<p>次のコード例では <code>SSLContext</code> のプロトコルとして <code>SSL</code> を使用しています。<br>
<code>relaxedHTTPSValidation</code> のオーバーロードメソッドでは別のプロトコルを指定できるのです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().relaxedHTTPSValidation(<span class="string"><span class="delimiter">&quot;</span><span class="content">TLS</span><span class="delimiter">&quot;</span></span>).when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">https://some_server.com</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>自分で作成した Java キーストアファイルを使用するより詳細な設定もできるようになっています。<br>
それほど難しいことではありませんが、 <a href="https://github.com/jgritman/httpbuilder/wiki/SSL">HTTP Builder の SSL に関する説明</a> を読んでおくといいでしょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().keystore(<span class="string"><span class="delimiter">&quot;</span><span class="content">/pathToJksInClassPath</span><span class="delimiter">&quot;</span></span>, &lt;password&gt;). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>全てのリクエストについて設定することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.keystore(<span class="string"><span class="delimiter">&quot;</span><span class="content">/pathToJksInClassPath</span><span class="delimiter">&quot;</span></span>, &lt;password&gt;);</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#specification-re-use">リクエストの仕様</a> で設定することもできます。</p>
</div>
<div class="paragraph">
<p>パスワード付きのキーストアを読み込んでからトラストストアへ設定することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.trustStore(keystore);</code></pre>
</div>
</div>
<div class="paragraph">
<p>使い方は <a href="https://github.com/rest-assured/rest-assured/blob/master/examples/rest-assured-itest-java/src/test/java/io/restassured/itest/java/SSLITest.java">サンプルコード</a> を参照してください。</p>
</div>
<div class="paragraph">
<p>より高度な SSL の設定をするときは <a href="#ssl-config">SSL の設定</a> を参照してください。</p>
</div>
<div class="sect2">
<h3 id="_ssl_invalid_hostname">17.1. SSL invalid hostname</h3>
<div class="paragraph">
<p>REST Assured 2.2.0 から、サーバー証明書のホスト名とアクセスするホスト名が一致しない場合でも、Java キーストアファイルを作成、インポートしなくてもよくなりました。</p>
</div>
<div class="paragraph">
<p>全てのリクエストについて設定するときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config().sslConfig(sslConfig().allowAllHostnames());</code></pre>
</div>
</div>
<div class="paragraph">
<p>単独のリクエストについて設定するときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().config(RestAssured.config().sslConfig(sslConfig().allowAllHostnames())). .. ;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>relaxedHTTPSValidation</code> を有効化した場合、<code>allowAllHostnames</code> も有効になっているので注意してください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_url_encoding">18. URL Encoding</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST Assured は自動的に URL エンコード処理をするので、基本的には考慮する必要がありません。<br>
URL エンコード処理を無効にするときはそのための設定が必要です。<br>
具体的には、URL エンコードされている値を REST Assured のパラメータとして渡す場合があるでしょう。<br>
URL エンコードを二重に適用しないよう、REST Assured の URL エンコード処理を無効にしなければならないのです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span> response = given()
    .urlEncodingEnabled(<span class="predefined-constant">false</span>)
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">https://jira.atlassian.com:443/rest/api/2.0.alpha1/search?jql=project%20=%20BAM%20AND%20issuetype%20=%20Bug</span><span class="delimiter">&quot;</span></span>)
    .asString();
..</code></pre>
</div>
</div>
<div class="paragraph">
<p>全てのリクエストについて設定するときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.baseURI = <span class="string"><span class="delimiter">&quot;</span><span class="content">https://jira.atlassian.com</span><span class="delimiter">&quot;</span></span>;
RestAssured.port = <span class="integer">443</span>;
RestAssured.urlEncodingEnabled = <span class="predefined-constant">false</span>;
<span class="directive">final</span> <span class="predefined-type">String</span> query = <span class="string"><span class="delimiter">&quot;</span><span class="content">project%20=%20BAM%20AND%20issuetype%20=%20Bug</span><span class="delimiter">&quot;</span></span>;
<span class="predefined-type">String</span> response = get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/rest/api/2.0.alpha1/search?jql={q}</span><span class="delimiter">&quot;</span></span>, query);
..</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_proxy_configuration">19. Proxy Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST Assured 2.3.2 ではプロキシ対応機能を改善しました。</p>
</div>
<div class="paragraph">
<p>localhost の 8888 番ポートを指定するときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().proxy(<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span>, <span class="integer">8888</span>). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>プロキシホストが localhost の場合はポート番号を指定するだけでも動作します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().proxy(<span class="integer">8888</span>). .. <span class="comment">// Will assume localhost</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>HTTPS でアクセスする必要があるときは、3番目の引数にプロトコルスキーマを指定するか、<code>io.restassured.specification.ProxySpecification</code> を使用します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().proxy(host(<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span>).withScheme(<span class="string"><span class="delimiter">&quot;</span><span class="content">https</span><span class="delimiter">&quot;</span></span>)). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>host</code> メソッドは <code>io.restassured.specification.ProxySpecification</code> のクラスメソッドです。</p>
</div>
<div class="paragraph">
<p>REST Assured 2.7.0 から、プリエンプティブベーシック認証でプロキシに接続できるようになりました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().proxy(auth(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>)).when() ..</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>auth</code> メソッドは <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/specification/ProxySpecification.html">io.restassured.specification.ProxySpecification</a> のクラスメソッドです。</p>
</div>
<div class="paragraph">
<p><code>host</code> メソッドで別のホスト名を指定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().proxy(host(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://myhost.org</span><span class="delimiter">&quot;</span></span>).withAuth(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>)). ..</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_static_proxy_configuration">19.1. Static Proxy Configuration</h3>
<div class="paragraph">
<p>全てのリクエストについて設定するときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.proxy(<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span>, <span class="integer">8888</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>次のように記述することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.proxy = host(<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span>).withPort(<span class="integer">8888</span>);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_request_specification_proxy_configuration">19.2. Request Specification Proxy Configuration</h3>
<div class="paragraph">
<p>リクエストの仕様へプロキシ接続を設定することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RequestSpecification specification = <span class="keyword">new</span> RequestSpecBuilder().setProxy(<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span>).build();
given().spec(specification). ..</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_detailed_configuration">20. Detailed configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/RestAssuredConfig.html">RestAssuredConfig</a> で次のような内容を設定できます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP Client - <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/HttpClientConfig.html">HTTPClientConfig</a> および <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/RedirectConfig.html">RedirectConfig</a></p>
</li>
<li>
<p>Log - <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/LogConfig.html">LogConfig</a></p>
</li>
<li>
<p>Encoder - <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/EncoderConfig.html">EncoderConfig</a></p>
</li>
<li>
<p>Decoder - <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/DecoderConfig.html">DecoderConfig</a></p>
</li>
<li>
<p>Session - <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/SessionConfig.html">SessionConfig</a></p>
</li>
<li>
<p>ObjectMapper - <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/ObjectMapperConfig.html">ObjectMapperConfig</a></p>
</li>
<li>
<p>Connection- <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/ConnectionConfig.html">ConnectionConfig</a></p>
</li>
<li>
<p>SSL- <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/SSLConfig.html">SSLConfig</a></p>
</li>
<li>
<p>Parameter- <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/ParamConfig.html">ParamConfig</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>単独のリクエストには次のように設定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().config(RestAssured.config().redirect(redirectConfig().followRedirects(<span class="predefined-constant">false</span>))). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>RequestSpecBuilder</code> には次のように設定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RequestSpecification spec = <span class="keyword">new</span> RequestSpecBuilder().setConfig(
    RestAssured.config().redirect(
        redirectConfig().followRedirects(<span class="predefined-constant">false</span>)))
.build();</code></pre>
</div>
</div>
<div class="paragraph">
<p>全てのリクエストを対象とするには次のように設定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = config().redirect(
    redirectConfig().followRedirects(<span class="predefined-constant">true</span>).and().maxRedirects(<span class="integer">0</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>config</code> メソッドや <code>newConfig</code> メソッドは <code>io.restassured.config.RestAssuredConfig</code> のクラスメソッドです。</p>
</div>
<div class="sect2">
<h3 id="_encoder_config">20.1. Encoder Config</h3>
<div class="paragraph">
<p><a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/EncoderConfig.html">EncoderConfig</a> では、コンテンツとクエリパラメータで使用する文字エンコーディングと文字セットを指定できます（指定しなかった場合は HTTP ヘッダー content-type の値に従います）。<br>
コンテンツの文字セットを指定しなかった場合、<code>ISO-8859-1</code> になります。<br>
クエリパラメータの文字セットを指定しなかった場合、<code>UTF-8</code> になります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config().encoderConfig(
    encoderConfig().defaultContentCharset(<span class="string"><span class="delimiter">&quot;</span><span class="content">US-ASCII</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>EncoderConfig</code> の <code>defaultCharsetForContentType</code> メソッドを使うと、content-type に文字セットが指定されていなかった場合に使用する文字セットのエンコーダを、content-type ごとに定義できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config(
    config().encoderConfig(
        encoderConfig().defaultCharsetForContentType(<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-16</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>)));</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコード例では、content-type の "application/xml" へ文字セットが明示的に指定されなかった場合、<code>UTF-16</code> として扱います。<br>
なお、"application/json" の既定の文字セットは <a href="https://www.ietf.org/rfc/rfc4627.txt">RFC4627</a> で定義されており、<code>UTF-8</code> として扱います。</p>
</div>
<div class="sect3">
<h4 id="_avoid_adding_the_charset_to_content_type_header_automatically">20.1.1. Avoid adding the charset to content-type header automatically</h4>
<div class="paragraph">
<p>REST Assured は自動的に文字セットのための HTTP ヘッダーを自動的に追加します。<br>
この振る舞いを無効化するには <code>EditorConfig</code> で設定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config(
    config().encoderConfig(
        encoderConfig().appendDefaultContentCharsetToContentTypeIfUndefined(<span class="predefined-constant">false</span>)));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_decoder_config">20.2. Decoder Config</h3>
<div class="paragraph">
<p><a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/DecoderConfig.html">DecoderConfig</a> では全てのレスポンスについて、コンテンツをデコードするときの既定の文字セットを設定できます。<br>
既定の文字セットである <code>ISO-8859-1</code> 以外の文字セットを想定している場合や、レスポンスの content-type で文字セットが指定されていなかった場合に役立ちます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config().decoderConfig(
    decoderConfig().defaultContentCharset(<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>特定のデコーダを指定することもできます。<br>
この設定をすると、リクエストの HTTP ヘッダーに <code>Accept-Encoding</code> を自動的に追加し、レスポンス本文も自動的にデコードします。<br>
組み込みのデコーダとして <code>GZIP</code> と <code>DEFLATE</code> が利用できるようになっています。</p>
</div>
<div class="paragraph">
<p><code>GZIP</code> の代わりに <code>DEFLATE</code> を使用する場合は次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().config(RestAssured.config().decoderConfig(
    decoderConfig().contentDecoders(DEFLATE))). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>DecoderConfig</code> の <code>defaultCharsetForContentType</code> メソッドを使うと、content-type に文字セットが指定されていなかった場合に使用する文字セットのデコーダーを、content-type ごとに定義できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config(
    config().decoderConfig(
        decoderConfig().defaultCharsetForContentType(<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-16</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>)));</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコード例では、content-type の "application/xml" へ文字セットが明示的に指定されなかった場合、<code>UTF-16</code> として扱います。<br>
なお、"application/json" の既定の文字セットは <a href="https://www.ietf.org/rfc/rfc4627.txt">RFC4627</a> で定義されており、<code>UTF-8</code> として扱います。</p>
</div>
</div>
<div class="sect2">
<h3 id="_session_config">20.3. Session Config</h3>
<div class="paragraph">
<p><code>SessionConfig</code> はセッションIDの受け渡しに使う既定のパラメータ名を設定できます。<br>
初期値は <code>JSESSIONID</code> です。<br>
違う名前を使用するアプリケーションで <a href="#session-support">セッション管理機能</a> を使いたい場合は設定しなければなりません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config().sessionConfig(
    <span class="keyword">new</span> SessionConfig().sessionIdName(<span class="string"><span class="delimiter">&quot;</span><span class="content">phpsessionid</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_redirect_dsl">20.4. Redirect DSL</h3>
<div class="paragraph">
<p>リダイレクトの振る舞いは DSL で設定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().redirects().max(<span class="integer">12</span>).and().redirects().follow(<span class="predefined-constant">true</span>).when(). ..</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_connection_config">20.5. Connection Config</h3>
<div class="paragraph">
<p>REST Assured は HTTP 接続のための設定を変更できます。<br>
例えば、Apache HTTP Client でレスポンスを受信するたびに強制的に HTTP 接続を閉じるようにできます。<br>
小さいレスポンスを返すリクエストを、大量に、高速に、連続して送信したい場合などが該当します。<br>
もちろん、いくつかの塊として（巨大な）データを受信しているときは、レスポンスを受信してすぐに HTTP 接続を閉じてはいけません。<br>
初期設定ではレスポンスを受信するたびに <em>HTTP 接続を閉じない</em> ようになっています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config().connectionConfig(c
    onnectionConfig().closeIdleConnectionsAfterEachResponse());</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_json_config">20.6. Json Config</h3>
<div class="paragraph">
<p><a href="https://javadoc.io/doc/io.rest-assured/json-path/latest/io/restassured/path/json/config/JsonPathConfig.html">JsonPathConfig</a> は REST Assured だけでなく、 <a href="https://javadoc.io/doc/io.rest-assured/json-path/latest/io/restassured/path/json/JsonPath.html">JsonPath</a> を単独で使用する場合の設定を変更できます。</p>
</div>
<div class="paragraph">
<p>次のコード例では JSON number の扱いを変更しています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config().jsonConfig(
    jsonConfig().numberReturnType(NumberReturnType.BIG_DECIMAL))</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_http_client_config">20.7. HTTP Client Config</h3>
<div class="paragraph">
<p>REST Assured が HTTP リクエストを送信するために使用している HTTP Client インスタンスの設定を変更できます。<br>
初期設定では <code>given</code> メソッドが毎回新しいインスタンスを作成するようになっています。</p>
</div>
<div class="paragraph">
<p>作成したインスタンスを再利用できるようにするときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config().httpClient(
    httpClientConfig().reuseHttpClientInstance());</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>httpClientFactory</code> メソッドで独自の HTTP Client インスタンスを指定することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config().httpClient(
    httpClientConfig().httpClientFactory(
         <span class="keyword">new</span> HttpClientConfig.HttpClientFactory() {

            <span class="annotation">@Override</span>
            <span class="directive">public</span> HttpClient createHttpClient() {
                <span class="keyword">return</span> <span class="keyword">new</span> SystemDefaultHttpClient();
            }
        }));</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>注意：今は <code>AbstractHttpClient</code> のインスタンスしか指定できません。</strong></p>
</div>
<div class="paragraph">
<p>もちろん、HTTP Client インスタンスの初期値を設定することもできます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_ssl_config">20.8. SSL Config</h3>
<div class="paragraph">
<p><a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/SSLConfig.html">SSLConfig</a> は、キーストアの種類やトラストストア、ホスト名検証器等、SSL の細かい設定を変更できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssured.config = RestAssured.config().sslConfig(
    sslConfig()
    .with()
        .keystoreType(&lt;type&gt;)
    .and()
        .strictHostnames());</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_param_config">20.9. Param Config</h3>
<div class="paragraph">
<p><a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/ParamConfig.html">ParamConfig</a> はパラメータの種類ごとに、パラメータ名が衝突した場合の処理を変更できます。<br>
初期設定では全ての値をマージするようになっています。</p>
</div>
<div class="paragraph">
<p>次のコード例では、REST Assured の送信するクエリ文字列は <code>param1=value1&amp;param1=value2</code> になります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().queryParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">param1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value1</span><span class="delimiter">&quot;</span></span>).queryParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">param1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value2</span><span class="delimiter">&quot;</span></span>).when().get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>). ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>後に指定した値で同じ名前のパラメータを <em>上書き</em> したい場合は次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given()
    .config(config().paramConfig(paramConfig().queryParamsUpdateStrategy(REPLACE)))
    .queryParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">param1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value1</span><span class="delimiter">&quot;</span></span>)
    .queryParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">param1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">value2</span><span class="delimiter">&quot;</span></span>)
.when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合、REST Assured は全てのパラメータをマージする代わりに、 <code>param1</code> の値を <code>value2</code> に上書きします（最後に指定した値です）。</p>
</div>
<div class="paragraph">
<p>パラメータの種類に応じて個別に設定するのではなく、全てのパラメータ種類で同じ処理をさせたいときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().config(config().paramConfig(
    paramConfig().replaceAllParameters())). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>この機能は <a href="#spring-mock-mvc-module">Spring Mock Mvc モジュール</a> でも対応しています。<br>
ただし、<code>ParamConfig</code> の代わりに <a href="http://static.javadoc.io/io.rest-assured/spring-mock-mvc/latest/io/restassured/module/mockmvc/config/MockMvcParamConfig.html">MockMvcParamConfig</a> を使用します。</p>
</div>
</div>
<div class="sect2">
<h3 id="_failure_config">20.10. Failure Config</h3>
<div class="paragraph">
<p>REST Assured 3.3.0 からは、バリデーションが失敗した場合に実行するコールバック処理を <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/config/FailureConfig.html">FailureConfig</a> で指定できるようになりました。<br>
リクエストやレスポンス、あるいはそれぞれの仕様に、独自のログ出力やデータ保存処理を追加するのに役立ちます。</p>
</div>
<div class="paragraph">
<p>例として、次のテストを実行してステータスコードが 200 じゃなかったら電子メールで通知させてみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given()
    .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>)
.when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hello</span><span class="delimiter">&quot;</span></span>)
.then()
    statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/listener/ResponseValidationFailureListener.html">ResponseValidationFailureListener</a> を実装して <code>FailureConfig</code> に指定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ResponseValidationFailureListener emailOnFailure = (reqSpec, respSpec, resp) -&gt; emailService.sendEmail(
    <span class="string"><span class="delimiter">&quot;</span><span class="content">email@gmail.com</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Important test failed! Status code was: </span><span class="delimiter">&quot;</span></span> + resp.statusCode());

given()
    .config(RestAssured.config().failureConfig(
        failureConfig().with().failureListeners(emailOnFailure)))
    .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>)
.when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hello</span><span class="delimiter">&quot;</span></span>)
.then()
    statusCode(<span class="integer">200</span>);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_support">21. Spring Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring MVC のコントローラを REST Assured の API でテストするため、2種類のモジュールを提供しています。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#spring-mock-mvc-module">spring-mock-mvc</a> - <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html">Spring MVC</a> のコントローラのユニットテストに使用します。</p>
</li>
<li>
<p><a href="#spring-web-test-client-module">spring-web-test-client</a> - <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html">Spring Webflux</a> のコントローラのユニットテストに使用します。</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_spring_mock_mvc_module">21.1. Spring Mock Mvc Module</h3>
<div class="paragraph">
<p>REST Assured 2.2.0 から <a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/web/servlet/MockMvc.html">Spring Mock Mvc</a> に対応する <code>spring-mock-mvc</code> モジュールが使用できるようになりました。<br>
つまり、Spring MVC のコントローラのユニットテストができるようになったのです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">GreetingController</span> {

    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> template = <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, %s!</span><span class="delimiter">&quot;</span></span>;
    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">AtomicLong</span> counter = <span class="keyword">new</span> <span class="predefined-type">AtomicLong</span>();

    <span class="annotation">@RequestMapping</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">/greeting</span><span class="delimiter">&quot;</span></span>, method = GET)
    <span class="directive">public</span> <span class="annotation">@ResponseBody</span> Greeting greeting(
            <span class="annotation">@RequestParam</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, required=<span class="predefined-constant">false</span>, defaultValue=<span class="string"><span class="delimiter">&quot;</span><span class="content">World</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> name) {
        <span class="keyword">return</span> <span class="keyword">new</span> Greeting(counter.incrementAndGet(), <span class="predefined-type">String</span>.format(template, name));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>テストは <a href="http://static.javadoc.io/io.rest-assured/spring-mock-mvc/latest/io/restassured/module/mockmvc/RestAssuredMockMvc.html">RestAssuredMockMvc</a> で記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given()
    .standaloneSetup(<span class="keyword">new</span> GreetingController())
    .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Johan</span><span class="delimiter">&quot;</span></span>)
.when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greeting</span><span class="delimiter">&quot;</span></span>)
.then()
    .statusCode(<span class="integer">200</span>)
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">1</span>))
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, Johan!</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>REST Assured の基本的な記法そのままです。<br>
すごい短い時間でテストを実行できるだけでなく、基本的な REST Assured に比べて、環境の準備や、（必要なら）モックを使用するのが簡単になっています。<br>
基本的な REST Assured の準備に必要なことのほとんど（各種設定や仕様の準備、ロギング等）を <code>RestAssuredMockMvc</code> がやってくれるからです。</p>
</div>
<div class="paragraph">
<p>Maven プロジェクトなら次のような依存ライブラリを追加します。<br>
そうでなければ <a href="https://repo1.maven.org/maven2/io/rest-assured/spring-mock-mvc/latest/spring-mock-mvc-4.4.0.jar">jarファイル</a> をダウンロードしてクラスパスに配置します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>io.rest-assured<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-mock-mvc<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;version&gt;</span>4.4.0<span class="tag">&lt;/version&gt;</span>
      <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_bootstrapping_restassuredmockmvc">21.1.1. Bootstrapping RestAssuredMockMvc</h4>
<div class="paragraph">
<p>次のような import 文を追加するだけです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">io.restassured.module.mockmvc.RestAssuredMockMvc.*
io.restassured.module.mockmvc.matcher.RestAssuredMockMvcMatchers.*</code></pre>
</div>
</div>
<div class="paragraph">
<p>元の import 文は削除します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">io.restassured.RestAssured.*
io.restassured.matcher.RestAssuredMatchers.*</code></pre>
</div>
</div>
<div class="paragraph">
<p>他に必要な import 文があるなら <a href="#static-import">static import</a> のセクションを参照してください。</p>
</div>
<div class="paragraph">
<p><code>RestAssuredMockMvc</code> のテストを実行するときは、先にコントローラや <code>MockMvc</code> や <code>WebApplicationContext</code> を初期化しておかなければなりません。<br>
前のコード例で見たように、リクエストごとにもろもろの準備を実行できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().standaloneSetup(<span class="keyword">new</span> GreetingController()). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>クラスメソッドで実行することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssuredMockMvc.standaloneSetup(<span class="keyword">new</span> GreetingController());</code></pre>
</div>
</div>
<div class="paragraph">
<p>クラスメソッドで実行する場合、REST Assured の DSL でコントローラや <code>MockMvc</code> や <code>WebApplicationContext</code> のインスタンスを指定する必要はありません。<br>
その場合、最初のコード例は次のように記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given()
    .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Johan</span><span class="delimiter">&quot;</span></span>)
.when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greeting</span><span class="delimiter">&quot;</span></span>)
.then()
    .statusCode(<span class="integer">200</span>)
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">1</span>))
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, Johan!</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_asynchronous_requests">21.1.2. Asynchronous Requests</h4>
<div class="paragraph">
<p><code>RestAssured</code> と <code>RestAssuredMockMvc</code> は 2.5.0 からリクエストを非同期で送信できるようになりました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">PostAsyncController</span> {

    <span class="annotation">@RequestMapping</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">/stringBody</span><span class="delimiter">&quot;</span></span>, method = POST)
    <span class="directive">public</span> <span class="annotation">@ResponseBody</span>
    <span class="predefined-type">Callable</span>&lt;<span class="predefined-type">String</span>&gt; stringBody(<span class="directive">final</span> <span class="annotation">@RequestBody</span> <span class="predefined-type">String</span> body) {
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="predefined-type">Callable</span>&lt;<span class="predefined-type">String</span>&gt;() {
            <span class="directive">public</span> <span class="predefined-type">String</span> call() <span class="directive">throws</span> <span class="exception">Exception</span> {
                <span class="keyword">return</span> body;
            }
        };
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>テストコードは次のように記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given()
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">a string</span><span class="delimiter">&quot;</span></span>)
.when()
    .async().post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/stringBody</span><span class="delimiter">&quot;</span></span>)
.then()
    .body(equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">a string</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>これらのコードのタイムアウト時間は初期値の1秒になっています。<br>
タイムアウト時間は DSL で指定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given()
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">a string</span><span class="delimiter">&quot;</span></span>)
.when()
    .async().with().timeout(<span class="integer">20</span>, <span class="predefined-type">TimeUnit</span>.SECONDS).post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/stringBody</span><span class="delimiter">&quot;</span></span>)
.then()
    .body(equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">a string</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="http://static.javadoc.io/io.rest-assured/spring-commons/latest/io/restassured/module/spring/commons/config/AsyncConfig.html">AsyncConfig</a> でもタイムアウト時間の初期値を設定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given()
    .config(config().asyncConfig(withTimeout(<span class="integer">100</span>, <span class="predefined-type">TimeUnit</span>.MILLISECONDS)))
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">a string</span><span class="delimiter">&quot;</span></span>)
.when()
    .async().post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/stringBody</span><span class="delimiter">&quot;</span></span>)
.then()
    .body(equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">a string</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>withTimeout</code> メソッドは <code>io.restassured.module.spring.commons.config.AsyncConfig</code> のクラスメソッドで、タイムアウト時間を設定しただけの <code>AsyncConfig</code> を生成します。</p>
</div>
<div class="paragraph">
<p>全てのリクエストでタイムアウト時間を変更する場合は次のように記述します。<br>
リクエスト1とリクエスト2のどちらでも、タイムアウト時間は100ミリ秒になります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssuredMockMvc.config = RestAssuredMockMvc.config().asyncConfig(
    withTimeout(<span class="integer">100</span>, <span class="predefined-type">TimeUnit</span>.MILLISECONDS));

<span class="comment">// リクエスト1</span>
given()
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">a string</span><span class="delimiter">&quot;</span></span>)
.when()
    .async().post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/stringBody</span><span class="delimiter">&quot;</span></span>)
.then()
    .body(equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">a string</span><span class="delimiter">&quot;</span></span>));

<span class="comment">// リクエスト2</span>
given()
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">another string</span><span class="delimiter">&quot;</span></span>)
.when()
    .async().post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/stringBody</span><span class="delimiter">&quot;</span></span>)
.then()
    .body(equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">a string</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adding_request_post_processors">21.1.3. Adding Request Post Processors</h4>
<div class="paragraph">
<p>Spring MockMvc は <a href="http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/request/RequestPostProcessor.html">Request Post Processors</a> を使用できますが、<code>RestAssuredMockMvc</code> でも使用できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().postProcessors(myPostProcessor1, myPostProcessor2). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>可読性を高めるためにも、<code>RequestPostProcessors</code> に <code>org.springframework.security.test.web.servlet.request.SecurityMockMvcRequestPostProcessors</code> を指定する代わりに、<code>auth</code> メソッドを使うようにしたほうがいいでしょう。<br>
同じ振る舞いになるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().auth().with(httpBasic(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>)). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>httpBasic</code> メソッドは <a href="http://docs.spring.io/autorepo/docs/spring-security/current/apidocs/org/springframework/security/test/web/servlet/request/SecurityMockMvcRequestPostProcessors.html">SecurityMockMvcRequestPostProcessor</a> のクラスメソッドです。</p>
</div>
</div>
<div class="sect3">
<h4 id="_adding_result_handlers">21.1.4. Adding Result Handlers</h4>
<div class="paragraph">
<p>Spring MockMvc は <a href="http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/ResultHandler.html">Result Handlers</a> を使用できますが、<code>RestAssuredMockMvc</code> でも使用できます。</p>
</div>
<div class="paragraph">
<p><code>MockMvc</code> の提供するログ出力機能を使用するときは次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">.. .then().apply(print()). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>print</code> メソッドは <code>org.springframework.test.web.servlet.result.MockMvcResultHandlers</code> のクラスメソッドです。</p>
</div>
<div class="paragraph">
<p>REST Assured 2.6.0 より前のバージョンを使っている場合は代わりに <code>resultHandlers</code> メソッドを使うようにしてください（<code>resultHandlers</code> メソッドは 2.8.0 から非推奨になりました）。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().resultHandlers(print()). ..</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_result_matchers">21.1.5. Using Result Matchers</h4>
<div class="paragraph">
<p>Spring MockMvc は <a href="http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/ResultHandler.html">Result Matchers</a> のさまざまな実装を提供しています。<br>
中には役に立つものもあるでしょう。<br>
<code>RestAssuredMockMvc</code> でも同じように使用できます。</p>
</div>
<div class="paragraph">
<p>例えば、何らかの理由でステータスコードが 200 に一致するかどうか <code>ResultMatcher</code> で判定しなければならないとしたら、次のように記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given()
    .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Johan</span><span class="delimiter">&quot;</span></span>)
.when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greeting</span><span class="delimiter">&quot;</span></span>)
.then()
    .assertThat(status().isOk())
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">1</span>))
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, Johan!</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>status</code> メソッドは <code>org.springframework.test.web.servlet.result.MockMvcResultMatchers</code> のクラスメソッドです。<br>
<code>assertThat</code> メソッドの代わりに <code>expect</code> メソッドを使えるので、そのほうが素の <code>MockMvc</code> の記法に近づくでしょう。</p>
</div>
</div>
<div class="sect3">
<h4 id="_interceptors">21.1.6. Interceptors</h4>
<div class="paragraph">
<p><a href="http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/request/MockHttpServletRequestBuilder.html">MockHttpServletRequestBuilder</a> を使えば実際に送信する前にリクエストの内容を変更できます。<br>
そのためには、 <a href="http://static.javadoc.io/io.rest-assured/spring-mock-mvc/latest/io/restassured/module/mockmvc/intercept/MockHttpServletRequestBuilderInterceptor.html">MockHttpServletRequestBuilderInterceptor</a> を実装して <code>RestAssuredMockMvc</code> に指定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().interceptor(myInterceptor). ..</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_spring_mock_mvc_specifications">21.1.7. <a name="specifications"></a> Spring Mock Mvc Specifications</h4>
<div class="paragraph">
<p>通常の REST Assured のように<a href="#specification-re-use">リクエストやレスポンスの仕様</a>を定義して再利用性を高めることができます。<br>
<code>RestAssuredMockMvc</code> では <a href="http://static.javadoc.io/io.rest-assured/spring-mock-mvc/latest/io/restassured/module/mockmvc/specification/MockMvcRequestSpecBuilder.html">MockMvcRequestSpecBuilder</a> でリクエストの仕様を作成しますが、レスポンスの仕様は <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/builder/ResponseSpecBuilder.html">ResponseSpecBuilder</a> で作成します。</p>
</div>
<div class="paragraph">
<p>全てのリクエストやレスポンスで使用する仕様はクラスメンバ変数で変更できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssuredMockMvc.requestSpecification = <span class="keyword">new</span> MockMvcRequestSpecBuilder()
    .addQueryParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Johan</span><span class="delimiter">&quot;</span></span>)
    .build();
RestAssuredMockMvc.responseSpecification = <span class="keyword">new</span> ResponseSpecBuilder()
    .expectStatusCode(<span class="integer">200</span>)
    .expectBody(<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, Johan!</span><span class="delimiter">&quot;</span></span>))
    .build();

given()
    .standaloneSetup(<span class="keyword">new</span> GreetingController())
.when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greeting</span><span class="delimiter">&quot;</span></span>)
.then()
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">1</span>));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_resetting_restassuredmockmvc">21.1.8. Resetting RestAssuredMockMvc</h4>
<div class="paragraph">
<p><code>reset</code> メソッドで <code>RestAssuredMockMvc</code> の初期設定を復元できます。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_spring_mvc_authentication">21.2. Spring MVC Authentication</h3>
<div class="paragraph">
<p><code>spring-mock-mvc</code> モジュールは 2.3.0 から認証機能に対応しました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().auth().principal(..). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>一部の認証方式を使用するには Spring Security ライブラリをクラスパスに配置しなければなりません（任意です）。<br>
認証方式はクラスメンバ変数で変更できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssuredMockMvc.authentication = principal(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>principal</code> メソッドは <a href="http://static.javadoc.io/io.rest-assured/spring-mock-mvc/latest/io/restassured/module/mockmvc/RestAssuredMockMvc.html">RestAssuredMockMvc</a> のクラスメソッドです。<br>
リクエストビルダーで認証方式を変更することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">MockMvcRequestSpecification spec = <span class="keyword">new</span> MockMvcRequestSpecBuilder
    .setAuth(principal(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>))
    .build();</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_using_spring_security_test">21.2.1. Using Spring Security Test</h4>
<div class="paragraph">
<p><code>spring-mock-mvc</code> モジュールは 2.5.0 で Spring Security の対応を改善しました。<br>
クラスパスに <code>spring-security-test</code> ライブラリがあるときは次のように記述できるようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().auth().with(httpBasic(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>)). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>httpBasic</code> メソッドは <a href="http://docs.spring.io/autorepo/docs/spring-security/current/apidocs/org/springframework/security/test/web/servlet/request/SecurityMockMvcRequestPostProcessors.html">SecurityMockMvcRequestPostProcessor</a> のクラスメソッドです。<br>
このメソッドはベーシック認証ができるようにします。</p>
</div>
<div class="paragraph">
<p>この機能を有効にするには <code>MockMvc</code> のインスタンスに <a href="http://docs.spring.io/autorepo/docs/spring-security/current/apidocs/org/springframework/security/test/web/servlet/setup/SecurityMockMvcConfigurers.html">SecurityMockMvcConfigurer</a> を指定しなければなりません。<br>
直接指定する場合は次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">MockMvc mvc = MockMvcBuilders
    .webAppContextSetup(context)
    .apply(SecurityMockMvcConfigurers.springSecurity())
    .build();</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>RestAssuredMockMvc</code> に <a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/web/servlet/setup/AbstractMockMvcBuilder.html">AbstractMockMvcBuilder</a> のインスタンスを指定した場合、自動的に <code>springSecurity</code> を構成します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given()
    .webAppContextSetup(context)
    .auth().with(httpBasic(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>)). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>完全なコード例は次のとおりです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">io.restassured.module.mockmvc.RestAssuredMockMvc</span>;
<span class="keyword">import</span> <span class="include">org.junit.After</span>;
<span class="keyword">import</span> <span class="include">org.junit.Before</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;
<span class="keyword">import</span> <span class="include">org.junit.runner.RunWith</span>;
<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.annotation.Autowired</span>;
<span class="keyword">import</span> <span class="include">org.springframework.test.context.ContextConfiguration</span>;
<span class="keyword">import</span> <span class="include">org.springframework.test.context.junit4.SpringJUnit4ClassRunner</span>;
<span class="keyword">import</span> <span class="include">org.springframework.test.context.web.WebAppConfiguration</span>;
<span class="keyword">import</span> <span class="include">org.springframework.web.context.WebApplicationContext</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.restassured.module.mockmvc.RestAssuredMockMvc.given</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.springframework.security.test.web.servlet.request.SecurityMockMvcRequestPostProcessors.httpBasic</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.springframework.security.test.web.servlet.response.SecurityMockMvcResultMatchers.authenticated</span>;

<span class="annotation">@RunWith</span>(SpringJUnit4ClassRunner.class)
<span class="annotation">@ContextConfiguration</span>(classes = MyConfiguration.class)
<span class="annotation">@WebAppConfiguration</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">BasicAuthExample</span> {

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> WebApplicationContext context;

    <span class="annotation">@Before</span> <span class="directive">public</span> <span class="type">void</span>
    rest_assured_is_initialized_with_the_web_application_context_before_each_test() {
        RestAssuredMockMvc.webAppContextSetup(context);
    }

    <span class="annotation">@After</span> <span class="directive">public</span> <span class="type">void</span>
    rest_assured_is_reset_after_each_test() {
        RestAssuredMockMvc.reset();
    }

    <span class="annotation">@Test</span> <span class="directive">public</span> <span class="type">void</span>
    basic_auth_example() {
        given().
                auth().with(httpBasic(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>)).
        when().
                get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/secured/x</span><span class="delimiter">&quot;</span></span>).
        then().
                statusCode(<span class="integer">200</span>).
                expect(authenticated().withUsername(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>全てのリクエストで使用する認証方式はクラスメンバで変更できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssuredMockMvc.authentication = with(httpBasic(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>with</code> メソッドは <code>io.restassured.module.mockmvc.RestAssuredMockMvc</code> のクラスメソッドです。<br>
<a href="#specifications">リクエストの仕様</a>で指定することもできます。</p>
</div>
</div>
<div class="sect3">
<h4 id="_injecting_a_user">21.2.2. Injecting a User</h4>
<div class="paragraph">
<p>Spring Security Test ライブラリの提供する <a href="http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#test-method-withmockuser">@WithMockUser</a> や <a href="http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#test-method-withuserdetails">@WithUserDetails</a> といったアノテーションを使用できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">UserAwareController</span> {

    <span class="annotation">@RequestMapping</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">/user-aware</span><span class="delimiter">&quot;</span></span>, method = GET)
    <span class="directive">public</span>
    <span class="annotation">@ResponseBody</span>
    <span class="predefined-type">String</span> userAware(<span class="annotation">@AuthenticationPrincipal</span> User user) {
        <span class="keyword">if</span> (user == <span class="predefined-constant">null</span> || !user.getUsername().equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">authorized_user</span><span class="delimiter">&quot;</span></span>)) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">IllegalArgumentException</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Not authorized</span><span class="delimiter">&quot;</span></span>);
        }

        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Success</span><span class="delimiter">&quot;</span></span>;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>userAware</code> メソッドの引数 <a href="http://docs.spring.io/autorepo/docs/spring-security/current/apidocs/org/springframework/security/core/userdetails/User.html">User</a> には <a href="http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/web/bind/annotation/AuthenticationPrincipal.html">@AuthenticationPrincipal</a> が指定されているため、Spring Security がユーザーオブジェクトを注入します。<br>
次のように記述すると、テスト用のユーザーを生成できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@WithMockUser</span>(username = <span class="string"><span class="delimiter">&quot;</span><span class="content">authorized_user</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Test</span> <span class="directive">public</span> <span class="type">void</span>
spring_security_mock_annotations_example() {
    given()
        .webAppContextSetup(context)
    .when()
        .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/user-aware</span><span class="delimiter">&quot;</span></span>)
    .then()
        .statusCode(<span class="integer">200</span>)
        .body(equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">Success</span><span class="delimiter">&quot;</span></span>))
        .expect(authenticated().withUsername(<span class="string"><span class="delimiter">&quot;</span><span class="content">authorized_user</span><span class="delimiter">&quot;</span></span>));
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_spring_web_test_client_module">21.2.3. Spring Web Test Client Module</h4>
<div class="paragraph">
<p>REST Assured 3.2.0 では <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html">Spring Reactive Web</a> のテストに使用するコンポーネントとして <code>spring-web-test-client</code> モジュールを導入しました。<br>
このモジュールを使用すると Spring WebFlux のコントローラのユニットテストを作成できるようになります。</p>
</div>
<div class="paragraph">
<p>次のような DTO クラスを JSON ドキュメントとして返すコントローラがあることにしましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Greeting</span> {

    <span class="directive">private</span> <span class="directive">final</span> <span class="type">long</span> id;
    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">String</span> content;

    <span class="directive">public</span> Greeting(<span class="type">long</span> id, <span class="predefined-type">String</span> content) {
        <span class="local-variable">this</span>.id = id;
        <span class="local-variable">this</span>.content = content;
    }

    <span class="directive">public</span> <span class="type">long</span> getId() {
        <span class="keyword">return</span> id;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getContent() {
        <span class="keyword">return</span> content;
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RestController</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">GreetingController</span> {

    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> template = <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, %s!</span><span class="delimiter">&quot;</span></span>;
    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">AtomicLong</span> counter = <span class="keyword">new</span> <span class="predefined-type">AtomicLong</span>();

    <span class="annotation">@GetMapping</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">/greeting</span><span class="delimiter">&quot;</span></span>, produces = <span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Mono&lt;Greeting&gt; greeting(<span class="annotation">@RequestParam</span>(value=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> name) {
        <span class="keyword">return</span> Mono.just(<span class="keyword">new</span> Greeting(counter.incrementAndGet(), <span class="predefined-type">String</span>.format(template, name)));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="http://static.javadoc.io/io.rest-assured/spring-web-test-client/latest/io/restassured/module/webtestclient/RestAssuredWebTestClient.html">RestAssuredWebTestClient</a> を使うと次のように記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">io.restassured.module.webtestclient</span>;

<span class="keyword">import</span> <span class="include">io.restassured.module.webtestclient.setup.GreetingController</span>;
<span class="keyword">import</span> <span class="include">org.junit.Test</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">io.restassured.module.webtestclient.RestAssuredWebTestClient.given</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">GreetingControllerTest</span> {

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> greeting_controller_returns_json_greeting() {
        given()
            .standaloneSetup(<span class="keyword">new</span> GreetingController())
            .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Johan</span><span class="delimiter">&quot;</span></span>)
        .when()
            .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greeting</span><span class="delimiter">&quot;</span></span>)
        .then()
            .statusCode(<span class="integer">200</span>)
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">1</span>))
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, Johan!</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>REST Assured の基本的な記法そのままです。<br>
すごい短い時間でテストを実行できるだけでなく、基本的な REST Assured に比べて、環境の準備や、（必要なら）モックを使用するのが簡単になっています。<br>
基本的な REST Assured の準備に必要なことのほとんど（各種設定や仕様の準備、ロギング等）を <code>RestAssuredWebTestClient</code> がやってくれるからです。</p>
</div>
<div class="paragraph">
<p>Maven プロジェクトなら <code>spring-web-test-client</code> モジュールを依存ライブラリに追加します。<br>
そうでなければ <a href="https://repo1.maven.org/maven2/io/rest-assured/spring-web-test-client/latest/spring-web-test-client-4.4.0.jar">jarファイル</a> をダウンロードしてクラスパスに配置します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>io.rest-assured<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>spring-web-test-client<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;version&gt;</span>4.4.0<span class="tag">&lt;/version&gt;</span>
      <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bootstrapping_restassuredwebtestclient">21.2.4. Bootstrapping RestAssuredWebTestClient</h4>
<div class="paragraph">
<p>次のような import 文を追加するだけです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">io.restassured.module.webtestclient.RestAssuredWebTestClient.*
io.restassured.module.webtestclient.matcher.RestAssuredWebTestClientMatchers.*</code></pre>
</div>
</div>
<div class="paragraph">
<p>元の import 文は削除します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">io.restassured.RestAssured.*
io.restassured.matcher.RestAssuredMatchers.*</code></pre>
</div>
</div>
<div class="paragraph">
<p>他に必要な import 文があるなら <a href="#static-import">static import</a> のセクションを参照してください。</p>
</div>
<div class="paragraph">
<p><code>RestAssuredWebTestClient</code> のテストを実行するときは、先にコントローラや <code>WebTestClient</code> や <code>WebApplicationContext</code> を初期化しておかなければなりません。<br>
前のコード例で見たように、リクエストごとにもろもろの準備を実行できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given().standaloneSetup(<span class="keyword">new</span> GreetingController()). ..</code></pre>
</div>
</div>
<div class="paragraph">
<p>クラスメソッドで実行することもできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssuredWebTestClient.standaloneSetup(<span class="keyword">new</span> GreetingController());</code></pre>
</div>
</div>
<div class="paragraph">
<p>クラスメソッドで実行する場合、REST Assured の DSL でコントローラのインスタンスを指定する必要はありません。<br>
その場合、最初のコード例は次のように記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">given()
    .param(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Johan</span><span class="delimiter">&quot;</span></span>)
.when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greeting</span><span class="delimiter">&quot;</span></span>)
.then()
    .statusCode(<span class="integer">200</span>)
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">1</span>))
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, Johan!</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_spring_web_test_client_specifications">21.2.5. Spring Web Test Client Specifications</h4>
<div class="paragraph">
<p>通常の REST Assured のように<a href="#specification-re-use">リクエストやレスポンスの仕様</a>を定義して再利用性を高めることができます。<br>
<code>RestAssuredWebTestClient</code> では <a href="http://static.javadoc.io/io.rest-assured/spring-web-test-client/latest/io/restassured/module/webtestclient/specification/WebTestClientRequestSpecBuilder.html">WebTestClientRequestSpecBuilder</a> でリクエストの仕様を作成しますが、レスポンスの仕様は <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/builder/ResponseSpecBuilder.html">ResponseSpecBuilder</a> で作成します。</p>
</div>
<div class="paragraph">
<p>全てのリクエストやレスポンスで使用する仕様はクラスメンバ変数で変更できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RestAssuredWebTestClient.requestSpecification = <span class="keyword">new</span> WebTestClientRequestSpecBuilder()
    .addQueryParam(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Johan</span><span class="delimiter">&quot;</span></span>)
    .build();
RestAssuredWebTestClient.responseSpecification = <span class="keyword">new</span> ResponseSpecBuilder()
    .expectStatusCode(<span class="integer">200</span>)
    .expectBody(<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, Johan!</span><span class="delimiter">&quot;</span></span>))
    .build();

given()
    .standaloneSetup(<span class="keyword">new</span> GreetingController())
.when()
    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greeting</span><span class="delimiter">&quot;</span></span>)
.then()
    .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>, equalTo(<span class="integer">1</span>));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_resetting_restassuredwebtestclient">21.2.6. Resetting RestAssuredWebTestClient</h4>
<div class="paragraph">
<p><code>reset</code> メソッドで <code>RestAssuredWebTestClient</code> の初期設定を復元できます。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_common_spring_module_documentation">21.3. Common Spring Module Documentation</h3>
<div class="sect3">
<h4 id="_note_on_parameters">21.3.1. Note on parameters</h4>
<div class="paragraph">
<p><code>RestAssuredMockMvc</code> と <code>RestAssuredWebTestClient</code> はどちらも使用できるパラメータは同じで、<code>param</code> や <code>formParam</code> や <code>queryParam</code> は <code>MockMvc</code> へ委譲するだけです。<br>
通常の REST Assured と同様に、<code>formParam</code> でパラメータを指定すると、自動的に HTTP ヘッダーの content-type へ <code>application/x-www-form-urlencoded</code> を設定します。</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scala_support_module">22. Scala Support Module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST Assured 2.6.0 で導入された <a href="https://repo1.maven.org/maven2/io/rest-assured/scala-support/latest/scala-support-4.4.0.jar">scala-support</a> モジュールは、 <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/response/Response.html">Response</a> と <a href="http://static.javadoc.io/io.rest-assured/spring-mock-mvc/latest/io/restassured/module/mockmvc/response/MockMvcResponse.html">MockMvcResponse</a> の "then" メソッドに、別名の "Then" メソッドを追加します。<br>
Scala では <code>then</code> が予約語になっているため、Scala コンパイラが警告メッセージを出力するからです。<br>
<code>Then</code> メソッドを使用するには <code>scala-support</code> モジュールの <code>io.restassured.module.scala.RestAssuredSupport.AddThenToResponse</code> を import 文に追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">io.restassured.RestAssured.when</span>
<span class="include">import</span> <span class="include">io.restassured.module.scala.RestAssuredSupport.AddThenToResponse</span>
<span class="include">import</span> <span class="include">org.hamcrest.Matchers.equalTo</span>
<span class="include">import</span> <span class="include">org.junit.Test</span>

<span class="annotation">@Test</span>
<span class="include">def</span> <span class="error">`</span><span class="include">trying</span> <span class="include">out</span> <span class="include">rest</span> <span class="include">assured</span> <span class="include">in</span> <span class="include">scala</span> <span class="include">with</span> <span class="include">implicit</span> <span class="include">conversion</span><span class="error">`</span>() {
  <span class="include">when</span>().
    <span class="include">get</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/greetJSON</span><span class="delimiter">&quot;</span></span>).
  <span class="include">Then</span>().
    <span class="include">statusCode</span>(<span class="integer">200</span>).
    <span class="include">body</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>, <span class="include">equalTo</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>))
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#spring-mock-mvc-module">spring-mock-mvc モジュール</a> を使用する場合も同じようにします。</p>
</div>
<div class="paragraph">
<p><code>scala-support</code> モジュールを依存ライブラリに追加するには次のように記述します。</p>
</div>
<div class="listingblock">
<div class="title">SBT:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="scala">libraryDependencies += &quot;io.rest-assured&quot; % &quot;scala-support&quot; % &quot;4.4.0&quot;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Maven:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>io.rest-assured<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>scala-support<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>4.4.0<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Gradle:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">testImplementation 'io.rest-assured:scala-support:4.4.0'</code></pre>
</div>
</div>
<h4 id="_no_build_manager" class="discrete">No build manager:</h4>
<div class="paragraph">
<p>クラスパスに <a href="https://repo1.maven.org/maven2/io/rest-assured/scala-support/latest/scala-support-4.4.0.jar">jar ファイル</a> を配置してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kotlin">23. Kotlin</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_avoid_escaping_when_keyword">23.1. Avoid Escaping "when" Keyword</h3>
<div class="paragraph">
<p><a href="https://www.jetbrains.com/">JetBrains</a> の開発している Kotlin 言語はとても簡単に Java と統合できるので、REST Assured も簡単に利用できます。<br>
ただし、1つだけ注意点があります。<br>
Kotlin では <code>when</code> が予約語になっているため、メソッド名をエスケープしなければならないのです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">@Test
fun `kotlin rest assured example`() {
    given().
        param(&quot;firstName&quot;, &quot;Johan&quot;).
        param(&quot;lastName&quot;, &quot;Haleby&quot;).
    `when`().
        get(&quot;/greeting&quot;).
    then().
        statusCode(200).
        body(&quot;greeting.firstName&quot;, equalTo(&quot;Johan&quot;)).
        body(&quot;greeting.lastName&quot;, equalTo(&quot;Haleby&quot;))
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#kotlin-extension-module">Kotlin Extension Module</a> を使用すれば、簡単に <a href="https://kotlinlang.org/docs/reference/extensions.html">拡張メソッド</a> を作成できるので、こちらの方がおすすめです。</p>
</div>
<div class="paragraph">
<p>例えば、<code>when</code> メソッドの別名 <code>When</code> メソッドを定義するには次のように記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">fun RequestSpecification.When(): RequestSpecification {
    return this.`when`()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>そうすると、前のコードは次のように記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">@Test
fun `kotlin rest assured example`() {
    given().
        param(&quot;firstName&quot;, &quot;Johan&quot;).
        param(&quot;lastName&quot;, &quot;Haleby&quot;).
    When().
        get(&quot;/greeting&quot;).
    then().
        statusCode(200).
        body(&quot;greeting.firstName&quot;, equalTo(&quot;Johan&quot;)).
        body(&quot;greeting.lastName&quot;, equalTo(&quot;Haleby&quot;))
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>メソッド名のエスケープが不要になりました。<br>
より詳しい内容は <a href="https://code.haleby.se/2015/11/06/rest-assured-with-kotlin/">Johan Haleby のブログ記事</a> を参照してください。</p>
</div>
</div>
<div class="sect2">
<h3 id="_kotlin_extension_module">23.2. Kotlin Extension Module</h3>
<div class="paragraph">
<p>REST Assured 4.1.0 では <code>kotlin-extensions</code> モジュールを導入しました。<br>
このモジュールは Kotlin から REST Assured を使用するときに便利な拡張関数を提供します。</p>
</div>
<div class="paragraph">
<p>Maven プロジェクトなら次のような依存ライブラリを追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>io.rest-assured<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>kotlin-extensions<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>4.4.0<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>そして、<code>io.restassured.module.kotlin.extensions</code> パッケージの <code>Given</code> クラスを import 文に追加すると、次のように記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">val message: String =
Given {
    port(7000)
    header(&quot;Header&quot;, &quot;Header&quot;)
    body(&quot;hello&quot;)
} When {
    put(&quot;/the/path&quot;)
} Then {
    statusCode(200)
    body(&quot;message&quot;, equalTo(&quot;Another World&quot;))
} Extract {
    path(&quot;message&quot;)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このモジュールは Kotlin 開発者にとって使いやすい API を提供するだけでなく、Java API として利用する場合でも次のような利点があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>失敗した期待値の評価をまとめて報告できるようになります</p>
</li>
<li>
<p>IDE でソースコードを整形してもきれいにインデントされます</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>拡張メソッドの名前は将来的に変更される可能性があります。<br>
Kotlin 用の API に関する原則や利点については <a href="https://code.haleby.se/2019/09/06/rest-assured-in-kotlin/">John Haleby のブログ記事</a> を参照してください。</p>
</div>
</div>
<div class="sect2">
<h3 id="_kotlin_extension_module_for_spring_mockmvc">23.3. Kotlin Extension Module for Spring MockMvc</h3>
<div class="paragraph">
<p>REST Assured 4.1.0 では <a href="#spring-mock-mvc-module">spring-mock-mvc モジュール</a> の Kotlin 拡張に対応する <code>spring-moc-mvc-kotlin-extensions</code> モジュールを導入しました。<br>
次のように記述できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">class RestAssuredMockMvcKotlinExtensionsTest {

    @Test
    fun example() {
        val mockMvc =
            MockMvcBuilders.standaloneSetup(GreetingController())
                .build()

        val id: Int =
        Given {
            mockMvc(mockMvc)
            param(&quot;name&quot;, &quot;Johan&quot;)
        } When {
            get(&quot;/greeting&quot;)
        } Then {
            body(
                &quot;id&quot;, Matchers.equalTo(1),
                &quot;content&quot;, Matchers.equalTo(&quot;Hello, Johan!&quot;)
            )
        } Extract {
            path(&quot;id&quot;)
        }

        assertThat(id).isEqualTo(1)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Maven プロジェクトなら次のような依存ライブラリを追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>io.rest-assured<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>spring-mock-mvc-kotlin-extensions<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>4.4.0<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>必要な拡張関数を <code>io.restassured.module.mockmvc.kotlin.extensions</code> パッケージから import してください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_more_info">24. More info</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information refer to the <a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/index.html">javadoc</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/RestAssured.html">RestAssured</a></p>
</li>
<li>
<p><a href="http://static.javadoc.io/io.rest-assured/spring-mock-mvc/latest/io/restassured/module/mockmvc/RestAssuredMockMvc.html">RestAssuredMockMvc Javadoc</a></p>
</li>
<li>
<p><a href="http://static.javadoc.io/io.rest-assured/rest-assured/latest/io/restassured/specification/package-summary.html">Specification package</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also have a look at some code examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>REST Assured <a href="https://github.com/rest-assured/rest-assured/tree/master/examples/rest-assured-itest-java/src/test/java/io/restassured/itest/java">tests</a></p>
</li>
<li>
<p><a href="https://github.com/rest-assured/rest-assured/blob/master/json-path/src/test/java/io/restassured/path/json/JsonPathTest.java">JsonPathTest</a></p>
</li>
<li>
<p><a href="https://github.com/rest-assured/rest-assured/blob/master/xml-path/src/test/java/io/restassured/path/xml/XmlPathTest.java">XmlPathTest</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you need support then join the <a href="http://groups.google.com/group/rest-assured">mailing list</a>.</p>
</div>
<div class="paragraph">
<p>For professional support please contact <a href="https://github.com/johanhaleby">johanhaleby</a>.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 4.4.0<br>
Last updated 2021-09-09 04:29:29 UTC
</div>
</div>
</body>
</html>