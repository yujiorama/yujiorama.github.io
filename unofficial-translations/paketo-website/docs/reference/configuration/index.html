<!doctype html>
<html>

<head>
    <meta charset="utf-8">

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Configuring Paketo Buildpacks - Paketo Buildpacks</title>
<meta name="viewport" content="width=device-width, initial-scale=1 viewport-fit=cover">




<meta name="og:site_name" content="Paketo Buildpacks">
<meta name="og:title" content="Configuring Paketo Buildpacks">
<meta name="og:url" content="https://yujiorama.github.io/unofficial-translations/paketo-website/docs/reference/configuration/">
<meta name="twitter:title" content="Paketo Buildpacks" />
<meta name="twitter:url" content="https://yujiorama.github.io/unofficial-translations/paketo-website/docs/reference/configuration/" />
<meta name="twitter:card" content="" />



<link rel="stylesheet" href="/unofficial-translations/paketo-website/css/main.min.e65e899d7edbb046f43d58e402eca40ec1064082b810ea2ea4f62b1e70614850.css">

</head>

<body>
    
    <div id="header-skip-link" class="screenreader-container">
    <a href="#title" class="screenreader-text">Skip to Content</a>
</div>

    




<header class="header--narrow">
    
    <a class="paketo-p-logo" href="/">
        <img class="paketo-p-logo__image" src="/unofficial-translations/paketo-website/v2/images/logo-paketo-p.svg" alt="Paketo Buildpacks Homepage">
    </a>
    
    <div id="navigation" class="right-overlay">
        <div class="nav-opener">
            <span class="nav-opener__bar nav-opener__bar-top"></span>
            <span class="nav-opener__bar nav-opener__bar-middle"></span>
            <span class="nav-opener__bar nav-opener__bar-bottom"></span>
        </div>
        <div class="nav-container" id="nav-container">
            <nav class="nav" id="nav-tray" >
                <div class="nav__linkarea text--400">
                    <a class="nav-link" href="/docs">docs</a>
                    <a class="nav-link" href="/community">community</a>
                    <a class="nav-link" href="https://blog.paketo.io">blog</a>
                    <a class="nav-link" href="https://github.com/paketo-buildpacks">github</a>
                </div>
            </nav>
        </div>
    </div>
    <div class="desktop-nav">
        
        
        
        <a class="nav-link nav-link--desktop  nav-link--desktop--active" href="/docs">docs</a>
        
        <a class="nav-link nav-link--desktop   " href="/community">community</a>
        <a class="nav-link nav-link--desktop " href="https://blog.paketo.io">blog</a>
        <a class="nav-link nav-link--desktop " href="https://github.com/paketo-buildpacks">github</a>
    </div>
</header>


    <div class="docs">
    <div class="docs-sidebar">
        
<input type="text" id="docs-search" class="algolia-autocomplete__search-bar" placeholder="Search docs..." data-api-key="bf2d426728685665ceaf22fac947f10f" data-index="paketo"/>
<nav class="docs-menu">
    <ul class="docs-menu__top-level-list">
        
        
            
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/" class="docs-menu__item docs-menu__link ">
                
                <span>Getting Started</span>
            </a>
        </li>
    
        
            
    
        <li class="docs-menu__item docs-menu__parent">
            
            <div class="docs-menu__section-header ">
                
                <span>How To</span>
                <button class="expander-button  docs-menu__expander-button">
                    <svg class="expander-button__triangle " width="38" height="34" viewBox="0 0 38 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="0.140625" width="37.0257" height="34" rx="8" fill="#888888" fill-opacity="0.25"/>
                        <path d="M28.1604 13H8.14648L18.6538 22.5L28.1604 13Z" fill="#FEFCFC"/>
                        </svg>
                </button>
            </div>
            
            <ul class="docs-menu__children-list ">
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/howto/dotnet-core/" class="docs-menu__item docs-menu__link ">
                
                <span>.NET Core</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/howto/go/" class="docs-menu__item docs-menu__link ">
                
                <span>Go</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/howto/web-servers/" class="docs-menu__item docs-menu__link ">
                
                <span>Web Servers</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/howto/java/" class="docs-menu__item docs-menu__link ">
                
                <span>Java</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/howto/nodejs/" class="docs-menu__item docs-menu__link ">
                
                <span>Node.js</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/howto/python/" class="docs-menu__item docs-menu__link ">
                
                <span>Python</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/howto/php/" class="docs-menu__item docs-menu__link ">
                
                <span>PHP</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/howto/ruby/" class="docs-menu__item docs-menu__link ">
                
                <span>Ruby</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/howto/create-paketo-buildpack/" class="docs-menu__item docs-menu__link ">
                
                <span>Create a Paketo Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/howto/bom/" class="docs-menu__item docs-menu__link ">
                
                <span>Access the Bill of Materials</span>
            </a>
        </li>
    
                
            </ul>
        </li>
    
        
            
    
        <li class="docs-menu__item docs-menu__parent">
            
            <div class="docs-menu__section-header ">
                
                <span>Concepts</span>
                <button class="expander-button  docs-menu__expander-button">
                    <svg class="expander-button__triangle " width="38" height="34" viewBox="0 0 38 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="0.140625" width="37.0257" height="34" rx="8" fill="#888888" fill-opacity="0.25"/>
                        <path d="M28.1604 13H8.14648L18.6538 22.5L28.1604 13Z" fill="#FEFCFC"/>
                        </svg>
                </button>
            </div>
            
            <ul class="docs-menu__children-list ">
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/concepts/buildpacks/" class="docs-menu__item docs-menu__link ">
                
                <span>Buildpacks</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/concepts/builders/" class="docs-menu__item docs-menu__link ">
                
                <span>Builders</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/concepts/stacks/" class="docs-menu__item docs-menu__link ">
                
                <span>Stacks</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/concepts/bom/" class="docs-menu__item docs-menu__link ">
                
                <span>Bill of Materials</span>
            </a>
        </li>
    
                
            </ul>
        </li>
    
        
            
    
        <li class="docs-menu__item docs-menu__parent">
            
            <div class="docs-menu__section-header docs-menu__section-header--opened">
                
                <span>Reference</span>
                <button class="expander-button expander-button--opened docs-menu__expander-button">
                    <svg class="expander-button__triangle expander-button__triangle--opened" width="38" height="34" viewBox="0 0 38 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="0.140625" width="37.0257" height="34" rx="8" fill="#888888" fill-opacity="0.25"/>
                        <path d="M28.1604 13H8.14648L18.6538 22.5L28.1604 13Z" fill="#FEFCFC"/>
                        </svg>
                </button>
            </div>
            
            <ul class="docs-menu__children-list docs-menu__children-list--opened">
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/reference/configuration/" class="docs-menu__item docs-menu__link docs-menu__link--active">
                
                <span>Configuring Paketo Buildpacks</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/reference/httpd-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>HTTPD Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/reference/dotnet-core-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>.NET Core Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/reference/go-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>Go Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/reference/java-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>Java Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/reference/java-native-image-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>Java Native Image Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/reference/nginx-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>NGINX Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/reference/nodejs-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>Node.js Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/reference/php-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>PHP Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/reference/python-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>Python Buildpack</span>
            </a>
        </li>
    
                
                    
    
        <li class="docs-menu__leaf">
            <a href="/unofficial-translations/paketo-website/docs/reference/ruby-reference/" class="docs-menu__item docs-menu__link ">
                
                <span>Ruby Buildpack</span>
            </a>
        </li>
    
                
            </ul>
        </li>
    
        
    </ul>
</nav>



    </div>
    <div class="docs-body">
        <div class="docs-body__container">
            
  <a href="http://github.com/paketo-buildpacks/paketo-website/edit/main/content/docs%5creference%5cconfiguration.md" target="_blank" class="github-edit" style="text-decoration:none">
    <div class="github-edit__content">
      <div class="github-edit__logo-container">
        <img class="github-edit__logo" src="/images/github-mark.png">
      </div>
        <div class="github-edit__text">Edit</div>
    </div>
</a>

            <h1 id="title">Configuring Paketo Buildpacks</h1>
            
<div class="docs-body__table-of-contents-container docs-body__table-of-contents-container--mobile">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#about-the-examples">About the Examples</a></li>
    <li><a href="#types-of-configuration">Types of Configuration</a>
      <ul>
        <li><a href="#environment-variables">Environment Variables</a></li>
        <li><a href="#buildpackyml">buildpack.yml</a></li>
        <li><a href="#bindings">Bindings</a></li>
        <li><a href="#procfiles">Procfiles</a></li>
      </ul>
    </li>
    <li><a href="#building-behind-a-firewall">Building Behind a Firewall</a>
      <ul>
        <li><a href="#proxy-configuration">Proxy Configuration</a></li>
        <li><a href="#dependency-mappings">Dependency Mappings</a></li>
      </ul>
    </li>
    <li><a href="#ca-certificates">CA Certificates</a></li>
    <li><a href="#applying-custom-labels">Applying Custom Labels</a></li>
    <li><a href="#configuring-locale">Configuring Locale</a></li>
  </ul>
</nav>
</div>

            <div class="docs-body__markdown">
                <h2 id="about-the-examples" class="markup-heading">
    <a class="markup-heading__link" href="#about-the-examples">
        About the Examples
    </a>
</h2><p>Configuration examples will use the Paketo <a href="https://github.com/paketo-buildpacks/samples">sample applications</a>.</p>
<p>Examples assume that the root of this repository is the working directory:
<pre class="copyable"><code class="copyable__code">git clone https://github.com/paketo-buildpacks/samples
cd samples
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>
</p>
<p>The <a href="https://github.com/buildpacks/pack">pack CLI</a> is used throughout the examples. <code>pack</code> is just one of several Cloud Native Buildpack <a href="https://buildpacks.io/docs/concepts/components/platform/">platforms</a> than can execute builds with Paketo Buildpacks.</p>
<p>Examples assume that the <a href="https://yujiorama.github.io/unofficial-translations/paketo-website/docs/concepts/builders/#base">Paketo Base builder</a> is the default builder:
<pre class="copyable"><code class="copyable__code">pack config default-builder paketobuildpacks/builder:base
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>
</p>
<h2 id="types-of-configuration" class="markup-heading">
    <a class="markup-heading__link" href="#types-of-configuration">
        Types of Configuration
    </a>
</h2><p>Paketo buildpacks can be configured via the following mechanisms:</p>
<ul>
<li><a href="#environment-variables">Environment Variables</a> - used for generic configuration at both <strong>build-time</strong> and <strong>runtime</strong>.</li>
<li><a href="#buildpackyml">buildpack.yml</a> - used for generic configuration at <strong>build-time</strong>.</li>
<li><a href="#bindings">Bindings</a> - used for <strong>secret</strong> configuration at both <strong>build-time</strong> and <strong>runtime</strong>.</li>
<li><a href="#procfiles">Procfiles</a> - used to provide custom <strong>process types</strong> at <strong>build-time</strong>.</li>
</ul>
<h3 id="environment-variables" class="markup-heading">
    <a class="markup-heading__link" href="#environment-variables">
        Environment Variables
    </a>
</h3><h4 id="build-time-environment-variables" class="markup-heading">
    <a class="markup-heading__link" href="#build-time-environment-variables">
        Build-time Environment Variables
    </a>
</h4><p>Users may configure the build by setting variables in the buildpack environment. The names of variables accepted by the Paketo buildpacks at build-time are either prefixed with <code>BP_</code> or have well-known conventional meanings outside of Paketo (e.g. <code>http_proxy</code>).</p>
<p>The following example uses an environment variable to configure the JVM version installed by the Java Buildpack.</p>
<pre class="copyable"><code class="copyable__code">pack build samples/java  \
  --path java/jar \
  --env BP_JVM_VERSION=8
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>

<p>During the build process, a buildpack may invoke other programs that accept configuration via the environment. Users may configure these tools as they would normally. For example, the command below configures the JVM memory settings for the JVM running Maven using <a href="https://maven.apache.org/configure.html#maven_opts-environment-variable"><code>MAVEN_OPTS</code></a>.</p>
<pre class="copyable"><code class="copyable__code">pack build samples/java  \
  --path java/maven \
  --env &#34;MAVEN_OPTS=-Xms256m -Xmx512m&#34;
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>

<h4 id="runtime-environment-variables" class="markup-heading">
    <a class="markup-heading__link" href="#runtime-environment-variables">
        Runtime Environment Variables
    </a>
</h4><p>Users may configure runtime features of the app image by setting environment variables in the app container.  The names of variables accepted by buildpack-provided runtime components (e.g. profile scripts and processes types) are prefixed with <code>BPL_</code> or have well-known conventional meanings outside of Paketo (e.g <code>JAVA_TOOL_OPTIONS</code>).</p>
<p>The following example uses <code>JAVA_TOOL_OPTIONS</code> to set the server port of the sample application:
<pre class="copyable"><code class="copyable__code">docker run --rm --publish 8082:8082 --env &#34;JAVA_TOOL_OPTIONS=-Dserver.port=8082&#34; samples/java
curl -s http://localhost:8082/actuator/health
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>
</p>
<p>Programs invoked at runtime, including the application itself, will accept environment as they would normally.</p>
<h4 id="image-embedded-environment-variables" class="markup-heading">
    <a class="markup-heading__link" href="#image-embedded-environment-variables">
        Image Embedded Environment Variables
    </a>
</h4><p>Users may embed environment variables into the images created by using the <a href="https://github.com/paketo-buildpacks/environment-variables">Environment Variables buildpack</a>. The Environment Variables buildpack looks for environment variables matching the pattern <code>$BPE_*</code>. When detected, the buildpack will modify the launch environment to adjust the specified variables. This is a good way to set non-sensitive configuration values such as defaults or modify environment variables that you do not need users to set.</p>
<p>The buildpack supports the following actions on environment variables:</p>
<table>
<thead>
<tr>
<th>Environment Variable Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$BPE_&lt;NAME&gt;</code></td>
<td>set <code>$NAME</code> to value (same as override)</td>
</tr>
<tr>
<td><code>$BPE_APPEND_&lt;NAME&gt;</code></td>
<td>append value to <code>$NAME</code></td>
</tr>
<tr>
<td><code>$BPE_DEFAULT_&lt;NAME&gt;</code></td>
<td>set default value for <code>$NAME</code></td>
</tr>
<tr>
<td><code>$BPE_OVERRIDE_&lt;NAME&gt;</code></td>
<td>set <code>$NAME</code> to value</td>
</tr>
<tr>
<td><code>$BPE_PREPEND_&lt;NAME&gt;</code></td>
<td>prepend value to <code>$NAME</code></td>
</tr>
</tbody>
</table>
<p>For more details on actions, you can refer to the <a href="https://github.com/buildpacks/spec/blob/main/buildpack.md#environment-variable-modification-rules">environment variable modification rules from the buildpacks spec</a>.</p>
<p>You can also change the delimiter used when appending or prepending by setting <code>$BPE_DELIM_&lt;NAME&gt;</code> for a particular variable name. It will default to an empty string (i.e. no delimiter). An example of using this would be to append to PATH or LD_LIBRARY_PATH, which are colon delimited.</p>
<p><strong>DO NOT</strong> embed sensitive credentials or information using the environment variables buildpack. This information is added to the image generated by your build tool, so anyone with access to the image can see what you embed using this buildpack.</p>
<h3 id="buildpackyml" class="markup-heading">
    <a class="markup-heading__link" href="#buildpackyml">
        buildpack.yml
    </a>
</h3><p>Many Paketo buildpacks accept configuration from a <code>buildpack.yml</code> file if one is present at the root of the application directory.</p>
<p>For example, to configure the NodeJS version installed by the NodeJS Buildpack, create a file named <code>buildpack.yml</code> in the <code>nodejs/yarn</code> directory in the <a href="https://github.com/paketo-buildpacks/samples">samples repo</a>.
<pre class="copyable"><code class="copyable__code">nodejs:
  version: 12.12.0
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>
</p>
<p>Next, execute the build as normal and observe the that the specified version of NodeJs is installed.
<pre class="copyable"><code class="copyable__code">pack build samples/nodejs --path nodejs/yarn
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>
</p>
<h3 id="bindings" class="markup-heading">
    <a class="markup-heading__link" href="#bindings">
        Bindings
    </a>
</h3><h4 id="why-bindings" class="markup-heading">
    <a class="markup-heading__link" href="#why-bindings">
        Why bindings?
    </a>
</h4><p>Some Paketo Buildpacks and components installed by the Paketo Buildpacks accept credentials and other secrets using bindings at build and runtime. Commonly, bindings provide the location and credentials needed to connect to external services.</p>
<p>Some categories of external services one might want to bind at build-time include:</p>
<ul>
<li>Private artifact repositories.</li>
<li>SaaS security scanning tools.</li>
</ul>
<p>For example, the Maven buildpack accepts the location and credentials need to connect to a private Maven repository in a binding.</p>
<p>Some categories of external services  one might want to bind at runtime include:</p>
<ul>
<li>APM servers.</li>
<li>Data Services.</li>
<li>OAuth2 providers.</li>
</ul>
<p>For example, the Spring Boot Buildpack will install <a href="https://github.com/spring-cloud/spring-cloud-bindings">Spring Cloud Bindings</a> which is capable of auto-configuring Spring Boot application configuration properties to connect the application to a variety of external services, when a binding is provided at runtime.</p>
<h4 id="what-is-a-binding" class="markup-heading">
    <a class="markup-heading__link" href="#what-is-a-binding">
        What is a binding?
    </a>
</h4><p>A Binding contains:</p>
<ol>
<li>A <strong>name</strong>. Indentifies a particular binding. The name typically does not affect build or runtime behavior but may be used to reference a specific binding in output such as log messages.</li>
<li>A <strong>type</strong> or <strong>kind</strong>. Indicates what type of credentials the binding contains. For example, a binding of type <code>ApplicationInsights</code> contains the credentials needed to connect to Azure Application Insights.</li>
<li>An <em>optional</em> <strong>provider</strong>. Indicates the source of the binding. For example, in a PaaS context, a specific service broker might provide the binding.</li>
<li>key-value pairs. These contain the configuration data. For example, an <code>ApplicationInsights</code> binding may contain a key-value pair with key <code>InstrumentationKey</code>.</li>
</ol>
<p>Bindings must be presented to buildpacks as directories (typically volume mounted) on the container filesystem. The name of the directory provides the name of the binding. The contents of a binding can be provided using one of two specifications.</p>
<ul>
<li><a href="https://github.com/k8s-service-bindings/spec">Service Binding Specification for Kubernetes</a>. This specification should be preferred over the CNB Bindings Specification when supported by the platform.</li>
<li><a href="https://github.com/buildpacks/spec/blob/main/extensions/bindings.md">Cloud Native Buildpacks Bindings Specification</a>. The original buildpacks bindings specification; this specification is en route to <a href="https://github.com/buildpacks/rfcs/blob/main/text/0055-deprecate-service-bindings.md">deprecation</a></li>
</ul>
<p>Paketo Buildpacks will look for bindings in the <code>/platform/bindings</code> directory at build-time and in <code>$SERVICE_BINDING_ROOT</code> or <code>$CNB_BINDINGS</code> directory at runtime.</p>
<p>For example, the Java Buildpack accepts a binding with <code>type</code> equal to <code>maven</code> containing a key named <code>settings.xml</code> containing <a href="http://maven.apache.org/settings.html">Maven settings</a>. In the build container, the Maven Buildpack will use <code>settings.xml</code> if it finds either
<pre class="copyable"><code class="copyable__code">/platform
└── bindings
    └── &lt;name&gt;
        ├── settings.xml
        └── type
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>

or
<pre class="copyable"><code class="copyable__code">/platform
└── bindings
    └──&lt;name&gt;
        └── metadata
        |   └── kind
        └── secret
            └── settings.xml
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>

on the filesystem, where either the <code>type</code> or <code>kind</code> file contains the string <code>maven</code>.</p>
<h4 id="how-to-use-bindings" class="markup-heading">
    <a class="markup-heading__link" href="#how-to-use-bindings">
        How to use bindings?
    </a>
</h4><p>The workflow for creating a binding and providing it to a build will depend on the chosen platform. For example, <code>pack</code> users should use the <code>--volume</code> flag to mount a binding directory into the build or app containers. Users of the <code>kpack</code> platform should store key value pairs in a Kubernetes Secret and provide that secret and associated metadata to an Image as described in the <a href="https://github.com/pivotal/kpack/blob/master/docs/servicebindings.md#service-bindings">kpack documentation</a>.</p>
<p><strong>Example:</strong>  Providing a Binding to <code>pack build</code></p>
<p>Given a directory containing a build-time binding, <code>pack</code> users can provide this binding to a Paketo buildpack using the <code>--volume</code> flag.
<pre class="copyable"><code class="copyable__code">pack build --volume &lt;absolute-path-to-binding&gt;:/platform/bindings/&lt;binding-name&gt; &lt;image-name&gt;
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>
</p>
<p><strong>Example:</strong>  Providing a Binding to <code>docker run</code></p>
<p>Given a directory containing a runtime binding, <code>docker</code> users can provide the binding to the app image using the <code>--volume</code> and <code>--env</code> flags
<pre class="copyable"><code class="copyable__code">docker run --env SERVICE_BINDING_ROOT=/bindings --volume &lt;absolute-path-to-binding&gt;:/bindings/&lt;binding-name&gt; &lt;image-name&gt;
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>
</p>
<h3 id="procfiles" class="markup-heading">
    <a class="markup-heading__link" href="#procfiles">
        Procfiles
    </a>
</h3><p>Paketo users may override buildpack-provided types or augment the app-image with additional process types using a <code>Procfile</code>.  <code>Procfile</code> support is provided by the <a href="https://github.com/paketo-buildpacks/procfile">Paketo Procfile Buildpack</a>. The Procfile Buildpack will search for a file named <code>Procfile</code> at the root of the application. <code>Procfiles</code> should adhere to the following schema:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain">&lt;type&gt;: &lt;command&gt;
</code></pre></div><p>If a given <a href="https://yujiorama.github.io/unofficial-translations/paketo-website/docs/concepts/buildpacks/">language family buildpack</a> does not contain the Procfile Buildpack it can be explicitly appended at runtime.</p>
<p><strong>Example</strong>: A Hello World Procfile</p>
<p>The following adds a process with <code>type</code> equal to <code>hello</code> and makes it the default process.
<pre class="copyable"><code class="copyable__code">echo &#34;hello: echo hello world&#34; &gt; nodejs/yarn/Procfile
pack build samples/nodejs \
  --path nodejs/yarn \
  --buildpack gcr.io/paketo-buildpacks/nodejs \
  --buildpack gcr.io/paketo-buildpacks/procfile \
  --default-process hello
docker run samples/nodejs # should print &#34;hello world&#34;
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>
</p>
<h2 id="building-behind-a-firewall" class="markup-heading">
    <a class="markup-heading__link" href="#building-behind-a-firewall">
        Building Behind a Firewall
    </a>
</h2><h3 id="proxy-configuration" class="markup-heading">
    <a class="markup-heading__link" href="#proxy-configuration">
        Proxy Configuration
    </a>
</h3><p>Paketo Buildpacks can be configured to route traffic through a proxy using the <code>http_proxy</code>, <code>https_proxy</code>, and <code>no_proxy</code> environment variables. <code>pack</code> will set these environment variables in the build container if they are set in the host environment.</p>
<h3 id="dependency-mappings" class="markup-heading">
    <a class="markup-heading__link" href="#dependency-mappings">
        Dependency Mappings
    </a>
</h3><p>Paketo Buildpacks may download dependencies from the internet. For example, the Java Buildpack with download the BellSoft Liberica JRE will from the Liberica <a href="https://github.com/bell-sw/Liberica/releases">github releases</a> by default.</p>
<p>If a dependency URI is inaccessible from the build environment, a <a href="#bindings">binding</a> can be used to map a new URI to a given dependency. This allows organizations to upload a copies of vetted dependencies to an accessible location and provide developers and CI/CD pipelines with configuration pointing the buildpack at the accessible dependencies.</p>
<p>The URI mappings can be configured with one or more bindings of <code>type</code> <code>dependency-mapping</code>. Each key value pair in the binding should map the <code>sha256</code> of a dependency to a URI. Information about the dependencies a buildpack may download (including the <code>sha256</code> and the current default <code>uri</code>) can be found in the <code>buildpack.toml</code> of each component buildpack.</p>
<p><strong>Example</strong> Mapping the JRE to an internal URI</p>
<p>For example, to make the Bellsoft Liberica JRE dependency accessible available to builds in an environment where Github is inaccessible, an operator should:</p>
<ol>
<li>Find the <code>sha256</code> and default <code>uri</code> for the desired dependency in <a href="https://github.com/paketo-buildpacks/bellsoft-liberica/blob/main/buildpack.toml">buildpack.toml</a> of the <a href="https://github.com/paketo-buildpacks/bellsoft-liberica">Bellsoft Liberica buildpack</a>. Example values:
<ul>
<li><code>sha256</code>: <code>b4cb31162ff6d7926dd09e21551fa745fa3ae1758c25148b48dadcf78ab0c24c</code></li>
<li><code>uri</code>: <code>https://github.com/bell-sw/Liberica/releases/download/11.0.8+10/bellsoft-jre11.0.8+10-linux-amd64.tar.gz</code></li>
</ul>
</li>
<li>Download the dependency from the <code>uri</code> and upload it to a location on the internal network that is accessible during the build.</li>
<li>Create a binding with:
<ul>
<li><code>type</code> equal to <code>dependency-mapping</code></li>
<li>A key/value pair where the key is equal to the <code>sha256</code> of the dependency and the value is equal to the new URI.</li>
</ul>
</li>
<li>Configure all builds with this binding.</li>
</ol>
<h2 id="ca-certificates" class="markup-heading">
    <a class="markup-heading__link" href="#ca-certificates">
        CA Certificates
    </a>
</h2><p>Additional CA certificates may be added to the system truststore using the <a href="https://github.com/paketo-buildpacks/ca-certificates">Paketo CA Certificates Buildpack</a>.</p>
<p>CA certificates can be provided at both build and runtime with a <a href="#bindings">binding</a> of <code>type</code> <code>ca-certficates</code>. Each key value pair in the binding should map a certficate name to a single PEM encoded CA Certficates</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain">&lt;binding-name&gt;
├── &lt;cert file name&gt;
└── type
</code></pre></div><p>If a given <a href="https://yujiorama.github.io/unofficial-translations/paketo-website/docs/concepts/buildpacks/">language family buildpack</a> does not contain the Paketo CA Certificates Buildpack it can be explicitly prepended at runtime.</p>
<p><strong>Example</strong>: Adding a CA Certificate at Runtime</p>
<p>The samples repository contains a simple Golang application that will make a <code>HEAD</code> request to a provided URL.</p>
<p>Given a file <code>&lt;your-ca.pem&gt;</code> containing a single PEM encoded CA certificate needed to verify a TLS connection to an https URL <code>&lt;url&gt;</code>, add the CA certificate to the binding.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">cp &lt;your-ca.pem&gt; ca-certificates/binding/
</code></pre></div><p>The provided sample contains a simple Golang application that will make a <code>HEAD</code> request to a provided URL. Build the application using the CA Certificates buildpack</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">pack build samples/ca-certificates <span class="se">\
</span><span class="se"></span>    --path ca-certificates <span class="se">\
</span><span class="se"></span>    --buildpack paketo-buildpacks/ca-certificates <span class="se">\
</span><span class="se"></span>    --buildpack paketo-buildpacks/go
</code></pre></div><p>Run the sample application, providing the binding, and passing the URL as a positional argument (should print <code>SUCCESS!</code>).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">docker run --rm <span class="se">\
</span><span class="se"></span>  --env <span class="nv">SERVICE_BINDING_ROOT</span><span class="o">=</span>/bindings <span class="se">\
</span><span class="se"></span>  --volume <span class="s2">&#34;</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">/ca-certficates/binding:/bindings/ca-certificates&#34;</span> <span class="se">\
</span><span class="se"></span>  samples/ca-certificates &lt;url&gt;
</code></pre></div><p><strong>Disabling CA Certificates</strong></p>
<p>If a language family buildpack contains the Paketo CA Certifcates Buildpack,
the CA Certificates Buildpack will always pass detection so that certificates
can be provided dynamically at runtime.</p>
<p>To opt out of this behavior all together, the <code>BP_ENABLE_RUNTIME_CERT_BINDING</code>
environment variable can be set to <code>false</code> at build-time. This will disable the
ability to set certificates at runtime. The CA Certificates Buildpack will then
only detect if a certificate binding is provided at build-time.</p>
<h2 id="applying-custom-labels" class="markup-heading">
    <a class="markup-heading__link" href="#applying-custom-labels">
        Applying Custom Labels
    </a>
</h2><p>Paketo users may add labels to the application image using the <a href="https://github.com/paketo-buildpacks/image-labels">Image Labels Buildpack</a>.</p>
<p>Environment variables prefixed with <code>BP_OCI_</code> can be used to set <a href="https://github.com/opencontainers/image-spec/blob/master/annotations.md#pre-defined-annotation-keys">OCI-specific</a>. For example, if <code>BP_OCI_AUTHORS</code> is set at build-time, the Image Labels Buildpack will add a label to the image with key <code>org.opencontainers.image.authors</code> and value equal to the value of <code>$BP_OCI_AUTHORS</code>.</p>
<p>Users may contribute arbitrary labels by providing a collection of space-delimited key-value pairs with the <code>BP_IMAGE_LABELS</code> environment variable. Values containing spaces can be quoted.</p>
<p>If a given <a href="https://yujiorama.github.io/unofficial-translations/paketo-website/docs/concepts/buildpacks/">language family buildpack</a> does not contain the Image Labels Buildpack it can be explicitly appended at runtime.</p>
<p><strong>Example</strong>: Adding Custom Labels
<pre class="copyable"><code class="copyable__code">pack build samples/nodejs \
  --path nodejs/yarn \
  --buildpack  gcr.io/paketo-buildpacks/nodejs \
  --buildpack  gcr.io/paketo-buildpacks/image-labels \
  --env &#34;BP_OCI_DESCRIPTION=Demo Application&#34; \
  --env &#39;BP_IMAGE_LABELS=io.packeto.example=&#34;Adding Custom Labels&#34;&#39;
docker inspect samples/nodejs | jq &#39;.[].Config.Labels[&#34;org.opencontainers.image.description&#34;]&#39; # should print &#34;Demo Application&#34;
docker inspect samples/nodejs | jq &#39;.[].Config.Labels[&#34;io.packeto.example&#34;]&#39; # should print &#34;Adding Custom Labels&#34;
</code><img class="copyable__clipboard" src="/images/clipboard.svg" alt="copy to clipboard" /><div class="copyable__copied copied">Copied!</div></pre>
</p>
<h2 id="configuring-locale" class="markup-heading">
    <a class="markup-heading__link" href="#configuring-locale">
        Configuring Locale
    </a>
</h2><p>By default, an image created using Paketo buildpacks will not have a specific locale set. If you run <code>locale</code>, you&rsquo;ll end up with these settings:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">LANG</span><span class="o">=</span>
<span class="nv">LANGUAGE</span><span class="o">=</span>
<span class="nv">LC_CTYPE</span><span class="o">=</span><span class="s2">&#34;POSIX&#34;</span>
<span class="nv">LC_NUMERIC</span><span class="o">=</span><span class="s2">&#34;POSIX&#34;</span>
<span class="nv">LC_TIME</span><span class="o">=</span><span class="s2">&#34;POSIX&#34;</span>
<span class="nv">LC_COLLATE</span><span class="o">=</span><span class="s2">&#34;POSIX&#34;</span>
<span class="nv">LC_MONETARY</span><span class="o">=</span><span class="s2">&#34;POSIX&#34;</span>
<span class="nv">LC_MESSAGES</span><span class="o">=</span><span class="s2">&#34;POSIX&#34;</span>
<span class="nv">LC_PAPER</span><span class="o">=</span><span class="s2">&#34;POSIX&#34;</span>
<span class="nv">LC_NAME</span><span class="o">=</span><span class="s2">&#34;POSIX&#34;</span>
<span class="nv">LC_ADDRESS</span><span class="o">=</span><span class="s2">&#34;POSIX&#34;</span>
<span class="nv">LC_TELEPHONE</span><span class="o">=</span><span class="s2">&#34;POSIX&#34;</span>
<span class="nv">LC_MEASUREMENT</span><span class="o">=</span><span class="s2">&#34;POSIX&#34;</span>
<span class="nv">LC_IDENTIFICATION</span><span class="o">=</span><span class="s2">&#34;POSIX&#34;</span>
<span class="nv">LC_ALL</span><span class="o">=</span>
</code></pre></div><p>If you wish to set a locale, you may do so when you run the image by setting the corresponding environment variable. For example, with Docker one could execute <code>docker run -e LANG=en_US.utf8 ...</code> to change the locale.</p>
<p>This isn&rsquo;t always necessary but can impact output from your application. For example if you have an application that writes unicode characters to STDOUT/STDERR and you go to view those, possibly with <code>docker logs</code>, they will not display correctly unless you have a locale set that supports unicode, like UTF-8 in the example above.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->

            </div>
            
  <a href="http://github.com/paketo-buildpacks/paketo-website/edit/main/content/docs%5creference%5cconfiguration.md" target="_blank" class="github-edit" style="text-decoration:none">
    <div class="github-edit__content">
      <div class="github-edit__logo-container">
        <img class="github-edit__logo" src="/images/github-mark.png">
      </div>
        <div class="github-edit__text">Edit</div>
    </div>
</a>

            <p class="docs-mod-time"><strong>Last modified:</strong> September 9, 2021</p>
        </div>
        
<div class="docs-body__table-of-contents-container docs-body__table-of-contents-container--desktop">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#about-the-examples">About the Examples</a></li>
    <li><a href="#types-of-configuration">Types of Configuration</a>
      <ul>
        <li><a href="#environment-variables">Environment Variables</a></li>
        <li><a href="#buildpackyml">buildpack.yml</a></li>
        <li><a href="#bindings">Bindings</a></li>
        <li><a href="#procfiles">Procfiles</a></li>
      </ul>
    </li>
    <li><a href="#building-behind-a-firewall">Building Behind a Firewall</a>
      <ul>
        <li><a href="#proxy-configuration">Proxy Configuration</a></li>
        <li><a href="#dependency-mappings">Dependency Mappings</a></li>
      </ul>
    </li>
    <li><a href="#ca-certificates">CA Certificates</a></li>
    <li><a href="#applying-custom-labels">Applying Custom Labels</a></li>
    <li><a href="#configuring-locale">Configuring Locale</a></li>
  </ul>
</nav>
</div>

    </div>
</div>


    <footer class="footer text--light">
    <div class="footer-social-links-container">
        <a class="footer-social-link" href="https://twitter.com/Paketo_io">
            <div class="footer-social-link__image-container">
                <div class="logo">
                    <img class="logo__image" src="/unofficial-translations/paketo-website/v2/images/logo-twitter.svg" alt="Blue Twitter bird logo">
                </div>
            </div>
            <div class="text--light text--400">
                Twitter
            </div>
        </a>
        <a class="footer-social-link" href="https://slack.paketo.io/">
            <div class="footer-social-link__image-container">
                <div class="logo">
                    <img class="logo__image" src="/unofficial-translations/paketo-website/v2/images/logo-slack.svg" alt="Slack logo">
                </div>
            </div>
            <div class="text--light text--400">
                Slack
            </div>
        </a>
        <a class="footer-social-link" href="https://github.com/paketo-buildpacks">
            <div class="footer-social-link__image-container">
                <div class="logo logo--github">
                    <img class="logo__image"  src="/unofficial-translations/paketo-website/v2/images/logo-github-cropped.svg" alt="GitHub Octocat logo"/>
                </div>
            </div>
            <div class="text--light text--400">
                GitHub
            </div>
        </a>
    </div>
    <div class="footer-privacy-policy">
        <div class="footer-text--small">Paketo Buildpacks is a <a class="text--light" href="https://www.cloudfoundry.org/">Cloud Foundry</a> Project</div>
        <img class="cloudfoundry-logo" src="/unofficial-translations/paketo-website/v2/images/logo-cloudfoundry-light.svg" alt="Cloud Foundry logo" />
        <a class="footer-text--small text--light" href="https://www.linuxfoundation.org/privacy">Privacy Policy</a>
    </div>
</footer><script src="/unofficial-translations/paketo-website/js/main.7b2c859f76ebea65f7468883b2f720537f395fc48d504f5e3b4d33c389e860f2.js"></script>

    <div id="footer-skip-link" class="screenreader-container">
    <a href="#header-skip-link" class="screenreader-text">Skip to Header</a>
</div>

</body>

</html>
